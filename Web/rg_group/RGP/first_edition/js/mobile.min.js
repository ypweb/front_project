function mPostData(t,u){var aid=t.getAttribute("aid"),pid=t.getAttribute("pid")==null?"":t.getAttribute("pid"),stat=t.getAttribute("stat")==null?"":t.getAttribute("stat"),action=t.getAttribute("id")==null?"":t.getAttribute("id"),btn_style=t.getAttribute("class")==null?"":t.getAttribute("class"),url=!isUndefined(u)?u:"/add_user_click",data="&id="+aid+"&pid="+pid+"&action="+action+"&huxiu_hash_code="+huxiu_hash_code,random=parseInt(Math.random()*1e4),u=url+"?random="+random,d=data;if(btn_style=="action"){msgPoint("您已表态")}else{aj.post(u,{hxmdata:d},function(data){var data=eval("("+data+")");if(data.result=="1"){t.className="action";msgPoint(data.msg);if(pid!==""){var mk="";stat=="0"?mk="up_":mk="down_";$(mk+pid).innerText=parseInt($(mk+pid).innerText)+1}}else{msgPoint(data.msg)}})}}function msgPoint(e){var t=$("msg_point"),n="2000";if(t.style.display!="block"){t.innerHTML=e;t.style.display="block";setTimeout(function(){t.style.display="none"},n)}}function boxToggle(e,t,n,r){var i=$(t);if(i.style.opacity=="0"||i.style.height==""){i.style.display="block";i.style.height="auto";i.style.opacity="1";i.style.top=n;e.className="active"}else{i.style.opacity="0";i.style.top=r;i.style.height="0";i.style.display="none";e.className=""}}function shareToggle(e,t){var n=$(e),r=$(t);if(n.style.opacity=="0"||n.style.height==""){r.className="action";n.style.height="auto";n.style.width="auto";n.style.opacity="1"}else{r.className="";n.style.height="0";n.style.width="0";n.style.opacity="0"}}function boxHide(e){var t=$(e);t.style.opacity="0";t.style.top="-20px";t.style.height="0"}function isPhoto(e){var t=e.innerHTML;if(hasClass(e,"active")){removeClass(e,"active");document.cookie="isphoto=yes;path=/";window.location.reload()}else if(!hasClass(e,"active")){addClass(e,"active");imgHidden();document.cookie="isphoto=no;path=/"}else{return false}}function $(e){return!e?null:document.getElementById(e)}function getClass(e,t){if(document.getElementsByClassName){return document.getElementsByClassName(t)}else{var n=document.getElementsByTagName(e);var r=[];for(var i=0;i<n.length;i++){if(n[i].class==t){r[r.length]=n[i]}}return r}}function addEvent(e,t,n){var e=$(e);if(e.addEventListener){e.addEventListener(t,n);return true}else if(e.attachEvent){return e.attachEvent("on"+t,n)}else{return false}}function removeEvent(e,t,n){var e=$(e);if(e.removeEventListerner){e.removeEventListerner(t,n);return true}else if(e.detachEvent){return e.detachEvent("on"+t,n)}else{return false}}function triggerEvent(e){var e=$(e);if(document.all){e.click()}else{var t=document.createEvent("MouseEvents");t.initEvent("click",true,true);e.dispatchEvent(t)}}function isUndefined(e){return typeof e=="undefined"?true:false}function hasClass(e,t){var n=e;var r=n.className;var i=new RegExp("(^|.*?)"+t+"(.*?)");if(r.match(i)){return true}else{return false}}function addClass(e,t){var n=e;var r=n.className;if(r==""){n.className=t}else{var i=new RegExp("(^|.*?)"+t+"(.*?)");if(r.match(i)){return}else{r+=" "+t;n.className=r}}}function removeClass(e,t){var n=e;var r=n.className;if(r==""){return}else{var i=false;var s=r.split(" ");var o=s.length;for(var u=0;u<o;u++){if(s[u]==t){i=true;break}}if(i){s.splice(u,1);n.className=s.join(" ")}}}function getCookie(e){var t=document.cookie;var n=t.split("; ");for(var r=0;r<n.length;r++){var i=n[r].split("=");if(i[0]==e)return i[1]}return""}function addCookie(e,t,n){var r=e+"="+escape(t);if(n>0){var i=new Date;i.setTime(i.getTime+n*3600*1e3);r=r+"; expire="+i.toGMTString()}document.cookie=r}function deleteCookie(e){var t=new Date;t.setTime(t.getTime()-1e4);document.cookie=e+"=v; expire="+t.toGMTString()}function imgHidden(){var e=getClass("span","thumb-img");for(var t=0;t<e.length;t++){e[t].style.display="none"}}function postReadLater(t,aid){var tClass=t.className,postUrl="/add_user_click",postData={id:aid,action:"later_read",huxiu_hash_code:huxiu_hash_code};if(tClass=="btn-on"){aj.post(postUrl,postData,function(data){var data=eval("("+data+")");if(data.result=="1"){t.className="btn-un";t.innerHTML="稍后阅读列表"}else{msgPoint(data.msg)}})}else{window.location.href="/later_read_list.html"}}function goPre(){if(window.location.href==document.referrer){history.back()}window.location.href="http://m.huxiu.com/"}function slideMenu(){var e=$("htmlBox");if(typeof sMtype=="undefined"||sMtype=="0"){var t=document.documentElement.clientWidth,n=document.documentElement.clientHeight;e.style.height=n+"px";e.style.overflow="hidden";e.className="tr-bg02 html-box-animate";sMtype="1"}else{sMtype="0";e.style.height="auto";e.style.overflow="visible";e.className=""}}function boxInfoToggle(e,t,n){if(t=="none"){$(e).style.display="none";if($(n)!=null){$(n).style.display="block"}}else if(t=="block"){$(e).style.display="block";if($(n)!=null){$(n).style.display="none"}}}var lastScrollTop=0;window.onscroll=function(){var e=document.documentElement.scrollTop||document.body.scrollTop;if(e<lastScrollTop){getClass("div","top-wrap")[0].style.position="fixed"}else if(e>lastScrollTop){getClass("div","top-wrap")[0].style.position="absolute"}lastScrollTop=e};if($("ad_btn_close")!=null){if(getCookie("idx_top_ad")=="hide"){$("idx_top_adwrap").style.display="none"}addEvent("ad_btn_close","click",function(){$("idx_top_adwrap").style.display="none";addCookie("idx_top_ad","hide")})}if($("menuListBtn")!=null){addEvent("menuListBtn","click",function(){boxToggle("menuListBtn","menuListWrap","31px","-31px")})}if($("searchBox")!=null){addEvent("searchBox","click",function(){boxToggle("searchBox","searchWrap","80px","-80px")})}if($("share_btn")!=null){addEvent("share_btn","click",function(){shareToggle("share_box","share_btn")})}if($("imgType")!=null){addEvent("liImgType","click",function(){isPhoto(imgType)})}if($("optionsb")!=null){addEvent("optionsb","click",function(){slideMenu()})}if($("like")!=null){addEvent("like","click",function(){var e=this.getAttribute("class"),t=$("no_like").getAttribute("class"),n="/add_user_click";if(e=="action"||t=="action"){msgPoint("您已标记")}else{mPostData(this,n)}});addEvent("no_like","click",function(){var e=this.getAttribute("class"),t=$("like").getAttribute("class"),n="/add_user_click";if(e=="action"||t=="action"){msgPoint("您已标记")}else{mPostData(this,n)}})}if($("favorite")!=null){addEvent("favorite","click",function(){var e=this.getAttribute("class"),t="/add_user_click";if(e=="action"){msgPoint("您已收藏")}else{mPostData(this,t)}})}if($("go_top")!=null){addEvent("go_top","click",function(){window.scrollTo(0,0)})}if($("login_info_close")!=null){addEvent("login_info_close","click",function(){boxInfoToggle("login_info_wrap","none","login_info_wrap_un")})}if($("login_info_btn_un")!=null){addEvent("login_info_btn_un","click",function(){boxInfoToggle("login_info_wrap_un","none","login_info_wrap")})}if($("login_info_wrap")!=null&&getCookie("login_info_wrap")!="close"){$("login_info_wrap").style.display="block"}if($("login_info_btn_true")!=null){addEvent("login_info_btn_true","click",function(){addCookie("login_info_wrap","close");boxInfoToggle("login_info_wrap_un","none")})}var aj=new Object;aj.request=function(){if(window.XMLHttpRequest){var e=new XMLHttpRequest}else if(window.ActiveXObject){try{var e=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){try{var e=new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}}if(!e){window.alert("不能创建XMLHttpRequest对象<SPAN class=hilite2>实例</SPAN>.");return false}return e};aj.req=aj.request();aj.Handle=function(e){aj.req.onreadystatechange=function(){if(aj.req.readyState==4){if(aj.req.status==200){e(aj.req.responseText)}}}};aj.cl=function(e){if(typeof e=="object"){var t="";for(a in e){t+=a+"="+e[a]+"&"}t=t.substr(0,t.length-1);return t}else{return e}};aj.get=function(e,t){aj.req.open("get",e,true);aj.req.send(null);aj.Handle(t)};aj.post=function(e,t,n){aj.req.open("post",e,true);aj.req.setRequestHeader("Content-Type","application/x-www-form-urlencoded");t=aj.cl(t);aj.req.send(t);aj.Handle(n)};aj.jsonp=function(){var e=0;return function(t,n,r){var i="_jsonp_"+e++;t+=i;var s=document.createElement("script");s.type="text/javascript";s.src=t;window[i]=function(e){n.call(r||window,e);document.getElementsByTagName("head")[0].removeChild(s);s=null;delete window[i]};document.getElementsByTagName("head")[0].appendChild(s)}}()