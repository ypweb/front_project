<!DOCTYPE html>
<html><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>JieFagnLu Shopping Cart: Buy the rest assured, happy to eat-JFL</title>
    <link href="../../Content/css/cart-global.css" rel="stylesheet" type="text/css">
    <link href="../../Content/css/cart.css" rel="stylesheet" type="text/css">
    <link href="../../Content/css/beas.css" rel="stylesheet" type="text/css">
    <link href="../../Content/css/Individual.css" rel="stylesheet" type="text/css">
    <link href="../../Content/css/top_bottom.css" rel="stylesheet" type="text/css">
    <link href="../../Content/css/Individual_center.css" rel="stylesheet" type="text/css">
    <script src="../../js/jquery-1.8.3.min.js" type="text/javascript"></script>
    
    <!-- ga code -->
</head>
<body>
    <!-- cart header -->
    <div class="cart_header">
    <div class="top_box">
        <div class="top_Menu">
            <h1>
                <span><a href="#">收藏本站</a></span><span>您好，欢迎光临解放路</span><span><a href="#">[登录]</a><a href="#">[注册]</a></span></h1>
            <ul>
                <li><a href="#">我的账户</a></li>
                <li><a href="#">订单查询</a></li>
                <li><a href="#">我的收藏</a></li>
                <li><a href="#">帮助中心</a></li>
                <li class="tb"><a href="#">联系客服</a></li>
            </ul>
        </div>
        <div class="top_operate">
            <div class="logo">
                <img src="../../Content/img/public/logo.png"></div>
            <div class="Search">
                <span>
                    <input name="" value="请输入关键词" class="text" type="text"><input value="搜 索" class="button" type="button"></span></div>
        </div>
        <div class="nav">
            <div class="classify">
                所有产品分类</div>
            <div class="Navigation">
                <ul>
                    <li><a href="#">首页</a></li>
                    <li><a href="#">精品聚汇</a></li>
                    <li><a href="#">今日特惠</a></li>
                    <li><a href="#">新品上市</a></li>
                    <li><a href="#">礼尚往来</a></li>
                </ul>
            </div>
            <div class="shopping">
                <h1>
                    购物车</h1>
                <span>5</span>
            </div>
        </div>
    </div>
</div>

    <!-- cart body -->
    <div class="cart_section">
        <div class="wrapper">
            <div class="Content ger">
                <div class="Individual_center_left">
                    <div class="gz_Info">
                        <h1><img src="../../Content/img/public/tou_01.png"><span></span></h1>
                        <h2><strong>liberation</strong><span>会员</span></h2>
                    </div>
                    <div class="left_Menu">
                        <h1>个人中心</h1>
                        <ul>
                            <li><a href="http://localhost:55723/CustomerMng/SecuritySettings/">安全设置</a></li>
                            <li><a href="http://localhost:55723/CustomerMng/Address/">收货地址</a></li>
                            <li><a href="#">我的优惠劵</a></li>
                            <li><a href="#">评价</a></li>
                            <li><a href="#">投诉</a></li>
                            <li><a href="http://localhost:55723/CustomerMng/Index/">个人资料</a></li>
                            <li><a href="#">退换货管理</a></li>
                            <li><a href="#">我的订单</a></li>
                            <li><a href="http://localhost:55723/CustomerMng/Favorite/">商品收藏</a></li>
                        </ul>
                    </div>
                </div>
                <div class="Individual_center_right">
                    <div class="Bread">
                        <ul>
                            <li><a href="#">个人中心</a>&gt;</li>
                            <li><a href="#">安全中心</a></li>
                        </ul>
                    </div>
                    
<script src="../JieFagnLu Shopping Cart  Buy the rest assured, happy to eat-JFL_files/jquery-1.js" type="text/javascript"></script>
    <div class="Address_sh">

            <div class="shdiz" id="31">
                <h2>
                        <strong id="b">常用地址</strong><span style="display: none;" class="dz_cz"><b class="delAddress">×</b><a href="#" name="updateAddress">编辑</a></span> 
                </h2>
                <ul>
                    <li><em>勤奋</em>收</li>
                    <li>山西&nbsp;晋城市&nbsp;高平市</li>
                    <li>阿瑟金风科技ask福建啊看色粉</li>
                    <li>13555225525</li>
                </ul>
            </div>
            <div class="shdiz" id="32">
                <h2>
                        <span style="display: none;" class="dz_cz"><b class="delAddress">×</b><a href="http://localhost:55723/CustomerMng/SetDefaultAddress?addressID=32">设为常用地址</a><a href="#" name="updateAddress">编辑</a></span> 
                </h2>
                <ul>
                    <li><em>钱凯</em>收</li>
                    <li>湖北&nbsp;宜昌市&nbsp;夷陵区</li>
                    <li>撒大法师法爱上发顺丰是发生地方 撒旦法</li>
                    <li>15352152141</li>
                </ul>
            </div>
            <div class="shdiz" id="16">
                <h2>
                        <span style="display: none;" class="dz_cz"><b class="delAddress">×</b><a href="http://localhost:55723/CustomerMng/SetDefaultAddress?addressID=16">设为常用地址</a><a href="#" name="updateAddress">编辑</a></span> 
                </h2>
                <ul>
                    <li><em>123</em>收</li>
                    <li>&nbsp;&nbsp;</li>
                    <li>ggg</li>
                    <li>123</li>
                </ul>
            </div>
            <div class="shdiz" id="23">
                <h2>
                        <span style="display: none;" class="dz_cz"><b class="delAddress">×</b><a href="http://localhost:55723/CustomerMng/SetDefaultAddress?addressID=23">设为常用地址</a><a href="#" name="updateAddress">编辑</a></span> 
                </h2>
                <ul>
                    <li><em>paul1</em>收</li>
                    <li>内蒙古&nbsp;北京市&nbsp;河东区</li>
                    <li>详细地址</li>
                    <li>1882527714</li>
                </ul>
            </div>
        <div class="append">
            <a href="#" id="tj_add_02"><em>+</em>添加新地址</a></div>
    </div>

<div class="add_tk" id="add_x">
    <h1>
        <strong>添加新地址</strong><a href="#" class="Close">×</a></h1>
    <ul>
        <li class="li_01"><strong><em>*</em>收货人：</strong><span><input name="" id="dzx_01" type="text"></span></li>
        <li class="li_02"><strong><em>*</em>收货城市：</strong><span><select id="SelProvince" name="SelProvince"><option selected="selected" value="">请选择</option>
<option value="01">北京</option>
<option value="02">天津</option>
<option value="03">河北</option>
<option value="04">山西</option>
<option value="05">内蒙古</option>
<option value="06">辽宁</option>
<option value="07">吉林</option>
<option value="08">黑龙江</option>
<option value="09">上海</option>
<option value="10">江苏</option>
<option value="11">浙江</option>
<option value="12">安徽</option>
<option value="13">福建</option>
<option value="14">江西</option>
<option value="15">山东</option>
<option value="16">河南</option>
<option value="17">湖北</option>
<option value="18">湖南</option>
<option value="19">广东</option>
<option value="20">广西</option>
<option value="21">海南</option>
<option value="22">重庆</option>
<option value="23">四川</option>
<option value="24">贵州</option>
<option value="25">云南</option>
<option value="26">西藏</option>
<option value="27">陕西</option>
<option value="28">甘肃</option>
<option value="29">青海</option>
<option value="30">宁夏</option>
<option value="31">新疆</option>
<option value="32">台湾省</option>
<option value="33">香港特别行政区</option>
<option value="34">澳门特别行政区</option>
</select></span></li>
        <li class="li_03"><strong><em>*</em>详细地址：</strong><span><input name="" id="dzx_03" type="text"></span><a href="#">配送说明</a></li>
        <li class="li_04"><strong><em>*</em>手机号码：</strong><span><input name="" id="dzx_04_01" type="text"></span><strong>或&nbsp;固定电话：</strong><span><input name="" id="dzx_04_02" type="text"></span></li>
        <li class="li_05">
            <input name="" value="" id="dzx_05" type="checkbox">设为常用地址</li>
        <li class="li_06">
            <input name="" value="确定" id="Submit_dz" type="button"><input name="" value="取消" class="qx_dz" type="button"></li>
    </ul>
</div>
<div class="add_tk" id="update_x">
    <h1>
        <strong>编辑地址</strong><a href="#" class="Close">×</a></h1><input id="addressid" type="hidden">
    <ul>
        <li class="li_01"><strong><em>*</em>收货人：</strong><span><input name="" id="b_dzx_01" type="text"></span></li>
        <li class="li_02"><strong><em>*</em>收货城市：</strong><span id="address"></span></li>
        <li class="li_03"><strong><em>*</em>详细地址：</strong><span><input name="" id="b_dzx_03" type="text"></span><a href="#">配送说明</a></li>
        <li class="li_04"><strong><em>*</em>手机号码：</strong><span><input name="" id="b_dzx_04_01" type="text"></span><strong>或&nbsp;固定电话：</strong><span><input name="" id="b_dzx_04_02" type="text"></span></li>
        <li class="li_05">
            <input name="" value="" id="b_dzx_05" type="checkbox">设为常用地址</li>
        <li class="li_06">
            <input name="" value="确定" id="Submit_tj" type="button"><input name="" value="取消" class="qx_dz" type="button"></li>
    </ul>
</div>
<div style="height: 1025px;" class="hei">
</div>
<script type="text/javascript">
    $(document).ready(function () {
        $(".shdiz").hover(function () {
            $(".dz_cz", $(this)).toggle();
        });
    });
</script>
<script type="text/javascript">
    $(document).ready(function () {
        $("#tj_add_01,#tj_add_02").click(function () {
            $("#add_x,.hei").show();
        });
        $(".Close,.qx_dz").click(function () {
            $("#add_x,#update_x,.hei").hide();
        });
    });
</script>
<script type="text/javascript">
    $(function () {
        var _height = $(document).height();
        $(".hei").height(_height);
    }) 
</script>
<script type="text/javascript">
    $("#Submit_dz").click(function () {
        debugger;
        var name = $("#dzx_01").val();
        var city1 = $("#SelProvince").val();
        var city2 = $("#selCity").val();
        var city3 = $("#selDistrict").val();
        var xdz = $("#dzx_03").val();
        var phone1 = $("#dzx_04_01").val();
        var phone2 = $("#dzx_04_02").val();
        var mor = 0; //获取是否选中为常用地址
        if ($("#dzx_05").attr("checked")) {
            mor = 1;
        }
        var url = "AddAddress"; //方法

        var data = { name: name, province: city1, city: city2, district: city3, fullAddress: xdz, mobilePhone: phone1, telePhhone: phone2, isDefault: mor }; //传输
        $.ajax({
            url: url, //数据
            data: data, //数据
            type: "POST", //传输方式
            dataType: "json", //数据类型
            success: function (data) {//传输成功
                debugger;
                window.top.location.reload();

            },
            error: function (e) {//传输失败
                debugger;
                alert("资料填写不完善！");
            }
        })
        return 1;

    });

    //编辑
    $("#Submit_tj").click(function () {
        debugger;
        var addressID = $("#addressid").val();
        var name = $("#b_dzx_01").val();
        var city1 = $("#selProvince_update").val();
        var city2 = $("#selCity_update").val();
        var city3 = $("#selDistrict_update").val();
        var xdz = $("#b_dzx_03").val();
        var phone1 = $("#b_dzx_04_01").val();
        var phone2 = $("#b_dzx_04_02").val();
        var mor = 0; //获取是否选中为常用地址
        if ($("#b_dzx_05").attr("checked")) {
            mor = 1;
        }
        var url = "UpdateAddress"; //方法

        var data = { addressID: addressID, name: name, province: city1, city: city2, district: city3, fullAddress: xdz, mobilePhone: phone1, telePhhone: phone2, isDefault: mor }; //传输
        $.ajax({
            url: url, //数据
            data: data, //数据
            type: "POST", //传输方式
            dataType: "json", //数据类型
            success: function (data) {//传输成功
                if (data.State) {
                    alert(data.Message);
                    //$("#update_x,.hei").hide();
                    window.top.location.reload();

                }

            },
            error: function (e) {//传输失败
                debugger;
                alert("资料填写不完善！");
            }
        })
        return 1;

    });

    $("a[name=setAddress]").click(function () {
        var obj = $(this).parent().parent().parent();
        var id = $(obj).attr("id");
        alert(id);

    });

    //删除地址
    $(".delAddress").click(function () {
        var obj = $(this).parent().parent().parent();
        var id = $(obj).attr("id");
        var url = "DelCustomerAddress"; //方法

        var data = { customerAddressID: id }; //传输
        $.ajax({
            url: url, //数据
            data: data, //数据
            type: "POST", //传输方式
            dataType: "json", //数据类型
            success: function (data) {//传输成功
                debugger;
                alert("删除成功");
                obj.remove();
            },
            error: function (e) {//传输失败
                debugger;
                alert("删除失败！");
            }
        });
    });

    $("a[name=updateAddress]").click(function () {

        var obj = $(this).parent().parent().parent();
        var id = $(obj).attr("id");
        var url = "GetAddressInfo";
        var data = { addressID: id };
        $.ajax({
            url: url, //数据
            data: data, //数据
            type: "GET", //传输方式
            dataType: "json", //数据类型
            success: function (data) {//传输成功
                debugger;
                $("#addressid").val(data.CustomerAddressID);
                $("#b_dzx_01").val(data.Name);
                $("#b_dzx_03").val(data.FullAddress);
                $("#b_dzx_04_01").val(data.MobilePhone);
                $("#b_dzx_04_02").val(data.TelePhone);
                if (data.IsDefault == "1") {
                    $("#b_dzx_05").attr("checked", true);
                }
                else {
                    $("#b_dzx_05").attr("checked", false);
                }
                var province = data.Province;
                var city = data.City;
                var district = data.District;
                var provinceData = getCityData("");
                var cityData = getCityData(province)
                var districtData = getCityData(city);
                $("#address").children().remove();
                //bindProvince
                if (provinceData.length > 0) {
                    var str = "<select id='selProvince_update' name='selProvince_update' onchange='bindDate(this)'>";
                    for (var i = 0; i < provinceData.length; i++) {
                        str += "<option value='" + provinceData[i].Value + "'>" + provinceData[i].Text + "</option>";
                    }
                    str += "</select>";
                    // $("#address").nextAll().remove();
                    $("#address").append(str);
                    //$("#address").after(str);
                }
                $("#selProvince_update").val(province);

                if (cityData.length > 0) {
                    var str = "<select id='selCity_update' name='selCity_update' onchange='bindDate(this)'>";
                    for (var i = 0; i < cityData.length; i++) {
                        str += "<option value='" + cityData[i].Value + "'>" + cityData[i].Text + "</option>";
                    }
                    str += "</select>";
                    //$("#address").nextAll().remove();
                    $("#selProvince_update").after(str);
                }
                $("#selCity_update").val(city);


                if (districtData.length > 0) {
                    var str = "<select id='selDistrict_update' name='selDistrict_update'>";
                    for (var i = 0; i < districtData.length; i++) {
                        str += "<option value='" + districtData[i].Value + "'>" + districtData[i].Text + "</option>";
                    }
                    str += "</select>";
                    //$("#address").nextAll().remove();
                    $("#selCity_update").after(str);
                }
                $("#selDistrict_update").val(district);
                $("#update_x,.hei").show();

            },
            error: function (e) {//传输失败
                debugger;
                alert("系统错误！");
            }
        });

    });

    function getCityData(code) {
        var url = "GetDicAreaJson"; //方法
        var obj = { areaCode: code }; //传输
        var json;
        $.ajax({
            url: url, //数据
            data: obj, //数据
            async: false,
            type: "GET", //传输方式
            dataType: "json", //数据类型
            success: function (data) {//传输成功
                json = data;
            },
            error: function (e) {//传输失败
                debugger;
                alert("系统错误！");
            }
        });

        return json;
    }

    function bindDate(obj) {
        var code = $(obj).val();
        var id = $(obj).attr("id");
        var date = getCityData(code);
        var name;
        switch (id) {
            case 'selProvince_update':
                name = "selCity_update";
                break;
            case 'selCity_update':
                name = "selDistrict_update";
                break;
            default:
                break;
        }
        if (date.length > 0) {
            var str;
            if (name != "selDistrict_update") {
                str = "<select id='" + name + "' name='" + name + "' onchange='bindDate(this)'>";
            } else {
                str = "<select id='" + name + "' name='" + name + "'>";
            }
            for (var i = 0; i < date.length; i++) {
                str += "<option value='" + date[i].Value + "'>" + date[i].Text + "</option>";
            }
            str += "</select>";
            $(obj).nextAll().remove();
            $(obj).after(str);
        }
        
    }

</script>
<script type="text/javascript">
    $("#SelProvince").change(function () {
        debugger;
        var code = $("#SelProvince").val();
        var url = "GetDicAreaJson"; //方法
        var data = { areaCode: code }; //传输
        if (code != "") {
            $.ajax({
                url: url, //数据
                data: data, //数据
                type: "GET", //传输方式
                dataType: "json", //数据类型
                success: function (data) {//传输成功
                    debugger;
                    if (data.length > 0) {
                        var str = "<select id='selCity' name='selCity' onchange='city()'>";
                        for (var i = 0; i < data.length; i++) {
                            str += "<option value='" + data[i].Value + "'>" + data[i].Text + "</option>";
                        }
                        str += "</select>";
                        $("#SelProvince").nextAll().remove();
                        $("#SelProvince").after(str);
                    }

                },
                error: function (e) {//传输失败
                    debugger;
                    alert("系统错误！");
                }
            });
        }
        else {
            $("#SelProvince").nextAll().remove();
        }
    });

    function city() {
        var code = $("#selCity").val();
        var url = "GetDicAreaJson"; //方法
        var data = { areaCode: code }; //传输
        if (code != "") {
            $.ajax({
                url: url, //数据
                data: data, //数据
                type: "GET", //传输方式
                dataType: "json", //数据类型
                success: function (data) {//传输成功
                    debugger;
                    if (data.length > 0) {
                        var str = "<select id='selDistrict' name='selDistrict'>";
                        for (var i = 0; i < data.length; i++) {
                            str += "<option value='" + data[i].Value + "'>" + data[i].Text + "</option>";
                        }
                        str += "</select>";
                        $("#selCity").nextAll().remove();
                        $("#selCity").after(str);
                    }

                },
                error: function (e) {//传输失败
                    debugger;
                    alert("系统错误！");
                }
            });
        }
        else {
            $("#selCity").nextAll().remove();
        }
    }


</script>

                </div>
            </div>
        </div>
    </div>
    <!-- cart footer -->
    
<div class="cart_footer">
        <div class="Help_box">
            <div class="Help">
                <div class="d_lodo"><img src="../../Content/img/public/d_logo.png"></div>
                <div class="service">
                    <h1>客服热线</h1>
                    <h2>4008-535-855</h2>
                    <ul>
                        <li>周一至周五 9:00-17:30</li>
                        <li>客服邮箱：6688@soargift.com</li>
                    </ul>
                </div>
                <div class="service">
                    <h1>新手入门</h1>
                    <ul>
                        <li><a href="#">注册新用户</a></li>
                        <li><a href="#">网站订购流程</a></li>
                        <li><a href="#">款到快递城市及配送时间</a></li>
                    </ul>
                </div>
                <div class="service">
                    <h1>如何付款</h1>
                    <ul>
                        <li><a href="#">信用卡直接支付</a></li>
                        <li><a href="#">支付宝、快钱、财付通</a></li>
                        <li><a href="#">快递查询</a></li>
                    </ul>
                </div>
                <div class="service">
                    <h1>帮助中心</h1>
                    <ul>
                        <li><a href="#">常见热点问题</a></li>
                        <li><a href="#">联系我们</a></li>
                        <li><a href="#">投诉与建议</a></li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="Copyright">
            CopyRight © 1995-2013 深圳市前海硕极科技有限公司 版权所有 粤ICP备13074790号
        </div>
    </div>




<script type="text/javascript">
    $(".left_Menu ul a").click(function () {
        $(".left_Menu ul a").parent().siblings().find("a").removeClass("hover");
    });
</script>
</body></html>