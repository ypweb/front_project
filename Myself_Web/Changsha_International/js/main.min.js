(function(a,b){function h(a){var b=g[a]={},c,d;a=a.split(/\s+/);for(c=0,d=a.length;c<d;c++)b[a[c]]=!0;return b}function l(a,c,d){if(d===b&&a.nodeType===1){var e="data-"+c.replace(k,"-$1").toLowerCase();d=a.getAttribute(e);if(typeof d=="string"){try{d=d==="true"?!0:d==="false"?!1:d==="null"?null:f.isNumeric(d)?+d:j.test(d)?f.parseJSON(d):d}catch(g){}f.data(a,c,d)}else d=b}return d}function m(a){for(var b in a){if(b==="data"&&f.isEmptyObject(a[b]))continue;if(b!=="toJSON")return!1}return!0}function n(a,b,c){var d=b+"defer",e=b+"queue",g=b+"mark",h=f._data(a,d);h&&(c==="queue"||!f._data(a,e))&&(c==="mark"||!f._data(a,g))&&setTimeout(function(){!f._data(a,e)&&!f._data(a,g)&&(f.removeData(a,d,!0),h.fire())},0)}function J(){return!1}function K(){return!0}function S(a){return!a||!a.parentNode||a.parentNode.nodeType===11}function T(a,b,c){b=b||0;if(f.isFunction(b))return f.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c});if(b.nodeType)return f.grep(a,function(a,d){return a===b===c});if(typeof b=="string"){var d=f.grep(a,function(a){return a.nodeType===1});if(O.test(b))return f.filter(b,d,!c);b=f.filter(b,d)}return f.grep(a,function(a,d){return f.inArray(a,b)>=0===c})}function U(a){var b=V.split("|"),c=a.createDocumentFragment();if(c.createElement)while(b.length)c.createElement(b.pop());return c}function bi(a,b){return f.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function bj(a,b){if(b.nodeType!==1||!f.hasData(a))return;var c,d,e,g=f._data(a),h=f._data(b,g),i=g.events;if(i){delete h.handle,h.events={};

for(c in i)for(d=0,e=i[c].length;d<e;d++)f.event.add(b,c,i[c][d])}h.data&&(h.data=f.extend({},h.data))}function bk(a,b){var c;if(b.nodeType!==1)return;b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase(),c==="object"?b.outerHTML=a.outerHTML:c!=="input"||a.type!=="checkbox"&&a.type!=="radio"?c==="option"?b.selected=a.defaultSelected:c==="input"||c==="textarea"?b.defaultValue=a.defaultValue:c==="script"&&b.text!==a.text&&(b.text=a.text):(a.checked&&(b.defaultChecked=b.checked=a.checked),b.value!==a.value&&(b.value=a.value)),b.removeAttribute(f.expando),b.removeAttribute("_submit_attached"),b.removeAttribute("_change_attached")}function bl(a){return typeof a.getElementsByTagName!="undefined"?a.getElementsByTagName("*"):typeof a.querySelectorAll!="undefined"?a.querySelectorAll("*"):[]}function bm(a){if(a.type==="checkbox"||a.type==="radio")a.defaultChecked=a.checked}function bn(a){var b=(a.nodeName||"").toLowerCase();b==="input"?bm(a):b!=="script"&&typeof a.getElementsByTagName!="undefined"&&f.grep(a.getElementsByTagName("input"),bm)}function bo(a){var b=c.createElement("div");return bh.appendChild(b),b.innerHTML=a.outerHTML,b.firstChild}function bB(a,b,c){var d=b==="width"?a.offsetWidth:a.offsetHeight,e=b==="width"?1:0,g=4;if(d>0){if(c!=="border")for(;e<g;e+=2)c||(d-=parseFloat(f.css(a,"padding"+bx[e]))||0),c==="margin"?d+=parseFloat(f.css(a,c+bx[e]))||0:d-=parseFloat(f.css(a,"border"+bx[e]+"Width"))||0;return d+"px"}d=by(a,b);if(d<0||d==null)d=a.style[b];if(bt.test(d))return d;d=parseFloat(d)||0;if(c)for(;e<g;e+=2)d+=parseFloat(f.css(a,"padding"+bx[e]))||0,c!=="padding"&&(d+=parseFloat(f.css(a,"border"+bx[e]+"Width"))||0),c==="margin"&&(d+=parseFloat(f.css(a,c+bx[e]))||0);return d+"px"}function bY(a){return function(b,c){typeof b!="string"&&(c=b,b="*");if(f.isFunction(c)){var d=b.toLowerCase().split(bO),e=0,g=d.length,h,i,j;for(;e<g;e++)h=d[e],j=/^\+/.test(h),j&&(h=h.substr(1)||"*"),i=a[h]=a[h]||[],i[j?"unshift":"push"](c)}}}function bZ(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;var h=a[f],i=0,j=h?h.length:0,k=a===bS,l;for(;i<j&&(k||!l);i++)l=h[i](c,d,e),typeof l=="string"&&(!k||g[l]?l=b:(c.dataTypes.unshift(l),l=bZ(a,c,d,e,l,g)));return(k||!l)&&!g["*"]&&(l=bZ(a,c,d,e,"*",g)),l}function b$(a,c){var d,e,g=f.ajaxSettings.flatOptions||{};
for(d in c)c[d]!==b&&((g[d]?a:e||(e={}))[d]=c[d]);e&&f.extend(!0,a,e)}function b_(a,b,c,d){if(f.isArray(b))f.each(b,function(b,e){c||bD.test(a)?d(a,e):b_(a+"["+(typeof e=="object"?b:"")+"]",e,c,d)});else if(!c&&f.type(b)==="object")for(var e in b)b_(a+"["+e+"]",b[e],c,d);else d(a,b)}function ca(a,c,d){var e=a.contents,f=a.dataTypes,g=a.responseFields,h,i,j,k;for(i in g)i in d&&(c[g[i]]=d[i]);while(f[0]==="*")f.shift(),h===b&&(h=a.mimeType||c.getResponseHeader("content-type"));if(h)for(i in e)if(e[i]&&e[i].test(h)){f.unshift(i);break}if(f[0]in d)j=f[0];else{for(i in d){if(!f[0]||a.converters[i+" "+f[0]]){j=i;break}k||(k=i)}j=j||k}if(j)return j!==f[0]&&f.unshift(j),d[j]}function cb(a,c){a.dataFilter&&(c=a.dataFilter(c,a.dataType));var d=a.dataTypes,e={},g,h,i=d.length,j,k=d[0],l,m,n,o,p;for(g=1;g<i;g++){if(g===1)for(h in a.converters)typeof h=="string"&&(e[h.toLowerCase()]=a.converters[h]);l=k,k=d[g];if(k==="*")k=l;else if(l!=="*"&&l!==k){m=l+" "+k,n=e[m]||e["* "+k];if(!n){p=b;for(o in e){j=o.split(" ");if(j[0]===l||j[0]==="*"){p=e[j[1]+" "+k];if(p){o=e[o],o===!0?n=p:p===!0&&(n=o);break}}}}!n&&!p&&f.error("No conversion from "+m.replace(" "," to ")),n!==!0&&(c=n?n(c):p(o(c)))}}return c}function ch(){try{return new a.XMLHttpRequest}catch(b){}}function ci(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function cr(){return setTimeout(cs,0),cq=f.now()}function cs(){cq=b}function ct(a,b){var c={};

return f.each(cp.concat.apply([],cp.slice(0,b)),function(){c[this]=a}),c}function cu(a){if(!cj[a]){var b=c.body,d=f("<"+a+">").appendTo(b),e=d.css("display");d.remove();if(e==="none"||e===""){ck||(ck=c.createElement("iframe"),ck.frameBorder=ck.width=ck.height=0),b.appendChild(ck);if(!cl||!ck.createElement)cl=(ck.contentWindow||ck.contentDocument).document,cl.write((f.support.boxModel?"<!doctype html>":"")+"<html><body>"),cl.close();d=cl.createElement(a),cl.body.appendChild(d),e=f.css(d,"display"),b.removeChild(ck)}cj[a]=e}return cj[a]}function cy(a){return f.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1}var c=a.document,d=a.navigator,e=a.location,f=function(){function J(){if(e.isReady)return;try{c.documentElement.doScroll("left")}catch(a){setTimeout(J,1);return}e.ready()}var e=function(a,b){return new e.fn.init(a,b,h)},f=a.jQuery,g=a.$,h,i=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,j=/\S/,k=/^\s+/,l=/\s+$/,m=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,n=/^[\],:{}\s]*$/,o=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,p=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,q=/(?:^|:|,)(?:\s*\[)+/g,r=/(webkit)[ \/]([\w.]+)/,s=/(opera)(?:.*version)?[ \/]([\w.]+)/,t=/(msie) ([\w.]+)/,u=/(mozilla)(?:.*? rv:([\w.]+))?/,v=/-([a-z]|[0-9])/ig,w=/^-ms-/,x=function(a,b){return(b+"").toUpperCase()},y=d.userAgent,z,A,B,C=Object.prototype.toString,D=Object.prototype.hasOwnProperty,E=Array.prototype.push,F=Array.prototype.slice,G=String.prototype.trim,H=Array.prototype.indexOf,I={};

return e.fn=e.prototype={constructor:e,init:function(a,d,f){var g,h,j,k;if(!a)return this;if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if(a==="body"&&!d&&c.body)return this.context=c,this[0]=c.body,this.selector=a,this.length=1,this;if(typeof a=="string"){a.charAt(0)==="<"&&a.charAt(a.length-1)===">"&&a.length>=3?g=[null,a,null]:g=i.exec(a);if(g&&(g[1]||!d)){if(g[1])return d=d instanceof e?d[0]:d,k=d?d.ownerDocument||d:c,j=m.exec(a),j?e.isPlainObject(d)?(a=[c.createElement(j[1])],e.fn.attr.call(a,d,!0)):a=[k.createElement(j[1])]:(j=e.buildFragment([g[1]],[k]),a=(j.cacheable?e.clone(j.fragment):j.fragment).childNodes),e.merge(this,a);h=c.getElementById(g[2]);if(h&&h.parentNode){if(h.id!==g[2])return f.find(a);this.length=1,this[0]=h}return this.context=c,this.selector=a,this}return!d||d.jquery?(d||f).find(a):this.constructor(d).find(a)}return e.isFunction(a)?f.ready(a):(a.selector!==b&&(this.selector=a.selector,this.context=a.context),e.makeArray(a,this))},selector:"",jquery:"1.7.2",length:0,size:function(){return this.length},toArray:function(){return F.call(this,0)},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a,b,c){var d=this.constructor();return e.isArray(a)?E.apply(d,a):e.merge(d,a),d.prevObject=this,d.context=this.context,b==="find"?d.selector=this.selector+(this.selector?" ":"")+c:b&&(d.selector=this.selector+"."+b+"("+c+")"),d},each:function(a,b){return e.each(this,a,b)},ready:function(a){return e.bindReady(),A.add(a),this},eq:function(a){return a=+a,a===-1?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(F.apply(this,arguments),"slice",F.call(arguments).join(","))},map:function(a){return this.pushStack(e.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:E,sort:[].sort,splice:[].splice},e.fn.init.prototype=e.fn,e.extend=e.fn.extend=function(){var a,c,d,f,g,h,i=arguments[0]||{},j=1,k=arguments.length,l=!1;typeof i=="boolean"&&(l=i,i=arguments[1]||{},j=2),typeof i!="object"&&!e.isFunction(i)&&(i={}),k===j&&(i=this,--j);for(;j<k;j++)if((a=arguments[j])!=null)for(c in a){d=i[c],f=a[c];if(i===f)continue;l&&f&&(e.isPlainObject(f)||(g=e.isArray(f)))?(g?(g=!1,h=d&&e.isArray(d)?d:[]):h=d&&e.isPlainObject(d)?d:{},i[c]=e.extend(l,h,f)):f!==b&&(i[c]=f)}return i},e.extend({noConflict:function(b){return a.$===e&&(a.$=g),b&&a.jQuery===e&&(a.jQuery=f),e},isReady:!1,readyWait:1,holdReady:function(a){a?e.readyWait++:e.ready(!0)},ready:function(a){if(a===!0&&!--e.readyWait||a!==!0&&!e.isReady){if(!c.body)return setTimeout(e.ready,1);e.isReady=!0;if(a!==!0&&--e.readyWait>0)return;A.fireWith(c,[e]),e.fn.trigger&&e(c).trigger("ready").off("ready")}},bindReady:function(){if(A)return;A=e.Callbacks("once memory");if(c.readyState==="complete")return setTimeout(e.ready,1);if(c.addEventListener)c.addEventListener("DOMContentLoaded",B,!1),a.addEventListener("load",e.ready,!1);else if(c.attachEvent){c.attachEvent("onreadystatechange",B),a.attachEvent("onload",e.ready);var b=!1;try{b=a.frameElement==null}catch(d){}c.documentElement.doScroll&&b&&J()}},isFunction:function(a){return e.type(a)==="function"},isArray:Array.isArray||function(a){return e.type(a)==="array"},isWindow:function(a){return a!=null&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return a==null?String(a):I[C.call(a)]||"object"},isPlainObject:function(a){if(!a||e.type(a)!=="object"||a.nodeType||e.isWindow(a))return!1;try{if(a.constructor&&!D.call(a,"constructor")&&!D.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}var d;for(d in a);return d===b||D.call(a,d)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw new Error(a)},parseJSON:function(b){if(typeof b!="string"||!b)return null;b=e.trim(b);if(a.JSON&&a.JSON.parse)return a.JSON.parse(b);if(n.test(b.replace(o,"@").replace(p,"]").replace(q,"")))return(new Function("return "+b))();e.error("Invalid JSON: "+b)},parseXML:function(c){if(typeof c!="string"||!c)return null;var d,f;try{a.DOMParser?(f=new DOMParser,d=f.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(g){d=b}return(!d||!d.documentElement||d.getElementsByTagName("parsererror").length)&&e.error("Invalid XML: "+c),d},noop:function(){},globalEval:function(b){b&&j.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(w,"ms-").replace(v,x)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,d){var f,g=0,h=a.length,i=h===b||e.isFunction(a);if(d){if(i){for(f in a)if(c.apply(a[f],d)===!1)break}else for(;g<h;)if(c.apply(a[g++],d)===!1)break}else if(i){for(f in a)if(c.call(a[f],f,a[f])===!1)break}else for(;g<h;)if(c.call(a[g],g,a[g++])===!1)break;return a},trim:G?function(a){return a==null?"":G.call(a)}:function(a){return a==null?"":a.toString().replace(k,"").replace(l,"")},makeArray:function(a,b){var c=b||[];if(a!=null){var d=e.type(a);a.length==null||d==="string"||d==="function"||d==="regexp"||e.isWindow(a)?E.call(c,a):e.merge(c,a)}return c},inArray:function(a,b,c){var d;if(b){if(H)return H.call(b,a,c);d=b.length,c=c?c<0?Math.max(0,d+c):c:0;for(;c<d;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,c){var d=a.length,e=0;if(typeof c.length=="number")for(var f=c.length;e<f;e++)a[d++]=c[e];else while(c[e]!==b)a[d++]=c[e++];return a.length=d,a},grep:function(a,b,c){var d=[],e;c=!!c;for(var f=0,g=a.length;f<g;f++)e=!!b(a[f],f),c!==e&&d.push(a[f]);return d},map:function(a,c,d){var f,g,h=[],i=0,j=a.length,k=a instanceof e||j!==b&&typeof j=="number"&&(j>0&&a[0]&&a[j-1]||j===0||e.isArray(a));if(k)for(;i<j;i++)f=c(a[i],i,d),f!=null&&(h[h.length]=f);else for(g in a)f=c(a[g],g,d),f!=null&&(h[h.length]=f);return h.concat.apply([],h)},guid:1,proxy:function(a,c){if(typeof c=="string"){var d=a[c];c=a,a=d}if(!e.isFunction(a))return b;var f=F.call(arguments,2),g=function(){return a.apply(c,f.concat(F.call(arguments)))};

return g.guid=a.guid=a.guid||g.guid||e.guid++,g},access:function(a,c,d,f,g,h,i){var j,k=d==null,l=0,m=a.length;if(d&&typeof d=="object"){for(l in d)e.access(a,c,l,d[l],1,h,f);g=1}else if(f!==b){j=i===b&&e.isFunction(f),k&&(j?(j=c,c=function(a,b,c){return j.call(e(a),c)}):(c.call(a,f),c=null));if(c)for(;l<m;l++)c(a[l],d,j?f.call(a[l],l,c(a[l],d)):f,i);g=1}return g?a:k?c.call(a):m?c(a[0],d):h},now:function(){return(new Date).getTime()},uaMatch:function(a){a=a.toLowerCase();var b=r.exec(a)||s.exec(a)||t.exec(a)||a.indexOf("compatible")<0&&u.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},sub:function(){function a(b,c){return new a.fn.init(b,c)}e.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function(d,f){return f&&f instanceof e&&!(f instanceof a)&&(f=a(f)),e.fn.init.call(this,d,f,b)},a.fn.init.prototype=a.fn;var b=a(c);return a},browser:{}}),e.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){I["[object "+b+"]"]=b.toLowerCase()}),z=e.uaMatch(y),z.browser&&(e.browser[z.browser]=!0,e.browser.version=z.version),e.browser.webkit&&(e.browser.safari=!0),j.test("Â ")&&(k=/^[\s\xA0]+/,l=/[\s\xA0]+$/),h=e(c),c.addEventListener?B=function(){c.removeEventListener("DOMContentLoaded",B,!1),e.ready()}:c.attachEvent&&(B=function(){c.readyState==="complete"&&(c.detachEvent("onreadystatechange",B),e.ready())}),e}(),g={};

f.Callbacks=function(a){a=a?g[a]||h(a):{};
var c=[],d=[],e,i,j,k,l,m,n=function(b){var d,e,g,h,i;for(d=0,e=b.length;d<e;d++)g=b[d],h=f.type(g),h==="array"?n(g):h==="function"&&(!a.unique||!p.has(g))&&c.push(g)},o=function(b,f){f=f||[],e=!a.memory||[b,f],i=!0,j=!0,m=k||0,k=0,l=c.length;for(;c&&m<l;m++)if(c[m].apply(b,f)===!1&&a.stopOnFalse){e=!0;break}j=!1,c&&(a.once?e===!0?p.disable():c=[]:d&&d.length&&(e=d.shift(),p.fireWith(e[0],e[1])))},p={add:function(){if(c){var a=c.length;n(arguments),j?l=c.length:e&&e!==!0&&(k=a,o(e[0],e[1]))}return this},remove:function(){if(c){var b=arguments,d=0,e=b.length;for(;d<e;d++)for(var f=0;f<c.length;f++)if(b[d]===c[f]){j&&f<=l&&(l--,f<=m&&m--),c.splice(f--,1);if(a.unique)break}}return this},has:function(a){if(c){var b=0,d=c.length;for(;b<d;b++)if(a===c[b])return!0}return!1},empty:function(){return c=[],this},disable:function(){return c=d=e=b,this},disabled:function(){return!c},lock:function(){return d=b,(!e||e===!0)&&p.disable(),this},locked:function(){return!d},fireWith:function(b,c){return d&&(j?a.once||d.push([b,c]):(!a.once||!e)&&o(b,c)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!i}};return p};

var i=[].slice;f.extend({Deferred:function(a){var b=f.Callbacks("once memory"),c=f.Callbacks("once memory"),d=f.Callbacks("memory"),e="pending",g={resolve:b,reject:c,notify:d},h={done:b.add,fail:c.add,progress:d.add,state:function(){return e},isResolved:b.fired,isRejected:c.fired,then:function(a,b,c){return i.done(a).fail(b).progress(c),this},always:function(){return i.done.apply(i,arguments).fail.apply(i,arguments),this},pipe:function(a,b,c){return f.Deferred(function(d){f.each({done:[a,"resolve"],fail:[b,"reject"],progress:[c,"notify"]},function(a,b){var c=b[0],e=b[1],g;f.isFunction(c)?i[a](function(){g=c.apply(this,arguments),g&&f.isFunction(g.promise)?g.promise().then(d.resolve,d.reject,d.notify):d[e+"With"](this===i?d:this,[g])}):i[a](d[e])})}).promise()},promise:function(a){if(a==null)a=h;else for(var b in h)a[b]=h[b];return a}},i=h.promise({}),j;for(j in g)i[j]=g[j].fire,i[j+"With"]=g[j].fireWith;return i.done(function(){e="resolved"},c.disable,d.lock).fail(function(){e="rejected"},b.disable,d.lock),a&&a.call(i,i),i},when:function(a){function l(a){return function(c){b[a]=arguments.length>1?i.call(arguments,0):c,--g||j.resolveWith(j,b)}}function m(a){return function(b){e[a]=arguments.length>1?i.call(arguments,0):b,j.notifyWith(k,e)}}var b=i.call(arguments,0),c=0,d=b.length,e=new Array(d),g=d,h=d,j=d<=1&&a&&f.isFunction(a.promise)?a:f.Deferred(),k=j.promise();if(d>1){for(;c<d;c++)b[c]&&b[c].promise&&f.isFunction(b[c].promise)?b[c].promise().then(l(c),j.reject,m(c)):--g;g||j.resolveWith(j,b)}else j!==a&&j.resolveWith(j,d?[a]:[]);return k}}),f.support=function(){var b,d,e,g,h,i,j,k,l,m,n,o,p=c.createElement("div"),q=c.documentElement;p.setAttribute("className","t"),p.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",d=p.getElementsByTagName("*"),e=p.getElementsByTagName("a")[0];if(!d||!d.length||!e)return{};

g=c.createElement("select"),h=g.appendChild(c.createElement("option")),i=p.getElementsByTagName("input")[0],b={leadingWhitespace:p.firstChild.nodeType===3,tbody:!p.getElementsByTagName("tbody").length,htmlSerialize:!!p.getElementsByTagName("link").length,style:/top/.test(e.getAttribute("style")),hrefNormalized:e.getAttribute("href")==="/a",opacity:/^0.55/.test(e.style.opacity),cssFloat:!!e.style.cssFloat,checkOn:i.value==="on",optSelected:h.selected,getSetAttribute:p.className!=="t",enctype:!!c.createElement("form").enctype,html5Clone:c.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,pixelMargin:!0},f.boxModel=b.boxModel=c.compatMode==="CSS1Compat",i.checked=!0,b.noCloneChecked=i.cloneNode(!0).checked,g.disabled=!0,b.optDisabled=!h.disabled;try{delete p.test}catch(r){b.deleteExpando=!1}!p.addEventListener&&p.attachEvent&&p.fireEvent&&(p.attachEvent("onclick",function(){b.noCloneEvent=!1}),p.cloneNode(!0).fireEvent("onclick")),i=c.createElement("input"),i.value="t",i.setAttribute("type","radio"),b.radioValue=i.value==="t",i.setAttribute("checked","checked"),i.setAttribute("name","t"),p.appendChild(i),j=c.createDocumentFragment(),j.appendChild(p.lastChild),b.checkClone=j.cloneNode(!0).cloneNode(!0).lastChild.checked,b.appendChecked=i.checked,j.removeChild(i),j.appendChild(p);if(p.attachEvent)for(n in{submit:1,change:1,focusin:1})m="on"+n,o=m in p,o||(p.setAttribute(m,"return;"),o=typeof p[m]=="function"),b[n+"Bubbles"]=o;return j.removeChild(p),j=g=h=p=i=null,f(function(){var d,e,g,h,i,j,l,m,n,q,r,s,t,u=c.getElementsByTagName("body")[0];if(!u)return;m=1,t="padding:0;margin:0;border:",r="position:absolute;top:0;left:0;width:1px;height:1px;",s=t+"0;visibility:hidden;",n="style='"+r+t+"5px solid #000;",q="<div "+n+"display:block;'><div style='"+t+"0;display:block;overflow:hidden;'></div></div>"+"<table "+n+"' cellpadding='0' cellspacing='0'>"+"<tr><td></td></tr></table>",d=c.createElement("div"),d.style.cssText=s+"width:0;height:0;position:static;top:0;margin-top:"+m+"px",u.insertBefore(d,u.firstChild),p=c.createElement("div"),d.appendChild(p),p.innerHTML="<table><tr><td style='"+t+"0;display:none'></td><td>t</td></tr></table>",k=p.getElementsByTagName("td"),o=k[0].offsetHeight===0,k[0].style.display="",k[1].style.display="none",b.reliableHiddenOffsets=o&&k[0].offsetHeight===0,a.getComputedStyle&&(p.innerHTML="",l=c.createElement("div"),l.style.width="0",l.style.marginRight="0",p.style.width="2px",p.appendChild(l),b.reliableMarginRight=(parseInt((a.getComputedStyle(l,null)||{marginRight:0}).marginRight,10)||0)===0),typeof p.style.zoom!="undefined"&&(p.innerHTML="",p.style.width=p.style.padding="1px",p.style.border=0,p.style.overflow="hidden",p.style.display="inline",p.style.zoom=1,b.inlineBlockNeedsLayout=p.offsetWidth===3,p.style.display="block",p.style.overflow="visible",p.innerHTML="<div style='width:5px;'></div>",b.shrinkWrapBlocks=p.offsetWidth!==3),p.style.cssText=r+s,p.innerHTML=q,e=p.firstChild,g=e.firstChild,i=e.nextSibling.firstChild.firstChild,j={doesNotAddBorder:g.offsetTop!==5,doesAddBorderForTableAndCells:i.offsetTop===5},g.style.position="fixed",g.style.top="20px",j.fixedPosition=g.offsetTop===20||g.offsetTop===15,g.style.position=g.style.top="",e.style.overflow="hidden",e.style.position="relative",j.subtractsBorderForOverflowNotVisible=g.offsetTop===-5,j.doesNotIncludeMarginInBodyOffset=u.offsetTop!==m,a.getComputedStyle&&(p.style.marginTop="1%",b.pixelMargin=(a.getComputedStyle(p,null)||{marginTop:0}).marginTop!=="1%"),typeof d.style.zoom!="undefined"&&(d.style.zoom=1),u.removeChild(d),l=p=d=null,f.extend(b,j)}),b}();var j=/^(?:\{.*\}|\[.*\])$/,k=/([A-Z])/g;f.extend({cache:{},uuid:0,expando:"jQuery"+(f.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){return a=a.nodeType?f.cache[a[f.expando]]:a[f.expando],!!a&&!m(a)},data:function(a,c,d,e){if(!f.acceptData(a))return;var g,h,i,j=f.expando,k=typeof c=="string",l=a.nodeType,m=l?f.cache:a,n=l?a[j]:a[j]&&j,o=c==="events";if((!n||!m[n]||!o&&!e&&!m[n].data)&&k&&d===b)return;n||(l?a[j]=n=++f.uuid:n=j),m[n]||(m[n]={},l||(m[n].toJSON=f.noop));if(typeof c=="object"||typeof c=="function")e?m[n]=f.extend(m[n],c):m[n].data=f.extend(m[n].data,c);return g=h=m[n],e||(h.data||(h.data={}),h=h.data),d!==b&&(h[f.camelCase(c)]=d),o&&!h[c]?g.events:(k?(i=h[c],i==null&&(i=h[f.camelCase(c)])):i=h,i)},removeData:function(a,b,c){if(!f.acceptData(a))return;var d,e,g,h=f.expando,i=a.nodeType,j=i?f.cache:a,k=i?a[h]:h;if(!j[k])return;if(b){d=c?j[k]:j[k].data;if(d){f.isArray(b)||(b in d?b=[b]:(b=f.camelCase(b),b in d?b=[b]:b=b.split(" ")));for(e=0,g=b.length;e<g;e++)delete d[b[e]];if(!(c?m:f.isEmptyObject)(d))return}}if(!c){delete j[k].data;if(!m(j[k]))return}f.support.deleteExpando||!j.setInterval?delete j[k]:j[k]=null,i&&(f.support.deleteExpando?delete a[h]:a.removeAttribute?a.removeAttribute(h):a[h]=null)},_data:function(a,b,c){return f.data(a,b,c,!0)},acceptData:function(a){if(a.nodeName){var b=f.noData[a.nodeName.toLowerCase()];if(b)return b!==!0&&a.getAttribute("classid")===b}return!0}}),f.fn.extend({data:function(a,c){var d,e,g,h,i,j=this[0],k=0,m=null;if(a===b){if(this.length){m=f.data(j);if(j.nodeType===1&&!f._data(j,"parsedAttrs")){g=j.attributes;for(i=g.length;k<i;k++)h=g[k].name,h.indexOf("data-")===0&&(h=f.camelCase(h.substring(5)),l(j,h,m[h]));f._data(j,"parsedAttrs",!0)}}return m}return typeof a=="object"?this.each(function(){f.data(this,a)}):(d=a.split(".",2),d[1]=d[1]?"."+d[1]:"",e=d[1]+"!",f.access(this,function(c){if(c===b)return m=this.triggerHandler("getData"+e,[d[0]]),m===b&&j&&(m=f.data(j,a),m=l(j,a,m)),m===b&&d[1]?this.data(d[0]):m;d[1]=c,this.each(function(){var b=f(this);b.triggerHandler("setData"+e,d),f.data(this,a,c),b.triggerHandler("changeData"+e,d)})},null,c,arguments.length>1,null,!1))},removeData:function(a){return this.each(function(){f.removeData(this,a)})}}),f.extend({_mark:function(a,b){a&&(b=(b||"fx")+"mark",f._data(a,b,(f._data(a,b)||0)+1))},_unmark:function(a,b,c){a!==!0&&(c=b,b=a,a=!1);if(b){c=c||"fx";var d=c+"mark",e=a?0:(f._data(b,d)||1)-1;e?f._data(b,d,e):(f.removeData(b,d,!0),n(b,c,"mark"))}},queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=f._data(a,b),c&&(!d||f.isArray(c)?d=f._data(a,b,f.makeArray(c)):d.push(c)),d||[]},dequeue:function(a,b){b=b||"fx";var c=f.queue(a,b),d=c.shift(),e={};

d==="inprogress"&&(d=c.shift()),d&&(b==="fx"&&c.unshift("inprogress"),f._data(a,b+".run",e),d.call(a,function(){f.dequeue(a,b)},e)),c.length||(f.removeData(a,b+"queue "+b+".run",!0),n(a,b,"queue"))}}),f.fn.extend({queue:function(a,c){var d=2;return typeof a!="string"&&(c=a,a="fx",d--),arguments.length<d?f.queue(this[0],a):c===b?this:this.each(function(){var b=f.queue(this,a,c);a==="fx"&&b[0]!=="inprogress"&&f.dequeue(this,a)})},dequeue:function(a){return this.each(function(){f.dequeue(this,a)})},delay:function(a,b){return a=f.fx?f.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){function m(){--h||d.resolveWith(e,[e])}typeof a!="string"&&(c=a,a=b),a=a||"fx";var d=f.Deferred(),e=this,g=e.length,h=1,i=a+"defer",j=a+"queue",k=a+"mark",l;while(g--)if(l=f.data(e[g],i,b,!0)||(f.data(e[g],j,b,!0)||f.data(e[g],k,b,!0))&&f.data(e[g],i,f.Callbacks("once memory"),!0))h++,l.add(m);return m(),d.promise(c)}});var o=/[\n\t\r]/g,p=/\s+/,q=/\r/g,r=/^(?:button|input)$/i,s=/^(?:button|input|object|select|textarea)$/i,t=/^a(?:rea)?$/i,u=/^(?:autofocus|autoplay|async|checked|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,v=f.support.getSetAttribute,w,x,y;f.fn.extend({attr:function(a,b){return f.access(this,f.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){f.removeAttr(this,a)})},prop:function(a,b){return f.access(this,f.prop,a,b,arguments.length>1)},removeProp:function(a){return a=f.propFix[a]||a,this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,g,h,i;if(f.isFunction(a))return this.each(function(b){f(this).addClass(a.call(this,b,this.className))});if(a&&typeof a=="string"){b=a.split(p);for(c=0,d=this.length;c<d;c++){e=this[c];if(e.nodeType===1)if(!e.className&&b.length===1)e.className=a;else{g=" "+e.className+" ";for(h=0,i=b.length;h<i;h++)~g.indexOf(" "+b[h]+" ")||(g+=b[h]+" ");e.className=f.trim(g)}}}return this},removeClass:function(a){var c,d,e,g,h,i,j;if(f.isFunction(a))return this.each(function(b){f(this).removeClass(a.call(this,b,this.className))});if(a&&typeof a=="string"||a===b){c=(a||"").split(p);for(d=0,e=this.length;d<e;d++){g=this[d];if(g.nodeType===1&&g.className)if(a){h=(" "+g.className+" ").replace(o," ");for(i=0,j=c.length;i<j;i++)h=h.replace(" "+c[i]+" "," ");g.className=f.trim(h)}else g.className=""}}return this},toggleClass:function(a,b){var c=typeof a,d=typeof b=="boolean";return f.isFunction(a)?this.each(function(c){f(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if(c==="string"){var e,g=0,h=f(this),i=b,j=a.split(p);while(e=j[g++])i=d?i:!h.hasClass(e),h[i?"addClass":"removeClass"](e)}else if(c==="undefined"||c==="boolean")this.className&&f._data(this,"__className__",this.className),this.className=this.className||a===!1?"":f._data(this,"__className__")||""})},hasClass:function(a){var b=" "+a+" ",c=0,d=this.length;for(;c<d;c++)if(this[c].nodeType===1&&(" "+this[c].className+" ").replace(o," ").indexOf(b)>-1)return!0;return!1},val:function(a){var c,d,e,g=this[0];if(!arguments.length){if(g)return c=f.valHooks[g.type]||f.valHooks[g.nodeName.toLowerCase()],c&&"get"in c&&(d=c.get(g,"value"))!==b?d:(d=g.value,typeof d=="string"?d.replace(q,""):d==null?"":d);return}return e=f.isFunction(a),this.each(function(d){var g=f(this),h;if(this.nodeType!==1)return;e?h=a.call(this,d,g.val()):h=a,h==null?h="":typeof h=="number"?h+="":f.isArray(h)&&(h=f.map(h,function(a){return a==null?"":a+""})),c=f.valHooks[this.type]||f.valHooks[this.nodeName.toLowerCase()];if(!c||!("set"in c)||c.set(this,h,"value")===b)this.value=h})}}),f.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,d,e,g=a.selectedIndex,h=[],i=a.options,j=a.type==="select-one";if(g<0)return null;c=j?g:0,d=j?g+1:i.length;for(;c<d;c++){e=i[c];if(e.selected&&(f.support.optDisabled?!e.disabled:e.getAttribute("disabled")===null)&&(!e.parentNode.disabled||!f.nodeName(e.parentNode,"optgroup"))){b=f(e).val();if(j)return b;h.push(b)}}return j&&!h.length&&i.length?f(i[g]).val():h},set:function(a,b){var c=f.makeArray(b);return f(a).find("option").each(function(){this.selected=f.inArray(f(this).val(),c)>=0}),c.length||(a.selectedIndex=-1),c}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(a,c,d,e){var g,h,i,j=a.nodeType;if(!a||j===3||j===8||j===2)return;if(e&&c in f.attrFn)return f(a)[c](d);if(typeof a.getAttribute=="undefined")return f.prop(a,c,d);i=j!==1||!f.isXMLDoc(a),i&&(c=c.toLowerCase(),h=f.attrHooks[c]||(u.test(c)?x:w));if(d!==b){if(d===null){f.removeAttr(a,c);return}return h&&"set"in h&&i&&(g=h.set(a,d,c))!==b?g:(a.setAttribute(c,""+d),d)}return h&&"get"in h&&i&&(g=h.get(a,c))!==null?g:(g=a.getAttribute(c),g===null?b:g)},removeAttr:function(a,b){var c,d,e,g,h,i=0;if(b&&a.nodeType===1){d=b.toLowerCase().split(p),g=d.length;for(;i<g;i++)e=d[i],e&&(c=f.propFix[e]||e,h=u.test(e),h||f.attr(a,e,""),a.removeAttribute(v?e:c),h&&c in a&&(a[c]=!1))}},attrHooks:{type:{set:function(a,b){if(r.test(a.nodeName)&&a.parentNode)f.error("type property can't be changed");else if(!f.support.radioValue&&b==="radio"&&f.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}},value:{get:function(a,b){return w&&f.nodeName(a,"button")?w.get(a,b):b in a?a.value:null},set:function(a,b,c){if(w&&f.nodeName(a,"button"))return w.set(a,b,c);a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,g,h,i=a.nodeType;if(!a||i===3||i===8||i===2)return;return h=i!==1||!f.isXMLDoc(a),h&&(c=f.propFix[c]||c,g=f.propHooks[c]),d!==b?g&&"set"in g&&(e=g.set(a,d,c))!==b?e:a[c]=d:g&&"get"in g&&(e=g.get(a,c))!==null?e:a[c]},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):s.test(a.nodeName)||t.test(a.nodeName)&&a.href?0:b}}}}),f.attrHooks.tabindex=f.propHooks.tabIndex,x={get:function(a,c){var d,e=f.prop(a,c);return e===!0||typeof e!="boolean"&&(d=a.getAttributeNode(c))&&d.nodeValue!==!1?c.toLowerCase():b},set:function(a,b,c){var d;return b===!1?f.removeAttr(a,c):(d=f.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase())),c}},v||(y={name:!0,id:!0,coords:!0},w=f.valHooks.button={get:function(a,c){var d;return d=a.getAttributeNode(c),d&&(y[c]?d.nodeValue!=="":d.specified)?d.nodeValue:b},set:function(a,b,d){var e=a.getAttributeNode(d);return e||(e=c.createAttribute(d),a.setAttributeNode(e)),e.nodeValue=b+""}},f.attrHooks.tabindex.set=w.set,f.each(["width","height"],function(a,b){f.attrHooks[b]=f.extend(f.attrHooks[b],{set:function(a,c){if(c==="")return a.setAttribute(b,"auto"),c}})}),f.attrHooks.contenteditable={get:w.get,set:function(a,b,c){b===""&&(b="false"),w.set(a,b,c)}}),f.support.hrefNormalized||f.each(["href","src","width","height"],function(a,c){f.attrHooks[c]=f.extend(f.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return d===null?b:d}})}),f.support.style||(f.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=""+b}}),f.support.optSelected||(f.propHooks.selected=f.extend(f.propHooks.selected,{get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}})),f.support.enctype||(f.propFix.enctype="encoding"),f.support.checkOn||f.each(["radio","checkbox"],function(){f.valHooks[this]={get:function(a){return a.getAttribute("value")===null?"on":a.value}}}),f.each(["radio","checkbox"],function(){f.valHooks[this]=f.extend(f.valHooks[this],{set:function(a,b){if(f.isArray(b))return a.checked=f.inArray(f(a).val(),b)>=0}})});var z=/^(?:textarea|input|select)$/i,A=/^([^\.]*)?(?:\.(.+))?$/,B=/(?:^|\s)hover(\.\S+)?\b/,C=/^key/,D=/^(?:mouse|contextmenu)|click/,E=/^(?:focusinfocus|focusoutblur)$/,F=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,G=function(a){var b=F.exec(a);return b&&(b[1]=(b[1]||"").toLowerCase(),b[3]=b[3]&&new RegExp("(?:^|\\s)"+b[3]+"(?:\\s|$)")),b},H=function(a,b){var c=a.attributes||{};

return(!b[1]||a.nodeName.toLowerCase()===b[1])&&(!b[2]||(c.id||{}).value===b[2])&&(!b[3]||b[3].test((c["class"]||{}).value))},I=function(a){return f.event.special.hover?a:a.replace(B,"mouseenter$1 mouseleave$1")};

f.event={add:function(a,c,d,e,g){var h,i,j,k,l,m,n,o,p,q,r,s;if(a.nodeType===3||a.nodeType===8||!c||!d||!(h=f._data(a)))return;d.handler&&(p=d,d=p.handler,g=p.selector),d.guid||(d.guid=f.guid++),j=h.events,j||(h.events=j={}),i=h.handle,i||(h.handle=i=function(a){return typeof f=="undefined"||!!a&&f.event.triggered===a.type?b:f.event.dispatch.apply(i.elem,arguments)},i.elem=a),c=f.trim(I(c)).split(" ");for(k=0;k<c.length;k++){l=A.exec(c[k])||[],m=l[1],n=(l[2]||"").split(".").sort(),s=f.event.special[m]||{},m=(g?s.delegateType:s.bindType)||m,s=f.event.special[m]||{},o=f.extend({type:m,origType:l[1],data:e,handler:d,guid:d.guid,selector:g,quick:g&&G(g),namespace:n.join(".")},p),r=j[m];if(!r){r=j[m]=[],r.delegateCount=0;if(!s.setup||s.setup.call(a,e,n,i)===!1)a.addEventListener?a.addEventListener(m,i,!1):a.attachEvent&&a.attachEvent("on"+m,i)}s.add&&(s.add.call(a,o),o.handler.guid||(o.handler.guid=d.guid)),g?r.splice(r.delegateCount++,0,o):r.push(o),f.event.global[m]=!0}a=null},global:{},remove:function(a,b,c,d,e){var g=f.hasData(a)&&f._data(a),h,i,j,k,l,m,n,o,p,q,r,s;if(!g||!(o=g.events))return;b=f.trim(I(b||"")).split(" ");for(h=0;h<b.length;h++){i=A.exec(b[h])||[],j=k=i[1],l=i[2];if(!j){for(j in o)f.event.remove(a,j+b[h],c,d,!0);continue}p=f.event.special[j]||{},j=(d?p.delegateType:p.bindType)||j,r=o[j]||[],m=r.length,l=l?new RegExp("(^|\\.)"+l.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(n=0;n<r.length;n++)s=r[n],(e||k===s.origType)&&(!c||c.guid===s.guid)&&(!l||l.test(s.namespace))&&(!d||d===s.selector||d==="**"&&s.selector)&&(r.splice(n--,1),s.selector&&r.delegateCount--,p.remove&&p.remove.call(a,s));r.length===0&&m!==r.length&&((!p.teardown||p.teardown.call(a,l)===!1)&&f.removeEvent(a,j,g.handle),delete o[j])}f.isEmptyObject(o)&&(q=g.handle,q&&(q.elem=null),f.removeData(a,["events","handle"],!0))},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,e,g){if(!e||e.nodeType!==3&&e.nodeType!==8){var h=c.type||c,i=[],j,k,l,m,n,o,p,q,r,s;if(E.test(h+f.event.triggered))return;h.indexOf("!")>=0&&(h=h.slice(0,-1),k=!0),h.indexOf(".")>=0&&(i=h.split("."),h=i.shift(),i.sort());if((!e||f.event.customEvent[h])&&!f.event.global[h])return;c=typeof c=="object"?c[f.expando]?c:new f.Event(h,c):new f.Event(h),c.type=h,c.isTrigger=!0,c.exclusive=k,c.namespace=i.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+i.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,o=h.indexOf(":")<0?"on"+h:"";if(!e){j=f.cache;for(l in j)j[l].events&&j[l].events[h]&&f.event.trigger(c,d,j[l].handle.elem,!0);return}c.result=b,c.target||(c.target=e),d=d!=null?f.makeArray(d):[],d.unshift(c),p=f.event.special[h]||{};

if(p.trigger&&p.trigger.apply(e,d)===!1)return;r=[[e,p.bindType||h]];if(!g&&!p.noBubble&&!f.isWindow(e)){s=p.delegateType||h,m=E.test(s+h)?e:e.parentNode,n=null;for(;m;m=m.parentNode)r.push([m,s]),n=m;n&&n===e.ownerDocument&&r.push([n.defaultView||n.parentWindow||a,s])}for(l=0;l<r.length&&!c.isPropagationStopped();l++)m=r[l][0],c.type=r[l][1],q=(f._data(m,"events")||{})[c.type]&&f._data(m,"handle"),q&&q.apply(m,d),q=o&&m[o],q&&f.acceptData(m)&&q.apply(m,d)===!1&&c.preventDefault();return c.type=h,!g&&!c.isDefaultPrevented()&&(!p._default||p._default.apply(e.ownerDocument,d)===!1)&&(h!=="click"||!f.nodeName(e,"a"))&&f.acceptData(e)&&o&&e[h]&&(h!=="focus"&&h!=="blur"||c.target.offsetWidth!==0)&&!f.isWindow(e)&&(n=e[o],n&&(e[o]=null),f.event.triggered=h,e[h](),f.event.triggered=b,n&&(e[o]=n)),c.result}return},dispatch:function(c){c=f.event.fix(c||a.event);var d=(f._data(this,"events")||{})[c.type]||[],e=d.delegateCount,g=[].slice.call(arguments,0),h=!c.exclusive&&!c.namespace,i=f.event.special[c.type]||{},j=[],k,l,m,n,o,p,q,r,s,t,u;g[0]=c,c.delegateTarget=this;if(i.preDispatch&&i.preDispatch.call(this,c)===!1)return;if(e&&(!c.button||c.type!=="click")){n=f(this),n.context=this.ownerDocument||this;for(m=c.target;m!=this;m=m.parentNode||this)if(m.disabled!==!0){p={},r=[],n[0]=m;for(k=0;k<e;k++)s=d[k],t=s.selector,p[t]===b&&(p[t]=s.quick?H(m,s.quick):n.is(t)),p[t]&&r.push(s);r.length&&j.push({elem:m,matches:r})}}d.length>e&&j.push({elem:this,matches:d.slice(e)});for(k=0;k<j.length&&!c.isPropagationStopped();k++){q=j[k],c.currentTarget=q.elem;for(l=0;l<q.matches.length&&!c.isImmediatePropagationStopped();l++){s=q.matches[l];if(h||!c.namespace&&!s.namespace||c.namespace_re&&c.namespace_re.test(s.namespace))c.data=s.data,c.handleObj=s,o=((f.event.special[s.origType]||{}).handle||s.handler).apply(q.elem,g),o!==b&&(c.result=o,o===!1&&(c.preventDefault(),c.stopPropagation()))}}return i.postDispatch&&i.postDispatch.call(this,c),c.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return a.which==null&&(a.which=b.charCode!=null?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,d){var e,f,g,h=d.button,i=d.fromElement;return a.pageX==null&&d.clientX!=null&&(e=a.target.ownerDocument||c,f=e.documentElement,g=e.body,a.pageX=d.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0),a.pageY=d.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0)),!a.relatedTarget&&i&&(a.relatedTarget=i===a.target?d.toElement:i),!a.which&&h!==b&&(a.which=h&1?1:h&2?3:h&4?2:0),a}},fix:function(a){if(a[f.expando])return a;var d,e,g=a,h=f.event.fixHooks[a.type]||{},i=h.props?this.props.concat(h.props):this.props;a=f.Event(g);for(d=i.length;d;)e=i[--d],a[e]=g[e];return a.target||(a.target=g.srcElement||c),a.target.nodeType===3&&(a.target=a.target.parentNode),a.metaKey===b&&(a.metaKey=a.ctrlKey),h.filter?h.filter(a,g):a},special:{ready:{setup:f.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){f.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){var e=f.extend(new f.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?f.event.trigger(e,null,b):f.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},f.event.handle=f.event.dispatch,f.removeEvent=c.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)},f.Event=function(a,b){if(this instanceof f.Event)a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?K:J):this.type=a,b&&f.extend(this,b),this.timeStamp=a&&a.timeStamp||f.now(),this[f.expando]=!0;else return new f.Event(a,b)},f.Event.prototype={preventDefault:function(){this.isDefaultPrevented=K;var a=this.originalEvent;if(!a)return;a.preventDefault?a.preventDefault():a.returnValue=!1},stopPropagation:function(){this.isPropagationStopped=K;var a=this.originalEvent;if(!a)return;a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=K,this.stopPropagation()},isDefaultPrevented:J,isPropagationStopped:J,isImmediatePropagationStopped:J},f.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){f.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c=this,d=a.relatedTarget,e=a.handleObj,g=e.selector,h;if(!d||d!==c&&!f.contains(c,d))a.type=e.origType,h=e.handler.apply(this,arguments),a.type=b;return h}}}),f.support.submitBubbles||(f.event.special.submit={setup:function(){if(f.nodeName(this,"form"))return!1;f.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=f.nodeName(c,"input")||f.nodeName(c,"button")?c.form:b;d&&!d._submit_attached&&(f.event.add(d,"submit._submit",function(a){a._submit_bubble=!0}),d._submit_attached=!0)})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&f.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){if(f.nodeName(this,"form"))return!1;f.event.remove(this,"._submit")}}),f.support.changeBubbles||(f.event.special.change={setup:function(){if(z.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")f.event.add(this,"propertychange._change",function(a){a.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),f.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1,f.event.simulate("change",this,a,!0))});return!1}f.event.add(this,"beforeactivate._change",function(a){var b=a.target;z.test(b.nodeName)&&!b._change_attached&&(f.event.add(b,"change._change",function(a){this.parentNode&&!a.isSimulated&&!a.isTrigger&&f.event.simulate("change",this.parentNode,a,!0)}),b._change_attached=!0)})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||b.type!=="radio"&&b.type!=="checkbox")return a.handleObj.handler.apply(this,arguments)},teardown:function(){return f.event.remove(this,"._change"),z.test(this.nodeName)}}),f.support.focusinBubbles||f.each({focus:"focusin",blur:"focusout"},function(a,b){var d=0,e=function(a){f.event.simulate(b,a.target,f.event.fix(a),!0)};

f.event.special[b]={setup:function(){d++===0&&c.addEventListener(a,e,!0)},teardown:function(){--d===0&&c.removeEventListener(a,e,!0)}}}),f.fn.extend({on:function(a,c,d,e,g){var h,i;if(typeof a=="object"){typeof c!="string"&&(d=d||c,c=b);for(i in a)this.on(i,c,d,a[i],g);return this}d==null&&e==null?(e=c,d=c=b):e==null&&(typeof c=="string"?(e=d,d=b):(e=d,d=c,c=b));if(e===!1)e=J;else if(!e)return this;return g===1&&(h=e,e=function(a){return f().off(a),h.apply(this,arguments)},e.guid=h.guid||(h.guid=f.guid++)),this.each(function(){f.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,c,d){if(a&&a.preventDefault&&a.handleObj){var e=a.handleObj;return f(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler),this}if(typeof a=="object"){for(var g in a)this.off(g,c,a[g]);return this}if(c===!1||typeof c=="function")d=c,c=b;return d===!1&&(d=J),this.each(function(){f.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){return f(this.context).on(a,this.selector,b,c),this},die:function(a,b){return f(this.context).off(a,this.selector||"**",b),this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return arguments.length==1?this.off(a,"**"):this.off(b,a,c)},trigger:function(a,b){return this.each(function(){f.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return f.event.trigger(a,b,this[0],!0)},toggle:function(a){var b=arguments,c=a.guid||f.guid++,d=0,e=function(c){var e=(f._data(this,"lastToggle"+a.guid)||0)%d;return f._data(this,"lastToggle"+a.guid,e+1),c.preventDefault(),b[e].apply(this,arguments)||!1};

e.guid=c;while(d<b.length)b[d++].guid=c;return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),f.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){f.fn[b]=function(a,c){return c==null&&(c=a,a=null),arguments.length>0?this.on(b,null,a,c):this.trigger(b)},f.attrFn&&(f.attrFn[b]=!0),C.test(b)&&(f.event.fixHooks[b]=f.event.keyHooks),D.test(b)&&(f.event.fixHooks[b]=f.event.mouseHooks)}),function(){function w(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break}j.nodeType===1&&!g&&(j[d]=c,j.sizset=h);if(j.nodeName.toLowerCase()===b){k=j;break}j=j[a]}e[h]=k}}}function x(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break}if(j.nodeType===1){g||(j[d]=c,j.sizset=h);if(typeof b!="string"){if(j===b){k=!0;break}}else if(m.filter(b,[j]).length>0){k=j;break}}j=j[a]}e[h]=k}}}var a=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,d="sizcache"+(Math.random()+"").replace(".",""),e=0,g=Object.prototype.toString,h=!1,i=!0,j=/\\/g,k=/\r\n/g,l=/\W/;[0,0].sort(function(){return i=!1,0});var m=function(b,d,e,f){e=e||[],d=d||c;var h=d;if(d.nodeType!==1&&d.nodeType!==9)return[];if(!b||typeof b!="string")return e;var i,j,k,l,n,q,r,t,u=!0,v=m.isXML(d),w=[],x=b;do{a.exec(""),i=a.exec(x);if(i){x=i[3],w.push(i[1]);if(i[2]){l=i[3];break}}}while(i);if(w.length>1&&p.exec(b))if(w.length===2&&o.relative[w[0]])j=y(w[0]+w[1],d,f);else{j=o.relative[w[0]]?[d]:m(w.shift(),d);while(w.length)b=w.shift(),o.relative[b]&&(b+=w.shift()),j=y(b,j,f)}else{!f&&w.length>1&&d.nodeType===9&&!v&&o.match.ID.test(w[0])&&!o.match.ID.test(w[w.length-1])&&(n=m.find(w.shift(),d,v),d=n.expr?m.filter(n.expr,n.set)[0]:n.set[0]);if(d){n=f?{expr:w.pop(),set:s(f)}:m.find(w.pop(),w.length!==1||w[0]!=="~"&&w[0]!=="+"||!d.parentNode?d:d.parentNode,v),j=n.expr?m.filter(n.expr,n.set):n.set,w.length>0?k=s(j):u=!1;while(w.length)q=w.pop(),r=q,o.relative[q]?r=w.pop():q="",r==null&&(r=d),o.relative[q](k,r,v)}else k=w=[]}k||(k=j),k||m.error(q||b);if(g.call(k)==="[object Array]")if(!u)e.push.apply(e,k);else if(d&&d.nodeType===1)for(t=0;k[t]!=null;t++)k[t]&&(k[t]===!0||k[t].nodeType===1&&m.contains(d,k[t]))&&e.push(j[t]);else for(t=0;k[t]!=null;t++)k[t]&&k[t].nodeType===1&&e.push(j[t]);else s(k,e);return l&&(m(l,h,e,f),m.uniqueSort(e)),e};

m.uniqueSort=function(a){if(u){h=i,a.sort(u);if(h)for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1)}return a},m.matches=function(a,b){return m(a,null,null,b)},m.matchesSelector=function(a,b){return m(b,null,null,[a]).length>0},m.find=function(a,b,c){var d,e,f,g,h,i;if(!a)return[];for(e=0,f=o.order.length;e<f;e++){h=o.order[e];if(g=o.leftMatch[h].exec(a)){i=g[1],g.splice(1,1);if(i.substr(i.length-1)!=="\\"){g[1]=(g[1]||"").replace(j,""),d=o.find[h](g,b,c);if(d!=null){a=a.replace(o.match[h],"");break}}}}return d||(d=typeof b.getElementsByTagName!="undefined"?b.getElementsByTagName("*"):[]),{set:d,expr:a}},m.filter=function(a,c,d,e){var f,g,h,i,j,k,l,n,p,q=a,r=[],s=c,t=c&&c[0]&&m.isXML(c[0]);while(a&&c.length){for(h in o.filter)if((f=o.leftMatch[h].exec(a))!=null&&f[2]){k=o.filter[h],l=f[1],g=!1,f.splice(1,1);if(l.substr(l.length-1)==="\\")continue;s===r&&(r=[]);if(o.preFilter[h]){f=o.preFilter[h](f,s,d,r,e,t);if(!f)g=i=!0;else if(f===!0)continue}if(f)for(n=0;(j=s[n])!=null;n++)j&&(i=k(j,f,n,s),p=e^i,d&&i!=null?p?g=!0:s[n]=!1:p&&(r.push(j),g=!0));if(i!==b){d||(s=r),a=a.replace(o.match[h],"");if(!g)return[];break}}if(a===q)if(g==null)m.error(a);else break;q=a}return s},m.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)};

var n=m.getText=function(a){var b,c,d=a.nodeType,e="";if(d){if(d===1||d===9||d===11){if(typeof a.textContent=="string")return a.textContent;if(typeof a.innerText=="string")return a.innerText.replace(k,"");for(a=a.firstChild;a;a=a.nextSibling)e+=n(a)}else if(d===3||d===4)return a.nodeValue}else for(b=0;c=a[b];b++)c.nodeType!==8&&(e+=n(c));return e},o=m.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c=typeof b=="string",d=c&&!l.test(b),e=c&&!d;d&&(b=b.toLowerCase());for(var f=0,g=a.length,h;f<g;f++)if(h=a[f]){while((h=h.previousSibling)&&h.nodeType!==1);a[f]=e||h&&h.nodeName.toLowerCase()===b?h||!1:h===b}e&&m.filter(b,a,!0)},">":function(a,b){var c,d=typeof b=="string",e=0,f=a.length;if(d&&!l.test(b)){b=b.toLowerCase();for(;e<f;e++){c=a[e];if(c){var g=c.parentNode;a[e]=g.nodeName.toLowerCase()===b?g:!1}}}else{for(;e<f;e++)c=a[e],c&&(a[e]=d?c.parentNode:c.parentNode===b);d&&m.filter(b,a,!0)}},"":function(a,b,c){var d,f=e++,g=x;typeof b=="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("parentNode",b,f,a,d,c)},"~":function(a,b,c){var d,f=e++,g=x;typeof b=="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("previousSibling",b,f,a,d,c)}},find:{ID:function(a,b,c){if(typeof b.getElementById!="undefined"&&!c){var d=b.getElementById(a[1]);return d&&d.parentNode?[d]:[]}},NAME:function(a,b){if(typeof b.getElementsByName!="undefined"){var c=[],d=b.getElementsByName(a[1]);for(var e=0,f=d.length;e<f;e++)d[e].getAttribute("name")===a[1]&&c.push(d[e]);return c.length===0?null:c}},TAG:function(a,b){if(typeof b.getElementsByTagName!="undefined")return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(j,"")+" ";if(f)return a;for(var g=0,h;(h=b[g])!=null;g++)h&&(e^(h.className&&(" "+h.className+" ").replace(/[\t\n\r]/g," ").indexOf(a)>=0)?c||d.push(h):c&&(b[g]=!1));return!1},ID:function(a){return a[1].replace(j,"")},TAG:function(a,b){return a[1].replace(j,"").toLowerCase()},CHILD:function(a){if(a[1]==="nth"){a[2]||m.error(a[0]),a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0,a[3]=b[3]-0}else a[2]&&m.error(a[0]);return a[0]=e++,a},ATTR:function(a,b,c,d,e,f){var g=a[1]=a[1].replace(j,"");return!f&&o.attrMap[g]&&(a[1]=o.attrMap[g]),a[4]=(a[4]||a[5]||"").replace(j,""),a[2]==="~="&&(a[4]=" "+a[4]+" "),a},PSEUDO:function(b,c,d,e,f){if(b[1]==="not")if((a.exec(b[3])||"").length>1||/^\w/.test(b[3]))b[3]=m(b[3],null,null,c);else{var g=m.filter(b[3],c,d,!0^f);return d||e.push.apply(e,g),!1}else if(o.match.POS.test(b[0])||o.match.CHILD.test(b[0]))return!0;return b},POS:function(a){return a.unshift(!0),a}},filters:{enabled:function(a){return a.disabled===!1&&a.type!=="hidden"},disabled:function(a){return a.disabled===!0},checked:function(a){return a.checked===!0},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,c){return!!m(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),c=a.type;return a.nodeName.toLowerCase()==="input"&&"text"===c&&(b===c||b===null)},radio:function(a){return a.nodeName.toLowerCase()==="input"&&"radio"===a.type},checkbox:function(a){return a.nodeName.toLowerCase()==="input"&&"checkbox"===a.type},file:function(a){return a.nodeName.toLowerCase()==="input"&&"file"===a.type},password:function(a){return a.nodeName.toLowerCase()==="input"&&"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"submit"===a.type},image:function(a){return a.nodeName.toLowerCase()==="input"&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&"button"===a.type||b==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return b===0},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=o.filters[e];if(f)return f(a,c,b,d);if(e==="contains")return(a.textContent||a.innerText||n([a])||"").indexOf(b[3])>=0;if(e==="not"){var g=b[3];for(var h=0,i=g.length;h<i;h++)if(g[h]===a)return!1;return!0}m.error(e)},CHILD:function(a,b){var c,e,f,g,h,i,j,k=b[1],l=a;switch(k){case"only":case"first":while(l=l.previousSibling)if(l.nodeType===1)return!1;if(k==="first")return!0;l=a;case"last":while(l=l.nextSibling)if(l.nodeType===1)return!1;return!0;case"nth":c=b[2],e=b[3];if(c===1&&e===0)return!0;f=b[0],g=a.parentNode;if(g&&(g[d]!==f||!a.nodeIndex)){i=0;for(l=g.firstChild;l;l=l.nextSibling)l.nodeType===1&&(l.nodeIndex=++i);g[d]=f}return j=a.nodeIndex-e,c===0?j===0:j%c===0&&j/c>=0}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b},TAG:function(a,b){return b==="*"&&a.nodeType===1||!!a.nodeName&&a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var c=b[1],d=m.attr?m.attr(a,c):o.attrHandle[c]?o.attrHandle[c](a):a[c]!=null?a[c]:a.getAttribute(c),e=d+"",f=b[2],g=b[4];return d==null?f==="!=":!f&&m.attr?d!=null:f==="="?e===g:f==="*="?e.indexOf(g)>=0:f==="~="?(" "+e+" ").indexOf(g)>=0:g?f==="!="?e!==g:f==="^="?e.indexOf(g)===0:f==="$="?e.substr(e.length-g.length)===g:f==="|="?e===g||e.substr(0,g.length+1)===g+"-":!1:e&&d!==!1},POS:function(a,b,c,d){var e=b[2],f=o.setFilters[e];if(f)return f(a,c,b,d)}}},p=o.match.POS,q=function(a,b){return"\\"+(b-0+1)};

for(var r in o.match)o.match[r]=new RegExp(o.match[r].source+/(?![^\[]*\])(?![^\(]*\))/.source),o.leftMatch[r]=new RegExp(/(^(?:.|\r|\n)*?)/.source+o.match[r].source.replace(/\\(\d+)/g,q));o.match.globalPOS=p;var s=function(a,b){return a=Array.prototype.slice.call(a,0),b?(b.push.apply(b,a),b):a};

try{Array.prototype.slice.call(c.documentElement.childNodes,0)[0].nodeType}catch(t){s=function(a,b){var c=0,d=b||[];if(g.call(a)==="[object Array]")Array.prototype.push.apply(d,a);else if(typeof a.length=="number")for(var e=a.length;c<e;c++)d.push(a[c]);else for(;a[c];c++)d.push(a[c]);return d}}var u,v;c.documentElement.compareDocumentPosition?u=function(a,b){return a===b?(h=!0,0):!a.compareDocumentPosition||!b.compareDocumentPosition?a.compareDocumentPosition?-1:1:a.compareDocumentPosition(b)&4?-1:1}:(u=function(a,b){if(a===b)return h=!0,0;if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],f=[],g=a.parentNode,i=b.parentNode,j=g;if(g===i)return v(a,b);if(!g)return-1;if(!i)return 1;while(j)e.unshift(j),j=j.parentNode;j=i;while(j)f.unshift(j),j=j.parentNode;c=e.length,d=f.length;for(var k=0;k<c&&k<d;k++)if(e[k]!==f[k])return v(e[k],f[k]);return k===c?v(a,f[k],-1):v(e[k],b,1)},v=function(a,b,c){if(a===b)return c;var d=a.nextSibling;while(d){if(d===b)return-1;d=d.nextSibling}return 1}),function(){var a=c.createElement("div"),d="script"+(new Date).getTime(),e=c.documentElement;a.innerHTML="<a name='"+d+"'/>",e.insertBefore(a,e.firstChild),c.getElementById(d)&&(o.find.ID=function(a,c,d){if(typeof c.getElementById!="undefined"&&!d){var e=c.getElementById(a[1]);return e?e.id===a[1]||typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id").nodeValue===a[1]?[e]:b:[]}},o.filter.ID=function(a,b){var c=typeof a.getAttributeNode!="undefined"&&a.getAttributeNode("id");return a.nodeType===1&&c&&c.nodeValue===b}),e.removeChild(a),e=a=null}(),function(){var a=c.createElement("div");a.appendChild(c.createComment("")),a.getElementsByTagName("*").length>0&&(o.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if(a[1]==="*"){var d=[];for(var e=0;c[e];e++)c[e].nodeType===1&&d.push(c[e]);c=d}return c}),a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!="undefined"&&a.firstChild.getAttribute("href")!=="#"&&(o.attrHandle.href=function(a){return a.getAttribute("href",2)}),a=null}(),c.querySelectorAll&&function(){var a=m,b=c.createElement("div"),d="__sizzle__";b.innerHTML="<p class='TEST'></p>";if(b.querySelectorAll&&b.querySelectorAll(".TEST").length===0)return;m=function(b,e,f,g){e=e||c;if(!g&&!m.isXML(e)){var h=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(h&&(e.nodeType===1||e.nodeType===9)){if(h[1])return s(e.getElementsByTagName(b),f);if(h[2]&&o.find.CLASS&&e.getElementsByClassName)return s(e.getElementsByClassName(h[2]),f)}if(e.nodeType===9){if(b==="body"&&e.body)return s([e.body],f);if(h&&h[3]){var i=e.getElementById(h[3]);if(!i||!i.parentNode)return s([],f);if(i.id===h[3])return s([i],f)}try{return s(e.querySelectorAll(b),f)}catch(j){}}else if(e.nodeType===1&&e.nodeName.toLowerCase()!=="object"){var k=e,l=e.getAttribute("id"),n=l||d,p=e.parentNode,q=/^\s*[+~]/.test(b);l?n=n.replace(/'/g,"\\$&"):e.setAttribute("id",n),q&&p&&(e=e.parentNode);try{if(!q||p)return s(e.querySelectorAll("[id='"+n+"'] "+b),f)}catch(r){}finally{l||k.removeAttribute("id")}}}return a(b,e,f,g)};

for(var e in a)m[e]=a[e];b=null}(),function(){var a=c.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var d=!b.call(c.createElement("div"),"div"),e=!1;try{b.call(c.documentElement,"[test!='']:sizzle")}catch(f){e=!0}m.matchesSelector=function(a,c){c=c.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!m.isXML(a))try{if(e||!o.match.PSEUDO.test(c)&&!/!=/.test(c)){var f=b.call(a,c);if(f||!d||a.document&&a.document.nodeType!==11)return f}}catch(g){}return m(c,null,null,[a]).length>0}}}(),function(){var a=c.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";if(!a.getElementsByClassName||a.getElementsByClassName("e").length===0)return;a.lastChild.className="e";if(a.getElementsByClassName("e").length===1)return;o.order.splice(1,0,"CLASS"),o.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!="undefined"&&!c)return b.getElementsByClassName(a[1])},a=null}(),c.documentElement.contains?m.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:c.documentElement.compareDocumentPosition?m.contains=function(a,b){return!!(a.compareDocumentPosition(b)&16)}:m.contains=function(){return!1},m.isXML=function(a){var b=(a?a.ownerDocument||a:0).documentElement;return b?b.nodeName!=="HTML":!1};

var y=function(a,b,c){var d,e=[],f="",g=b.nodeType?[b]:b;while(d=o.match.PSEUDO.exec(a))f+=d[0],a=a.replace(o.match.PSEUDO,"");a=o.relative[a]?a+"*":a;for(var h=0,i=g.length;h<i;h++)m(a,g[h],e,c);return m.filter(f,e)};

m.attr=f.attr,m.selectors.attrMap={},f.find=m,f.expr=m.selectors,f.expr[":"]=f.expr.filters,f.unique=m.uniqueSort,f.text=m.getText,f.isXMLDoc=m.isXML,f.contains=m.contains}();var L=/Until$/,M=/^(?:parents|prevUntil|prevAll)/,N=/,/,O=/^.[^:#\[\.,]*$/,P=Array.prototype.slice,Q=f.expr.match.globalPOS,R={children:!0,contents:!0,next:!0,prev:!0};

f.fn.extend({find:function(a){var b=this,c,d;if(typeof a!="string")return f(a).filter(function(){for(c=0,d=b.length;c<d;c++)if(f.contains(b[c],this))return!0});var e=this.pushStack("","find",a),g,h,i;for(c=0,d=this.length;c<d;c++){g=e.length,f.find(a,this[c],e);if(c>0)for(h=g;h<e.length;h++)for(i=0;i<g;i++)if(e[i]===e[h]){e.splice(h--,1);break}}return e},has:function(a){var b=f(a);return this.filter(function(){for(var a=0,c=b.length;a<c;a++)if(f.contains(this,b[a]))return!0})},not:function(a){return this.pushStack(T(this,a,!1),"not",a)},filter:function(a){return this.pushStack(T(this,a,!0),"filter",a)},is:function(a){return!!a&&(typeof a=="string"?Q.test(a)?f(a,this.context).index(this[0])>=0:f.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){var c=[],d,e,g=this[0];if(f.isArray(a)){var h=1;while(g&&g.ownerDocument&&g!==b){for(d=0;d<a.length;d++)f(g).is(a[d])&&c.push({selector:a[d],elem:g,level:h});g=g.parentNode,h++}return c}var i=Q.test(a)||typeof a!="string"?f(a,b||this.context):0;for(d=0,e=this.length;d<e;d++){g=this[d];while(g){if(i?i.index(g)>-1:f.find.matchesSelector(g,a)){c.push(g);break}g=g.parentNode;if(!g||!g.ownerDocument||g===b||g.nodeType===11)break}}return c=c.length>1?f.unique(c):c,this.pushStack(c,"closest",a)},index:function(a){return a?typeof a=="string"?f.inArray(this[0],f(a)):f.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(a,b){var c=typeof a=="string"?f(a,b):f.makeArray(a&&a.nodeType?[a]:a),d=f.merge(this.get(),c);return this.pushStack(S(c[0])||S(d[0])?d:f.unique(d))},andSelf:function(){return this.add(this.prevObject)}}),f.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return f.dir(a,"parentNode")},parentsUntil:function(a,b,c){return f.dir(a,"parentNode",c)},next:function(a){return f.nth(a,2,"nextSibling")},prev:function(a){return f.nth(a,2,"previousSibling")},nextAll:function(a){return f.dir(a,"nextSibling")},prevAll:function(a){return f.dir(a,"previousSibling")},nextUntil:function(a,b,c){return f.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return f.dir(a,"previousSibling",c)},siblings:function(a){return f.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return f.sibling(a.firstChild)},contents:function(a){return f.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:f.makeArray(a.childNodes)}},function(a,b){f.fn[a]=function(c,d){var e=f.map(this,b,c);return L.test(a)||(d=c),d&&typeof d=="string"&&(e=f.filter(d,e)),e=this.length>1&&!R[a]?f.unique(e):e,(this.length>1||N.test(d))&&M.test(a)&&(e=e.reverse()),this.pushStack(e,a,P.call(arguments).join(","))}}),f.extend({filter:function(a,b,c){return c&&(a=":not("+a+")"),b.length===1?f.find.matchesSelector(b[0],a)?[b[0]]:[]:f.find.matches(a,b)},dir:function(a,c,d){var e=[],g=a[c];while(g&&g.nodeType!==9&&(d===b||g.nodeType!==1||!f(g).is(d)))g.nodeType===1&&e.push(g),g=g[c];return e},nth:function(a,b,c,d){b=b||1;var e=0;for(;a;a=a[c])if(a.nodeType===1&&++e===b)break;return a},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling)a.nodeType===1&&a!==b&&c.push(a);return c}});var V="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",W=/ jQuery\d+="(?:\d+|null)"/g,X=/^\s+/,Y=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,Z=/<([\w:]+)/,$=/<tbody/i,_=/<|&#?\w+;/,ba=/<(?:script|style)/i,bb=/<(?:script|object|embed|option|style)/i,bc=new RegExp("<(?:"+V+")[\\s/>]","i"),bd=/checked\s*(?:[^=]|=\s*.checked.)/i,be=/\/(java|ecma)script/i,bf=/^\s*<!(?:\[CDATA\[|\-\-)/,bg={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},bh=U(c);bg.optgroup=bg.option,bg.tbody=bg.tfoot=bg.colgroup=bg.caption=bg.thead,bg.th=bg.td,f.support.htmlSerialize||(bg._default=[1,"div<div>","</div>"]),f.fn.extend({text:function(a){return f.access(this,function(a){return a===b?f.text(this):this.empty().append((this[0]&&this[0].ownerDocument||c).createTextNode(a))},null,a,arguments.length)},wrapAll:function(a){if(f.isFunction(a))return this.each(function(b){f(this).wrapAll(a.call(this,b))});if(this[0]){var b=f(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&a.firstChild.nodeType===1)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return f.isFunction(a)?this.each(function(b){f(this).wrapInner(a.call(this,b))}):this.each(function(){var b=f(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=f.isFunction(a);return this.each(function(c){f(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){f.nodeName(this,"body")||f(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=f.clean(arguments);return a.push.apply(a,this.toArray()),this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=this.pushStack(this,"after",arguments);return a.push.apply(a,f.clean(arguments)),a}},remove:function(a,b){for(var c=0,d;(d=this[c])!=null;c++)if(!a||f.filter(a,[d]).length)!b&&d.nodeType===1&&(f.cleanData(d.getElementsByTagName("*")),f.cleanData([d])),d.parentNode&&d.parentNode.removeChild(d);return this},empty:function(){for(var a=0,b;(b=this[a])!=null;a++){b.nodeType===1&&f.cleanData(b.getElementsByTagName("*"));while(b.firstChild)b.removeChild(b.firstChild)}return this},clone:function(a,b){return a=a==null?!1:a,b=b==null?a:b,this.map(function(){return f.clone(this,a,b)})},html:function(a){return f.access(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===b)return c.nodeType===1?c.innerHTML.replace(W,""):null;if(typeof a=="string"&&!ba.test(a)&&(f.support.leadingWhitespace||!X.test(a))&&!bg[(Z.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Y,"<$1></$2>");try{for(;d<e;d++)c=this[d]||{},c.nodeType===1&&(f.cleanData(c.getElementsByTagName("*")),c.innerHTML=a);c=0}catch(g){}}c&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(a){return this[0]&&this[0].parentNode?f.isFunction(a)?this.each(function(b){var c=f(this),d=c.html();c.replaceWith(a.call(this,b,d))}):(typeof a!="string"&&(a=f(a).detach()),this.each(function(){var b=this.nextSibling,c=this.parentNode;f(this).remove(),b?f(b).before(a):f(c).append(a)})):this.length?this.pushStack(f(f.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){var e,g,h,i,j=a[0],k=[];if(!f.support.checkClone&&arguments.length===3&&typeof j=="string"&&bd.test(j))return this.each(function(){f(this).domManip(a,c,d,!0)});if(f.isFunction(j))return this.each(function(e){var g=f(this);a[0]=j.call(this,e,c?g.html():b),g.domManip(a,c,d)});if(this[0]){i=j&&j.parentNode,f.support.parentNode&&i&&i.nodeType===11&&i.childNodes.length===this.length?e={fragment:i}:e=f.buildFragment(a,this,k),h=e.fragment,h.childNodes.length===1?g=h=h.firstChild:g=h.firstChild;if(g){c=c&&f.nodeName(g,"tr");for(var l=0,m=this.length,n=m-1;l<m;l++)d.call(c?bi(this[l],g):this[l],e.cacheable||m>1&&l<n?f.clone(h,!0,!0):h)}k.length&&f.each(k,function(a,b){b.src?f.ajax({type:"GET",global:!1,url:b.src,async:!1,dataType:"script"}):f.globalEval((b.text||b.textContent||b.innerHTML||"").replace(bf,"/*$0*/")),b.parentNode&&b.parentNode.removeChild(b)})}return this}}),f.buildFragment=function(a,b,d){var e,g,h,i,j=a[0];return b&&b[0]&&(i=b[0].ownerDocument||b[0]),i.createDocumentFragment||(i=c),a.length===1&&typeof j=="string"&&j.length<512&&i===c&&j.charAt(0)==="<"&&!bb.test(j)&&(f.support.checkClone||!bd.test(j))&&(f.support.html5Clone||!bc.test(j))&&(g=!0,h=f.fragments[j],h&&h!==1&&(e=h)),e||(e=i.createDocumentFragment(),f.clean(a,i,e,d)),g&&(f.fragments[j]=h?e:1),{fragment:e,cacheable:g}},f.fragments={},f.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){f.fn[a]=function(c){var d=[],e=f(c),g=this.length===1&&this[0].parentNode;if(g&&g.nodeType===11&&g.childNodes.length===1&&e.length===1)return e[b](this[0]),this;for(var h=0,i=e.length;h<i;h++){var j=(h>0?this.clone(!0):this).get();f(e[h])[b](j),d=d.concat(j)}return this.pushStack(d,a,e.selector)}}),f.extend({clone:function(a,b,c){var d,e,g,h=f.support.html5Clone||f.isXMLDoc(a)||!bc.test("<"+a.nodeName+">")?a.cloneNode(!0):bo(a);if((!f.support.noCloneEvent||!f.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!f.isXMLDoc(a)){bk(a,h),d=bl(a),e=bl(h);for(g=0;d[g];++g)e[g]&&bk(d[g],e[g])}if(b){bj(a,h);if(c){d=bl(a),e=bl(h);for(g=0;d[g];++g)bj(d[g],e[g])}}return d=e=null,h},clean:function(a,b,d,e){var g,h,i,j=[];b=b||c,typeof b.createElement=="undefined"&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||c);for(var k=0,l;(l=a[k])!=null;k++){typeof l=="number"&&(l+="");if(!l)continue;if(typeof l=="string")if(!_.test(l))l=b.createTextNode(l);else{l=l.replace(Y,"<$1></$2>");var m=(Z.exec(l)||["",""])[1].toLowerCase(),n=bg[m]||bg._default,o=n[0],p=b.createElement("div"),q=bh.childNodes,r;b===c?bh.appendChild(p):U(b).appendChild(p),p.innerHTML=n[1]+l+n[2];while(o--)p=p.lastChild;if(!f.support.tbody){var s=$.test(l),t=m==="table"&&!s?p.firstChild&&p.firstChild.childNodes:n[1]==="<table>"&&!s?p.childNodes:[];for(i=t.length-1;i>=0;--i)f.nodeName(t[i],"tbody")&&!t[i].childNodes.length&&t[i].parentNode.removeChild(t[i])}!f.support.leadingWhitespace&&X.test(l)&&p.insertBefore(b.createTextNode(X.exec(l)[0]),p.firstChild),l=p.childNodes,p&&(p.parentNode.removeChild(p),q.length>0&&(r=q[q.length-1],r&&r.parentNode&&r.parentNode.removeChild(r)))}var u;if(!f.support.appendChecked)if(l[0]&&typeof (u=l.length)=="number")for(i=0;i<u;i++)bn(l[i]);else bn(l);l.nodeType?j.push(l):j=f.merge(j,l)}if(d){g=function(a){return!a.type||be.test(a.type)};

for(k=0;j[k];k++){h=j[k];if(e&&f.nodeName(h,"script")&&(!h.type||be.test(h.type)))e.push(h.parentNode?h.parentNode.removeChild(h):h);else{if(h.nodeType===1){var v=f.grep(h.getElementsByTagName("script"),g);j.splice.apply(j,[k+1,0].concat(v))}d.appendChild(h)}}}return j},cleanData:function(a){var b,c,d=f.cache,e=f.event.special,g=f.support.deleteExpando;for(var h=0,i;(i=a[h])!=null;h++){if(i.nodeName&&f.noData[i.nodeName.toLowerCase()])continue;c=i[f.expando];if(c){b=d[c];if(b&&b.events){for(var j in b.events)e[j]?f.event.remove(i,j):f.removeEvent(i,j,b.handle);b.handle&&(b.handle.elem=null)}g?delete i[f.expando]:i.removeAttribute&&i.removeAttribute(f.expando),delete d[c]}}}});var bp=/alpha\([^)]*\)/i,bq=/opacity=([^)]*)/,br=/([A-Z]|^ms)/g,bs=/^[\-+]?(?:\d*\.)?\d+$/i,bt=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,bu=/^([\-+])=([\-+.\de]+)/,bv=/^margin/,bw={position:"absolute",visibility:"hidden",display:"block"},bx=["Top","Right","Bottom","Left"],by,bz,bA;f.fn.css=function(a,c){return f.access(this,function(a,c,d){return d!==b?f.style(a,c,d):f.css(a,c)},a,c,arguments.length>1)},f.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=by(a,"opacity");return c===""?"1":c}return a.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":f.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(!a||a.nodeType===3||a.nodeType===8||!a.style)return;var g,h,i=f.camelCase(c),j=a.style,k=f.cssHooks[i];c=f.cssProps[i]||i;if(d===b)return k&&"get"in k&&(g=k.get(a,!1,e))!==b?g:j[c];h=typeof d,h==="string"&&(g=bu.exec(d))&&(d=+(g[1]+1)*+g[2]+parseFloat(f.css(a,c)),h="number");if(d==null||h==="number"&&isNaN(d))return;h==="number"&&!f.cssNumber[i]&&(d+="px");if(!k||!("set"in k)||(d=k.set(a,d))!==b)try{j[c]=d}catch(l){}},css:function(a,c,d){var e,g;c=f.camelCase(c),g=f.cssHooks[c],c=f.cssProps[c]||c,c==="cssFloat"&&(c="float");if(g&&"get"in g&&(e=g.get(a,!0,d))!==b)return e;if(by)return by(a,c)},swap:function(a,b,c){var d={},e,f;for(f in b)d[f]=a.style[f],a.style[f]=b[f];e=c.call(a);for(f in b)a.style[f]=d[f];return e}}),f.curCSS=f.css,c.defaultView&&c.defaultView.getComputedStyle&&(bz=function(a,b){var c,d,e,g,h=a.style;return b=b.replace(br,"-$1").toLowerCase(),(d=a.ownerDocument.defaultView)&&(e=d.getComputedStyle(a,null))&&(c=e.getPropertyValue(b),c===""&&!f.contains(a.ownerDocument.documentElement,a)&&(c=f.style(a,b))),!f.support.pixelMargin&&e&&bv.test(b)&&bt.test(c)&&(g=h.width,h.width=c,c=e.width,h.width=g),c}),c.documentElement.currentStyle&&(bA=function(a,b){var c,d,e,f=a.currentStyle&&a.currentStyle[b],g=a.style;return f==null&&g&&(e=g[b])&&(f=e),bt.test(f)&&(c=g.left,d=a.runtimeStyle&&a.runtimeStyle.left,d&&(a.runtimeStyle.left=a.currentStyle.left),g.left=b==="fontSize"?"1em":f,f=g.pixelLeft+"px",g.left=c,d&&(a.runtimeStyle.left=d)),f===""?"auto":f}),by=bz||bA,f.each(["height","width"],function(a,b){f.cssHooks[b]={get:function(a,c,d){if(c)return a.offsetWidth!==0?bB(a,b,d):f.swap(a,bw,function(){return bB(a,b,d)})},set:function(a,b){return bs.test(b)?b+"px":b}}}),f.support.opacity||(f.cssHooks.opacity={get:function(a,b){return bq.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=f.isNumeric(b)?"alpha(opacity="+b*100+")":"",g=d&&d.filter||c.filter||"";c.zoom=1;if(b>=1&&f.trim(g.replace(bp,""))===""){c.removeAttribute("filter");if(d&&!d.filter)return}c.filter=bp.test(g)?g.replace(bp,e):g+" "+e}}),f(function(){f.support.reliableMarginRight||(f.cssHooks.marginRight={get:function(a,b){return f.swap(a,{display:"inline-block"},function(){return b?by(a,"margin-right"):a.style.marginRight})}})}),f.expr&&f.expr.filters&&(f.expr.filters.hidden=function(a){var b=a.offsetWidth,c=a.offsetHeight;return b===0&&c===0||!f.support.reliableHiddenOffsets&&(a.style&&a.style.display||f.css(a,"display"))==="none"},f.expr.filters.visible=function(a){return!f.expr.filters.hidden(a)}),f.each({margin:"",padding:"",border:"Width"},function(a,b){f.cssHooks[a+b]={expand:function(c){var d,e=typeof c=="string"?c.split(" "):[c],f={};

for(d=0;d<4;d++)f[a+bx[d]+b]=e[d]||e[d-2]||e[0];return f}}});var bC=/%20/g,bD=/\[\]$/,bE=/\r?\n/g,bF=/#.*$/,bG=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,bH=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,bI=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,bJ=/^(?:GET|HEAD)$/,bK=/^\/\//,bL=/\?/,bM=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bN=/^(?:select|textarea)/i,bO=/\s+/,bP=/([?&])_=[^&]*/,bQ=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,bR=f.fn.load,bS={},bT={},bU,bV,bW=["*/"]+["*"];try{bU=e.href}catch(bX){bU=c.createElement("a"),bU.href="",bU=bU.href}bV=bQ.exec(bU.toLowerCase())||[],f.fn.extend({load:function(a,c,d){if(typeof a!="string"&&bR)return bR.apply(this,arguments);if(!this.length)return this;var e=a.indexOf(" ");if(e>=0){var g=a.slice(e,a.length);a=a.slice(0,e)}var h="GET";c&&(f.isFunction(c)?(d=c,c=b):typeof c=="object"&&(c=f.param(c,f.ajaxSettings.traditional),h="POST"));var i=this;return f.ajax({url:a,type:h,dataType:"html",data:c,complete:function(a,b,c){c=a.responseText,a.isResolved()&&(a.done(function(a){c=a}),i.html(g?f("<div>").append(c.replace(bM,"")).find(g):c)),d&&i.each(d,[c,b,a])}}),this},serialize:function(){return f.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?f.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||bN.test(this.nodeName)||bH.test(this.type))}).map(function(a,b){var c=f(this).val();return c==null?null:f.isArray(c)?f.map(c,function(a,c){return{name:b.name,value:a.replace(bE,"\r\n")}}):{name:b.name,value:c.replace(bE,"\r\n")}}).get()}}),f.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){f.fn[b]=function(a){return this.on(b,a)}}),f.each(["get","post"],function(a,c){f[c]=function(a,d,e,g){return f.isFunction(d)&&(g=g||e,e=d,d=b),f.ajax({type:c,url:a,data:d,success:e,dataType:g})}}),f.extend({getScript:function(a,c){return f.get(a,b,c,"script")},getJSON:function(a,b,c){return f.get(a,b,c,"json")},ajaxSetup:function(a,b){return b?b$(a,f.ajaxSettings):(b=a,a=f.ajaxSettings),b$(a,b),a},ajaxSettings:{url:bU,isLocal:bI.test(bV[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":bW},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":f.parseJSON,"text xml":f.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:bY(bS),ajaxTransport:bY(bT),ajax:function(a,c){function w(a,c,l,m){if(s===2)return;s=2,q&&clearTimeout(q),p=b,n=m||"",v.readyState=a>0?4:0;var o,r,u,w=c,x=l?ca(d,v,l):b,y,z;if(a>=200&&a<300||a===304){if(d.ifModified){if(y=v.getResponseHeader("Last-Modified"))f.lastModified[k]=y;if(z=v.getResponseHeader("Etag"))f.etag[k]=z}if(a===304)w="notmodified",o=!0;else try{r=cb(d,x),w="success",o=!0}catch(A){w="parsererror",u=A}}else{u=w;if(!w||a)w="error",a<0&&(a=0)}v.status=a,v.statusText=""+(c||w),o?h.resolveWith(e,[r,w,v]):h.rejectWith(e,[v,w,u]),v.statusCode(j),j=b,t&&g.trigger("ajax"+(o?"Success":"Error"),[v,d,o?r:u]),i.fireWith(e,[v,w]),t&&(g.trigger("ajaxComplete",[v,d]),--f.active||f.event.trigger("ajaxStop"))}typeof a=="object"&&(c=a,a=b),c=c||{};

var d=f.ajaxSetup({},c),e=d.context||d,g=e!==d&&(e.nodeType||e instanceof f)?f(e):f.event,h=f.Deferred(),i=f.Callbacks("once memory"),j=d.statusCode||{},k,l={},m={},n,o,p,q,r,s=0,t,u,v={readyState:0,setRequestHeader:function(a,b){if(!s){var c=a.toLowerCase();a=m[c]=m[c]||a,l[a]=b}return this},getAllResponseHeaders:function(){return s===2?n:null},getResponseHeader:function(a){var c;if(s===2){if(!o){o={};

while(c=bG.exec(n))o[c[1].toLowerCase()]=c[2]}c=o[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){return s||(d.mimeType=a),this},abort:function(a){return a=a||"abort",p&&p.abort(a),w(0,a),this}};

h.promise(v),v.success=v.done,v.error=v.fail,v.complete=i.add,v.statusCode=function(a){if(a){var b;if(s<2)for(b in a)j[b]=[j[b],a[b]];else b=a[v.status],v.then(b,b)}return this},d.url=((a||d.url)+"").replace(bF,"").replace(bK,bV[1]+"//"),d.dataTypes=f.trim(d.dataType||"*").toLowerCase().split(bO),d.crossDomain==null&&(r=bQ.exec(d.url.toLowerCase()),d.crossDomain=!(!r||r[1]==bV[1]&&r[2]==bV[2]&&(r[3]||(r[1]==="http:"?80:443))==(bV[3]||(bV[1]==="http:"?80:443)))),d.data&&d.processData&&typeof d.data!="string"&&(d.data=f.param(d.data,d.traditional)),bZ(bS,d,c,v);if(s===2)return!1;t=d.global,d.type=d.type.toUpperCase(),d.hasContent=!bJ.test(d.type),t&&f.active++===0&&f.event.trigger("ajaxStart");if(!d.hasContent){d.data&&(d.url+=(bL.test(d.url)?"&":"?")+d.data,delete d.data),k=d.url;if(d.cache===!1){var x=f.now(),y=d.url.replace(bP,"$1_="+x);d.url=y+(y===d.url?(bL.test(d.url)?"&":"?")+"_="+x:"")}}(d.data&&d.hasContent&&d.contentType!==!1||c.contentType)&&v.setRequestHeader("Content-Type",d.contentType),d.ifModified&&(k=k||d.url,f.lastModified[k]&&v.setRequestHeader("If-Modified-Since",f.lastModified[k]),f.etag[k]&&v.setRequestHeader("If-None-Match",f.etag[k])),v.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+(d.dataTypes[0]!=="*"?", "+bW+"; q=0.01":""):d.accepts["*"]);for(u in d.headers)v.setRequestHeader(u,d.headers[u]);if(!d.beforeSend||d.beforeSend.call(e,v,d)!==!1&&s!==2){for(u in{success:1,error:1,complete:1})v[u](d[u]);p=bZ(bT,d,c,v);if(!p)w(-1,"No Transport");else{v.readyState=1,t&&g.trigger("ajaxSend",[v,d]),d.async&&d.timeout>0&&(q=setTimeout(function(){v.abort("timeout")},d.timeout));try{s=1,p.send(l,w)}catch(z){if(s<2)w(-1,z);else throw z}}return v}return v.abort(),!1},param:function(a,c){var d=[],e=function(a,b){b=f.isFunction(b)?b():b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};

c===b&&(c=f.ajaxSettings.traditional);if(f.isArray(a)||a.jquery&&!f.isPlainObject(a))f.each(a,function(){e(this.name,this.value)});else for(var g in a)b_(g,a[g],c,e);return d.join("&").replace(bC,"+")}}),f.extend({active:0,lastModified:{},etag:{}});var cc=f.now(),cd=/(\=)\?(&|$)|\?\?/i;f.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return f.expando+"_"+cc++}}),f.ajaxPrefilter("json jsonp",function(b,c,d){var e=typeof b.data=="string"&&/^application\/x\-www\-form\-urlencoded/.test(b.contentType);if(b.dataTypes[0]==="jsonp"||b.jsonp!==!1&&(cd.test(b.url)||e&&cd.test(b.data))){var g,h=b.jsonpCallback=f.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,i=a[h],j=b.url,k=b.data,l="$1"+h+"$2";return b.jsonp!==!1&&(j=j.replace(cd,l),b.url===j&&(e&&(k=k.replace(cd,l)),b.data===k&&(j+=(/\?/.test(j)?"&":"?")+b.jsonp+"="+h))),b.url=j,b.data=k,a[h]=function(a){g=[a]},d.always(function(){a[h]=i,g&&f.isFunction(i)&&a[h](g[0])}),b.converters["script json"]=function(){return g||f.error(h+" was not called"),g[0]},b.dataTypes[0]="json","script"}}),f.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){return f.globalEval(a),a}}}),f.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),f.ajaxTransport("script",function(a){if(a.crossDomain){var d,e=c.head||c.getElementsByTagName("head")[0]||c.documentElement;return{send:function(f,g){d=c.createElement("script"),d.async="async",a.scriptCharset&&(d.charset=a.scriptCharset),d.src=a.url,d.onload=d.onreadystatechange=function(a,c){if(c||!d.readyState||/loaded|complete/.test(d.readyState))d.onload=d.onreadystatechange=null,e&&d.parentNode&&e.removeChild(d),d=b,c||g(200,"success")},e.insertBefore(d,e.firstChild)},abort:function(){d&&d.onload(0,1)}}}});var ce=a.ActiveXObject?function(){for(var a in cg)cg[a](0,1)}:!1,cf=0,cg;f.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&ch()||ci()}:ch,function(a){f.extend(f.support,{ajax:!!a,cors:!!a&&"withCredentials"in a})}(f.ajaxSettings.xhr()),f.support.ajax&&f.ajaxTransport(function(c){if(!c.crossDomain||f.support.cors){var d;return{send:function(e,g){var h=c.xhr(),i,j;c.username?h.open(c.type,c.url,c.async,c.username,c.password):h.open(c.type,c.url,c.async);if(c.xhrFields)for(j in c.xhrFields)h[j]=c.xhrFields[j];c.mimeType&&h.overrideMimeType&&h.overrideMimeType(c.mimeType),!c.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(j in e)h.setRequestHeader(j,e[j])}catch(k){}h.send(c.hasContent&&c.data||null),d=function(a,e){var j,k,l,m,n;try{if(d&&(e||h.readyState===4)){d=b,i&&(h.onreadystatechange=f.noop,ce&&delete cg[i]);if(e)h.readyState!==4&&h.abort();else{j=h.status,l=h.getAllResponseHeaders(),m={},n=h.responseXML,n&&n.documentElement&&(m.xml=n);try{m.text=h.responseText}catch(a){}try{k=h.statusText}catch(o){k=""}!j&&c.isLocal&&!c.crossDomain?j=m.text?200:404:j===1223&&(j=204)}}}catch(p){e||g(-1,p)}m&&g(j,k,m,l)},!c.async||h.readyState===4?d():(i=++cf,ce&&(cg||(cg={},f(a).unload(ce)),cg[i]=d),h.onreadystatechange=d)},abort:function(){d&&d(0,1)}}}});var cj={},ck,cl,cm=/^(?:toggle|show|hide)$/,cn=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,co,cp=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],cq;f.fn.extend({show:function(a,b,c){var d,e;if(a||a===0)return this.animate(ct("show",3),a,b,c);for(var g=0,h=this.length;g<h;g++)d=this[g],d.style&&(e=d.style.display,!f._data(d,"olddisplay")&&e==="none"&&(e=d.style.display=""),(e===""&&f.css(d,"display")==="none"||!f.contains(d.ownerDocument.documentElement,d))&&f._data(d,"olddisplay",cu(d.nodeName)));for(g=0;g<h;g++){d=this[g];if(d.style){e=d.style.display;if(e===""||e==="none")d.style.display=f._data(d,"olddisplay")||""}}return this},hide:function(a,b,c){if(a||a===0)return this.animate(ct("hide",3),a,b,c);var d,e,g=0,h=this.length;for(;g<h;g++)d=this[g],d.style&&(e=f.css(d,"display"),e!=="none"&&!f._data(d,"olddisplay")&&f._data(d,"olddisplay",e));for(g=0;g<h;g++)this[g].style&&(this[g].style.display="none");return this},_toggle:f.fn.toggle,toggle:function(a,b,c){var d=typeof a=="boolean";return f.isFunction(a)&&f.isFunction(b)?this._toggle.apply(this,arguments):a==null||d?this.each(function(){var b=d?a:f(this).is(":hidden");f(this)[b?"show":"hide"]()}):this.animate(ct("toggle",3),a,b,c),this},fadeTo:function(a,b,c,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){function g(){e.queue===!1&&f._mark(this);var b=f.extend({},e),c=this.nodeType===1,d=c&&f(this).is(":hidden"),g,h,i,j,k,l,m,n,o,p,q;b.animatedProperties={};

for(i in a){g=f.camelCase(i),i!==g&&(a[g]=a[i],delete a[i]);if((k=f.cssHooks[g])&&"expand"in k){l=k.expand(a[g]),delete a[g];for(i in l)i in a||(a[i]=l[i])}}for(g in a){h=a[g],f.isArray(h)?(b.animatedProperties[g]=h[1],h=a[g]=h[0]):b.animatedProperties[g]=b.specialEasing&&b.specialEasing[g]||b.easing||"swing";if(h==="hide"&&d||h==="show"&&!d)return b.complete.call(this);c&&(g==="height"||g==="width")&&(b.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],f.css(this,"display")==="inline"&&f.css(this,"float")==="none"&&(!f.support.inlineBlockNeedsLayout||cu(this.nodeName)==="inline"?this.style.display="inline-block":this.style.zoom=1))}b.overflow!=null&&(this.style.overflow="hidden");for(i in a)j=new f.fx(this,b,i),h=a[i],cm.test(h)?(q=f._data(this,"toggle"+i)||(h==="toggle"?d?"show":"hide":0),q?(f._data(this,"toggle"+i,q==="show"?"hide":"show"),j[q]()):j[h]()):(m=cn.exec(h),n=j.cur(),m?(o=parseFloat(m[2]),p=m[3]||(f.cssNumber[i]?"":"px"),p!=="px"&&(f.style(this,i,(o||1)+p),n=(o||1)/j.cur()*n,f.style(this,i,n+p)),m[1]&&(o=(m[1]==="-="?-1:1)*o+n),j.custom(n,o,p)):j.custom(n,h,""));return!0}var e=f.speed(b,c,d);return f.isEmptyObject(a)?this.each(e.complete,[!1]):(a=f.extend({},a),e.queue===!1?this.each(g):this.queue(e.queue,g))},stop:function(a,c,d){return typeof a!="string"&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){function h(a,b,c){var e=b[c];f.removeData(a,c,!0),e.stop(d)}var b,c=!1,e=f.timers,g=f._data(this);d||f._unmark(!0,this);if(a==null)for(b in g)g[b]&&g[b].stop&&b.indexOf(".run")===b.length-4&&h(this,g,b);else g[b=a+".run"]&&g[b].stop&&h(this,g,b);for(b=e.length;b--;)e[b].elem===this&&(a==null||e[b].queue===a)&&(d?e[b](!0):e[b].saveState(),c=!0,e.splice(b,1));(!d||!c)&&f.dequeue(this,a)})}}),f.each({slideDown:ct("show",1),slideUp:ct("hide",1),slideToggle:ct("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){f.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),f.extend({speed:function(a,b,c){var d=a&&typeof a=="object"?f.extend({},a):{complete:c||!c&&b||f.isFunction(a)&&a,duration:a,easing:c&&b||b&&!f.isFunction(b)&&b};

d.duration=f.fx.off?0:typeof d.duration=="number"?d.duration:d.duration in f.fx.speeds?f.fx.speeds[d.duration]:f.fx.speeds._default;if(d.queue==null||d.queue===!0)d.queue="fx";return d.old=d.complete,d.complete=function(a){f.isFunction(d.old)&&d.old.call(this),d.queue?f.dequeue(this,d.queue):a!==!1&&f._unmark(this)},d},easing:{linear:function(a){return a},swing:function(a){return-Math.cos(a*Math.PI)/2+.5}},timers:[],fx:function(a,b,c){this.options=b,this.elem=a,this.prop=c,b.orig=b.orig||{}}}),f.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(f.fx.step[this.prop]||f.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]==null||!!this.elem.style&&this.elem.style[this.prop]!=null){var a,b=f.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?!b||b==="auto"?0:b:a}return this.elem[this.prop]},custom:function(a,c,d){function h(a){return e.step(a)}var e=this,g=f.fx;this.startTime=cq||cr(),this.end=c,this.now=this.start=a,this.pos=this.state=0,this.unit=d||this.unit||(f.cssNumber[this.prop]?"":"px"),h.queue=this.options.queue,h.elem=this.elem,h.saveState=function(){f._data(e.elem,"fxshow"+e.prop)===b&&(e.options.hide?f._data(e.elem,"fxshow"+e.prop,e.start):e.options.show&&f._data(e.elem,"fxshow"+e.prop,e.end))},h()&&f.timers.push(h)&&!co&&(co=setInterval(g.tick,g.interval))},show:function(){var a=f._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=a||f.style(this.elem,this.prop),this.options.show=!0,a!==b?this.custom(this.cur(),a):this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),f(this.elem).show()},hide:function(){this.options.orig[this.prop]=f._data(this.elem,"fxshow"+this.prop)||f.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(a){var b,c,d,e=cq||cr(),g=!0,h=this.elem,i=this.options;if(a||e>=i.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),i.animatedProperties[this.prop]=!0;for(b in i.animatedProperties)i.animatedProperties[b]!==!0&&(g=!1);if(g){i.overflow!=null&&!f.support.shrinkWrapBlocks&&f.each(["","X","Y"],function(a,b){h.style["overflow"+b]=i.overflow[a]}),i.hide&&f(h).hide();if(i.hide||i.show)for(b in i.animatedProperties)f.style(h,b,i.orig[b]),f.removeData(h,"fxshow"+b,!0),f.removeData(h,"toggle"+b,!0);d=i.complete,d&&(i.complete=!1,d.call(h))}return!1}return i.duration==Infinity?this.now=e:(c=e-this.startTime,this.state=c/i.duration,this.pos=f.easing[i.animatedProperties[this.prop]](this.state,c,0,1,i.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update(),!0}},f.extend(f.fx,{tick:function(){var a,b=f.timers,c=0;for(;c<b.length;c++)a=b[c],!a()&&b[c]===a&&b.splice(c--,1);b.length||f.fx.stop()},interval:13,stop:function(){clearInterval(co),co=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){f.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&a.elem.style[a.prop]!=null?a.elem.style[a.prop]=a.now+a.unit:a.elem[a.prop]=a.now}}}),f.each(cp.concat.apply([],cp),function(a,b){b.indexOf("margin")&&(f.fx.step[b]=function(a){f.style(a.elem,b,Math.max(0,a.now)+a.unit)})}),f.expr&&f.expr.filters&&(f.expr.filters.animated=function(a){return f.grep(f.timers,function(b){return a===b.elem}).length});var cv,cw=/^t(?:able|d|h)$/i,cx=/^(?:body|html)$/i;"getBoundingClientRect"in c.documentElement?cv=function(a,b,c,d){try{d=a.getBoundingClientRect()}catch(e){}if(!d||!f.contains(c,a))return d?{top:d.top,left:d.left}:{top:0,left:0};

var g=b.body,h=cy(b),i=c.clientTop||g.clientTop||0,j=c.clientLeft||g.clientLeft||0,k=h.pageYOffset||f.support.boxModel&&c.scrollTop||g.scrollTop,l=h.pageXOffset||f.support.boxModel&&c.scrollLeft||g.scrollLeft,m=d.top+k-i,n=d.left+l-j;return{top:m,left:n}}:cv=function(a,b,c){var d,e=a.offsetParent,g=a,h=b.body,i=b.defaultView,j=i?i.getComputedStyle(a,null):a.currentStyle,k=a.offsetTop,l=a.offsetLeft;while((a=a.parentNode)&&a!==h&&a!==c){if(f.support.fixedPosition&&j.position==="fixed")break;d=i?i.getComputedStyle(a,null):a.currentStyle,k-=a.scrollTop,l-=a.scrollLeft,a===e&&(k+=a.offsetTop,l+=a.offsetLeft,f.support.doesNotAddBorder&&(!f.support.doesAddBorderForTableAndCells||!cw.test(a.nodeName))&&(k+=parseFloat(d.borderTopWidth)||0,l+=parseFloat(d.borderLeftWidth)||0),g=e,e=a.offsetParent),f.support.subtractsBorderForOverflowNotVisible&&d.overflow!=="visible"&&(k+=parseFloat(d.borderTopWidth)||0,l+=parseFloat(d.borderLeftWidth)||0),j=d}if(j.position==="relative"||j.position==="static")k+=h.offsetTop,l+=h.offsetLeft;return f.support.fixedPosition&&j.position==="fixed"&&(k+=Math.max(c.scrollTop,h.scrollTop),l+=Math.max(c.scrollLeft,h.scrollLeft)),{top:k,left:l}},f.fn.offset=function(a){if(arguments.length)return a===b?this:this.each(function(b){f.offset.setOffset(this,a,b)});var c=this[0],d=c&&c.ownerDocument;return d?c===d.body?f.offset.bodyOffset(c):cv(c,d,d.documentElement):null},f.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;return f.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(f.css(a,"marginTop"))||0,c+=parseFloat(f.css(a,"marginLeft"))||0),{top:b,left:c}},setOffset:function(a,b,c){var d=f.css(a,"position");d==="static"&&(a.style.position="relative");var e=f(a),g=e.offset(),h=f.css(a,"top"),i=f.css(a,"left"),j=(d==="absolute"||d==="fixed")&&f.inArray("auto",[h,i])>-1,k={},l={},m,n;j?(l=e.position(),m=l.top,n=l.left):(m=parseFloat(h)||0,n=parseFloat(i)||0),f.isFunction(b)&&(b=b.call(a,c,g)),b.top!=null&&(k.top=b.top-g.top+m),b.left!=null&&(k.left=b.left-g.left+n),"using"in b?b.using.call(a,k):e.css(k)}},f.fn.extend({position:function(){if(!this[0])return null;var a=this[0],b=this.offsetParent(),c=this.offset(),d=cx.test(b[0].nodeName)?{top:0,left:0}:b.offset();return c.top-=parseFloat(f.css(a,"marginTop"))||0,c.left-=parseFloat(f.css(a,"marginLeft"))||0,d.top+=parseFloat(f.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat(f.css(b[0],"borderLeftWidth"))||0,{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||c.body;while(a&&!cx.test(a.nodeName)&&f.css(a,"position")==="static")a=a.offsetParent;return a})}}),f.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var d=/Y/.test(c);f.fn[a]=function(e){return f.access(this,function(a,e,g){var h=cy(a);if(g===b)return h?c in h?h[c]:f.support.boxModel&&h.document.documentElement[e]||h.document.body[e]:a[e];h?h.scrollTo(d?f(h).scrollLeft():g,d?g:f(h).scrollTop()):a[e]=g},a,e,arguments.length,null)}}),f.each({Height:"height",Width:"width"},function(a,c){var d="client"+a,e="scroll"+a,g="offset"+a;f.fn["inner"+a]=function(){var a=this[0];return a?a.style?parseFloat(f.css(a,c,"padding")):this[c]():null},f.fn["outer"+a]=function(a){var b=this[0];return b?b.style?parseFloat(f.css(b,c,a?"margin":"border")):this[c]():null},f.fn[c]=function(a){return f.access(this,function(a,c,h){var i,j,k,l;if(f.isWindow(a))return i=a.document,j=i.documentElement[d],f.support.boxModel&&j||i.body&&i.body[d]||j;if(a.nodeType===9)return i=a.documentElement,i[d]>=i[e]?i[d]:Math.max(a.body[e],i[e],a.body[g],i[g]);if(h===b)return k=f.css(a,c),l=parseFloat(k),f.isNumeric(l)?l:k;f(a).css(c,h)},c,a,arguments.length,null)}}),a.jQuery=a.$=f,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return f})})(window),function(){function a(b,c,d){if(b===c)return b!==0||1/b==1/c;if(b==null||c==null)return b===c;b._chain&&(b=b._wrapped),c._chain&&(c=c._wrapped);if(b.isEqual&&v.isFunction(b.isEqual))return b.isEqual(c);if(c.isEqual&&v.isFunction(c.isEqual))return c.isEqual(b);var e=i.call(b);if(e!=i.call(c))return!1;switch(e){case"[object String]":return b==String(c);case"[object Number]":return b!=+b?c!=+c:b==0?1/b==1/c:b==+c;case"[object Date]":case"[object Boolean]":return+b==+c;case"[object RegExp]":return b.source==c.source&&b.global==c.global&&b.multiline==c.multiline&&b.ignoreCase==c.ignoreCase}if(typeof b!="object"||typeof c!="object")return!1;for(var f=d.length;f--;)if(d[f]==b)return!0;d.push(b);var f=0,g=!0;if(e=="[object Array]"){if(f=b.length,g=f==c.length)for(;f--;)if(!(g=f in b==f in c&&a(b[f],c[f],d)))break}else{if("constructor"in b!="constructor"in c||b.constructor!=c.constructor)return!1;for(var h in b)if(v.has(b,h)&&(f++,!(g=v.has(c,h)&&a(b[h],c[h],d))))break;if(g){for(h in c)if(v.has(c,h)&&!(f--))break;g=!f}}return d.pop(),g}var b=this,c=b._,d={},e=Array.prototype,f=Object.prototype,g=e.slice,h=e.unshift,i=f.toString,j=f.hasOwnProperty,k=e.forEach,l=e.map,m=e.reduce,n=e.reduceRight,o=e.filter,p=e.every,q=e.some,r=e.indexOf,s=e.lastIndexOf,f=Array.isArray,t=Object.keys,u=Function.prototype.bind,v=function(a){return new C(a)};

typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=v),exports._=v):b._=v,v.VERSION="1.3.1";var w=v.each=v.forEach=function(a,b,c){if(a!=null)if(k&&a.forEach===k)a.forEach(b,c);else if(a.length===+a.length){for(var e=0,f=a.length;e<f;e++)if(e in a&&b.call(c,a[e],e,a)===d)break}else for(e in a)if(v.has(a,e)&&b.call(c,a[e],e,a)===d)break};

v.map=v.collect=function(a,b,c){var d=[];return a==null?d:l&&a.map===l?a.map(b,c):(w(a,function(a,e,f){d[d.length]=b.call(c,a,e,f)}),a.length===+a.length&&(d.length=a.length),d)},v.reduce=v.foldl=v.inject=function(a,b,c,d){var e=arguments.length>2;a==null&&(a=[]);if(m&&a.reduce===m)return d&&(b=v.bind(b,d)),e?a.reduce(b,c):a.reduce(b);w(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)});if(!e)throw new TypeError("Reduce of empty array with no initial value");return c},v.reduceRight=v.foldr=function(a,b,c,d){var e=arguments.length>2;a==null&&(a=[]);if(n&&a.reduceRight===n)return d&&(b=v.bind(b,d)),e?a.reduceRight(b,c):a.reduceRight(b);var f=v.toArray(a).reverse();return d&&!e&&(b=v.bind(b,d)),e?v.reduce(f,b,c,d):v.reduce(f,b)},v.find=v.detect=function(a,b,c){var d;return x(a,function(a,e,f){if(b.call(c,a,e,f))return d=a,!0}),d},v.filter=v.select=function(a,b,c){var d=[];return a==null?d:o&&a.filter===o?a.filter(b,c):(w(a,function(a,e,f){b.call(c,a,e,f)&&(d[d.length]=a)}),d)},v.reject=function(a,b,c){var d=[];return a==null?d:(w(a,function(a,e,f){b.call(c,a,e,f)||(d[d.length]=a)}),d)},v.every=v.all=function(a,b,c){var e=!0;return a==null?e:p&&a.every===p?a.every(b,c):(w(a,function(a,f,g){if(!(e=e&&b.call(c,a,f,g)))return d}),e)};

var x=v.some=v.any=function(a,b,c){b||(b=v.identity);var e=!1;return a==null?e:q&&a.some===q?a.some(b,c):(w(a,function(a,f,g){if(e||(e=b.call(c,a,f,g)))return d}),!!e)};

v.include=v.contains=function(a,b){var c=!1;return a==null?c:r&&a.indexOf===r?a.indexOf(b)!=-1:c=x(a,function(a){return a===b})},v.invoke=function(a,b){var c=g.call(arguments,2);return v.map(a,function(a){return(v.isFunction(b)?b||a:a[b]).apply(a,c)})},v.pluck=function(a,b){return v.map(a,function(a){return a[b]})},v.max=function(a,b,c){if(!b&&v.isArray(a))return Math.max.apply(Math,a);if(!b&&v.isEmpty(a))return-Infinity;var d={computed:-Infinity};

return w(a,function(a,e,f){e=b?b.call(c,a,e,f):a,e>=d.computed&&(d={value:a,computed:e})}),d.value},v.min=function(a,b,c){if(!b&&v.isArray(a))return Math.min.apply(Math,a);if(!b&&v.isEmpty(a))return Infinity;var d={computed:Infinity};

return w(a,function(a,e,f){e=b?b.call(c,a,e,f):a,e<d.computed&&(d={value:a,computed:e})}),d.value},v.shuffle=function(a){var b=[],c;return w(a,function(a,d){d==0?b[0]=a:(c=Math.floor(Math.random()*(d+1)),b[d]=b[c],b[c]=a)}),b},v.sortBy=function(a,b,c){return v.pluck(v.map(a,function(a,d,e){return{value:a,criteria:b.call(c,a,d,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;return c<d?-1:c>d?1:0}),"value")},v.groupBy=function(a,b){var c={},d=v.isFunction(b)?b:function(a){return a[b]};

return w(a,function(a,b){var e=d(a,b);(c[e]||(c[e]=[])).push(a)}),c},v.sortedIndex=function(a,b,c){c||(c=v.identity);for(var d=0,e=a.length;d<e;){var f=d+e>>1;c(a[f])<c(b)?d=f+1:e=f}return d},v.toArray=function(a){return a?a.toArray?a.toArray():v.isArray(a)?g.call(a):v.isArguments(a)?g.call(a):v.values(a):[]},v.size=function(a){return v.toArray(a).length},v.first=v.head=function(a,b,c){return b!=null&&!c?g.call(a,0,b):a[0]},v.initial=function(a,b,c){return g.call(a,0,a.length-(b==null||c?1:b))},v.last=function(a,b,c){return b!=null&&!c?g.call(a,Math.max(a.length-b,0)):a[a.length-1]},v.rest=v.tail=function(a,b,c){return g.call(a,b==null||c?1:b)},v.compact=function(a){return v.filter(a,function(a){return!!a})},v.flatten=function(a,b){return v.reduce(a,function(a,c){return v.isArray(c)?a.concat(b?c:v.flatten(c)):(a[a.length]=c,a)},[])},v.without=function(a){return v.difference(a,g.call(arguments,1))},v.uniq=v.unique=function(a,b,c){var c=c?v.map(a,c):a,d=[];return v.reduce(c,function(c,e,f){if(0==f||(b===!0?v.last(c)!=e:!v.include(c,e)))c[c.length]=e,d[d.length]=a[f];return c},[]),d},v.union=function(){return v.uniq(v.flatten(arguments,!0))},v.intersection=v.intersect=function(a){var b=g.call(arguments,1);return v.filter(v.uniq(a),function(a){return v.every(b,function(b){return v.indexOf(b,a)>=0})})},v.difference=function(a){var b=v.flatten(g.call(arguments,1));return v.filter(a,function(a){return!v.include(b,a)})},v.zip=function(){for(var a=g.call(arguments),b=v.max(v.pluck(a,"length")),c=Array(b),d=0;d<b;d++)c[d]=v.pluck(a,""+d);return c},v.indexOf=function(a,b,c){if(a==null)return-1;var d;if(c)return c=v.sortedIndex(a,b),a[c]===b?c:-1;if(r&&a.indexOf===r)return a.indexOf(b);for(c=0,d=a.length;c<d;c++)if(c in a&&a[c]===b)return c;return-1},v.lastIndexOf=function(a,b){if(a==null)return-1;if(s&&a.lastIndexOf===s)return a.lastIndexOf(b);for(var c=a.length;c--;)if(c in a&&a[c]===b)return c;return-1},v.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0);for(var c=arguments[2]||1,d=Math.max(Math.ceil((b-a)/c),0),e=0,f=Array(d);e<d;)f[e++]=a,a+=c;return f};

var y=function(){};

v.bind=function(a,b){var c,d;if(a.bind===u&&u)return u.apply(a,g.call(arguments,1));if(!v.isFunction(a))throw new TypeError;return d=g.call(arguments,2),c=function(){if(this instanceof c){y.prototype=a.prototype;var e=new y,f=a.apply(e,d.concat(g.call(arguments)));return Object(f)===f?f:e}return a.apply(b,d.concat(g.call(arguments)))}},v.bindAll=function(a){var b=g.call(arguments,1);return b.length==0&&(b=v.functions(a)),w(b,function(b){a[b]=v.bind(a[b],a)}),a},v.memoize=function(a,b){var c={};

return b||(b=v.identity),function(){var d=b.apply(this,arguments);return v.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}},v.delay=function(a,b){var c=g.call(arguments,2);return setTimeout(function(){return a.apply(a,c)},b)},v.defer=function(a){return v.delay.apply(v,[a,1].concat(g.call(arguments,1)))},v.throttle=function(a,b){var c,d,e,f,g,h=v.debounce(function(){g=f=!1},b);return function(){c=this,d=arguments;var i;e||(e=setTimeout(function(){e=null,g&&a.apply(c,d),h()},b)),f?g=!0:a.apply(c,d),h(),f=!0}},v.debounce=function(a,b){var c;return function(){var d=this,e=arguments;clearTimeout(c),c=setTimeout(function(){c=null,a.apply(d,e)},b)}},v.once=function(a){var b=!1,c;return function(){return b?c:(b=!0,c=a.apply(this,arguments))}},v.wrap=function(a,b){return function(){var c=[a].concat(g.call(arguments,0));return b.apply(this,c)}},v.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},v.after=function(a,b){return a<=0?b():function(){if(--a<1)return b.apply(this,arguments)}},v.keys=t||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[],c;for(c in a)v.has(a,c)&&(b[b.length]=c);return b},v.values=function(a){return v.map(a,v.identity)},v.functions=v.methods=function(a){var b=[],c;for(c in a)v.isFunction(a[c])&&b.push(c);return b.sort()},v.extend=function(a){return w(g.call(arguments,1),function(b){for(var c in b)a[c]=b[c]}),a},v.defaults=function(a){return w(g.call(arguments,1),function(b){for(var c in b)a[c]==null&&(a[c]=b[c])}),a},v.clone=function(a){return v.isObject(a)?v.isArray(a)?a.slice():v.extend({},a):a},v.tap=function(a,b){return b(a),a},v.isEqual=function(b,c){return a(b,c,[])},v.isEmpty=function(a){if(v.isArray(a)||v.isString(a))return a.length===0;for(var b in a)if(v.has(a,b))return!1;return!0},v.isElement=function(a){return!!a&&a.nodeType==1},v.isArray=f||function(a){return i.call(a)=="[object Array]"},v.isObject=function(a){return a===Object(a)},v.isArguments=function(a){return i.call(a)=="[object Arguments]"},v.isArguments(arguments)||(v.isArguments=function(a){return!!a&&!!v.has(a,"callee")}),v.isFunction=function(a){return i.call(a)=="[object Function]"},v.isString=function(a){return i.call(a)=="[object String]"},v.isNumber=function(a){return i.call(a)=="[object Number]"},v.isNaN=function(a){return a!==a},v.isBoolean=function(a){return a===!0||a===!1||i.call(a)=="[object Boolean]"},v.isDate=function(a){return i.call(a)=="[object Date]"},v.isRegExp=function(a){return i.call(a)=="[object RegExp]"},v.isNull=function(a){return a===null},v.isUndefined=function(a){return a===void 0},v.has=function(a,b){return j.call(a,b)},v.noConflict=function(){return b._=c,this},v.identity=function(a){return a},v.times=function(a,b,c){for(var d=0;d<a;d++)b.call(c,d)},v.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},v.mixin=function(a){w(v.functions(a),function(b){E(b,v[b]=a[b])})};

var z=0;v.uniqueId=function(a){var b=z++;return a?a+b:b},v.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};

var A=/.^/,B=function(a){return a.replace(/\\\\/g,"\\").replace(/\\'/g,"'")};

v.template=function(a,b){var c=v.templateSettings,c="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+a.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(c.escape||A,function(a,b){return"',_.escape("+B(b)+"),'"}).replace(c.interpolate||A,function(a,b){return"',"+B(b)+",'"}).replace(c.evaluate||A,function(a,b){return"');"+B(b).replace(/[\r\n\t]/g," ")+";__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');",d=new Function("obj","_",c);return b?d(b,v):function(a){return d.call(this,a,v)}},v.chain=function(a){return v(a).chain()};

var C=function(a){this._wrapped=a};

v.prototype=C.prototype;var D=function(a,b){return b?v(a).chain():a},E=function(a,b){C.prototype[a]=function(){var a=g.call(arguments);return h.call(a,this._wrapped),D(b.apply(v,a),this._chain)}};

v.mixin(v),w("pop,push,reverse,shift,sort,splice,unshift".split(","),function(a){var b=e[a];C.prototype[a]=function(){var c=this._wrapped;b.apply(c,arguments);var d=c.length;return(a=="shift"||a=="splice")&&d===0&&delete c[0],D(c,this._chain)}}),w(["concat","join","slice"],function(a){var b=e[a];C.prototype[a]=function(){return D(b.apply(this._wrapped,arguments),this._chain)}}),C.prototype.chain=function(){return this._chain=!0,this},C.prototype.value=function(){return this._wrapped},typeof define=="function"&&define.amd&&define("underscore",[],function(){return v})}.call(this),function(a,b){typeof exports!="undefined"?b(a,exports,require("underscore")):typeof define=="function"&&define.amd?define("backbone",["underscore","jquery","exports"],function(c,d,e){a.Backbone=b(a,e,c,d)}):a.Backbone=b(a,{},a._,a.jQuery||a.Zepto||a.ender)}(this,function(a,b,c,d){var e=a.Backbone,f=Array.prototype.slice,g=Array.prototype.splice;b.VERSION="0.9.2",b.setDomLibrary=function(a){d=a},b.noConflict=function(){return a.Backbone=e,b},b.emulateHTTP=!1,b.emulateJSON=!1;var h=/\s+/,i=b.Events={on:function(a,b,c){var d,e,f,g,i;if(!b)return this;a=a.split(h),d=this._callbacks||(this._callbacks={});while(e=a.shift())i=d[e],f=i?i.tail:{},f.next=g={},f.context=c,f.callback=b,d[e]={tail:g,next:i?i.next:f};

return this},off:function(a,b,d){var e,f,g,i,j,k;if(!(f=this._callbacks))return;if(!(a||b||d))return delete this._callbacks,this;a=a?a.split(h):c.keys(f);while(e=a.shift()){g=f[e],delete f[e];if(!g||!b&&!d)continue;i=g.tail;while((g=g.next)!==i)j=g.callback,k=g.context,(b&&j!==b||d&&k!==d)&&this.on(e,j,k)}return this},trigger:function(a){var b,c,d,e,g,i,j;if(!(d=this._callbacks))return this;i=d.all,a=a.split(h),j=f.call(arguments,1);while(b=a.shift()){if(c=d[b]){e=c.tail;while((c=c.next)!==e)c.callback.apply(c.context||this,j)}if(c=i){e=c.tail,g=[b].concat(j);while((c=c.next)!==e)c.callback.apply(c.context||this,g)}}return this}};

i.bind=i.on,i.unbind=i.off;var j=b.Model=function(a,b){var d;a||(a={}),b&&b.parse&&(a=this.parse(a));if(d=A(this,"defaults"))a=c.extend({},d,a);b&&b.collection&&(this.collection=b.collection),this.attributes={},this._escapedAttributes={},this.cid=c.uniqueId("c"),this.changed={},this._silent={},this._pending={},this.set(a,{silent:!0}),this.changed={},this._silent={},this._pending={},this._previousAttributes=c.clone(this.attributes),this.initialize.apply(this,arguments)};

c.extend(j.prototype,i,{changed:null,_silent:null,_pending:null,idAttribute:"id",initialize:function(){},toJSON:function(a){return c.clone(this.attributes)},get:function(a){return this.attributes[a]},escape:function(a){var b;if(b=this._escapedAttributes[a])return b;var d=this.get(a);return this._escapedAttributes[a]=c.escape(d==null?"":""+d)},has:function(a){return this.get(a)!=null},set:function(a,b,d){var e,f,g;c.isObject(a)||a==null?(e=a,d=b):(e={},e[a]=b),d||(d={});if(!e)return this;e instanceof j&&(e=e.attributes);if(d.unset)for(f in e)e[f]=void 0;if(!this._validate(e,d))return!1;this.idAttribute in e&&(this.id=e[this.idAttribute]);var h=d.changes={},i=this.attributes,k=this._escapedAttributes,l=this._previousAttributes||{};

for(f in e){g=e[f];if(!c.isEqual(i[f],g)||d.unset&&c.has(i,f))delete k[f],(d.silent?this._silent:h)[f]=!0;d.unset?delete i[f]:i[f]=g,!c.isEqual(l[f],g)||c.has(i,f)!=c.has(l,f)?(this.changed[f]=g,d.silent||(this._pending[f]=!0)):(delete this.changed[f],delete this._pending[f])}return d.silent||this.change(d),this},unset:function(a,b){return(b||(b={})).unset=!0,this.set(a,null,b)},clear:function(a){return(a||(a={})).unset=!0,this.set(c.clone(this.attributes),a)},fetch:function(a){a=a?c.clone(a):{};

var d=this,e=a.success;return a.success=function(b,c,f){if(!d.set(d.parse(b,f),a))return!1;e&&e(d,b)},a.error=b.wrapError(a.error,d,a),(this.sync||b.sync).call(this,"read",this,a)},save:function(a,d,e){var f,g;c.isObject(a)||a==null?(f=a,e=d):(f={},f[a]=d),e=e?c.clone(e):{};

if(e.wait){if(!this._validate(f,e))return!1;g=c.clone(this.attributes)}var h=c.extend({},e,{silent:!0});if(f&&!this.set(f,e.wait?h:e))return!1;var i=this,j=e.success;e.success=function(a,b,d){var g=i.parse(a,d);e.wait&&(delete e.wait,g=c.extend(f||{},g));if(!i.set(g,e))return!1;j?j(i,a):i.trigger("sync",i,a,e)},e.error=b.wrapError(e.error,i,e);var k=this.isNew()?"create":"update",l=(this.sync||b.sync).call(this,k,this,e);return e.wait&&this.set(g,h),l},destroy:function(a){a=a?c.clone(a):{};

var d=this,e=a.success,f=function(){d.trigger("destroy",d,d.collection,a)};

if(this.isNew())return f(),!1;a.success=function(b){a.wait&&f(),e?e(d,b):d.trigger("sync",d,b,a)},a.error=b.wrapError(a.error,d,a);var g=(this.sync||b.sync).call(this,"delete",this,a);return a.wait||f(),g},url:function(){var a=A(this,"urlRoot")||A(this.collection,"url")||B();return this.isNew()?a:a+(a.charAt(a.length-1)=="/"?"":"/")+encodeURIComponent(this.id)},parse:function(a,b){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},change:function(a){a||(a={});var b=this._changing;this._changing=!0;for(var d in this._silent)this._pending[d]=!0;var e=c.extend({},a.changes,this._silent);this._silent={};

for(var d in e)this.trigger("change:"+d,this,this.get(d),a);if(b)return this;while(!c.isEmpty(this._pending)){this._pending={},this.trigger("change",this,a);for(var d in this.changed){if(this._pending[d]||this._silent[d])continue;delete this.changed[d]}this._previousAttributes=c.clone(this.attributes)}return this._changing=!1,this},hasChanged:function(a){return arguments.length?c.has(this.changed,a):!c.isEmpty(this.changed)},changedAttributes:function(a){if(!a)return this.hasChanged()?c.clone(this.changed):!1;var b,d=!1,e=this._previousAttributes;for(var f in a){if(c.isEqual(e[f],b=a[f]))continue;(d||(d={}))[f]=b}return d},previous:function(a){return!arguments.length||!this._previousAttributes?null:this._previousAttributes[a]},previousAttributes:function(){return c.clone(this._previousAttributes)},isValid:function(){return!this.validate(this.attributes)},_validate:function(a,b){if(b.silent||!this.validate)return!0;a=c.extend({},this.attributes,a);var d=this.validate(a,b);return d?(b&&b.error?b.error(this,d,b):this.trigger("error",this,d,b),!1):!0}});var k=b.Collection=function(a,b){b||(b={}),b.model&&(this.model=b.model),b.comparator&&(this.comparator=b.comparator),this._reset(),this.initialize.apply(this,arguments),a&&this.reset(a,{silent:!0,parse:b.parse})};

c.extend(k.prototype,i,{model:j,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},add:function(a,b){var d,e,f,h,i,j,k={},l={},m=[];b||(b={}),a=c.isArray(a)?a.slice():[a];for(d=0,f=a.length;d<f;d++){if(!(h=a[d]=this._prepareModel(a[d],b)))throw new Error("Can't add an invalid model to a collection");i=h.cid,j=h.id;if(k[i]||this._byCid[i]||j!=null&&(l[j]||this._byId[j])){m.push(d);continue}k[i]=l[j]=h}d=m.length;while(d--)a.splice(m[d],1);for(d=0,f=a.length;d<f;d++)(h=a[d]).on("all",this._onModelEvent,this),this._byCid[h.cid]=h,h.id!=null&&(this._byId[h.id]=h);this.length+=f,e=b.at!=null?b.at:this.models.length,g.apply(this.models,[e,0].concat(a)),this.comparator&&this.sort({silent:!0});if(b.silent)return this;for(d=0,f=this.models.length;d<f;d++){if(!k[(h=this.models[d]).cid])continue;b.index=d,h.trigger("add",h,this,b)}return this},remove:function(a,b){var d,e,f,g;b||(b={}),a=c.isArray(a)?a.slice():[a];for(d=0,e=a.length;d<e;d++){g=this.getByCid(a[d])||this.get(a[d]);if(!g)continue;delete this._byId[g.id],delete this._byCid[g.cid],f=this.indexOf(g),this.models.splice(f,1),this.length--,b.silent||(b.index=f,g.trigger("remove",g,this,b)),this._removeReference(g)}return this},push:function(a,b){return a=this._prepareModel(a,b),this.add(a,b),a},pop:function(a){var b=this.at(this.length-1);return this.remove(b,a),b},unshift:function(a,b){return a=this._prepareModel(a,b),this.add(a,c.extend({at:0},b)),a},shift:function(a){var b=this.at(0);return this.remove(b,a),b},get:function(a){return a==null?void 0:this._byId[a.id!=null?a.id:a]},getByCid:function(a){return a&&this._byCid[a.cid||a]},at:function(a){return this.models[a]},where:function(a){return c.isEmpty(a)?[]:this.filter(function(b){for(var c in a)if(a[c]!==b.get(c))return!1;return!0})},sort:function(a){a||(a={});if(!this.comparator)throw new Error("Cannot sort a set without a comparator");var b=c.bind(this.comparator,this);return this.comparator.length==1?this.models=this.sortBy(b):this.models.sort(b),a.silent||this.trigger("reset",this,a),this},pluck:function(a){return c.map(this.models,function(b){return b.get(a)})},reset:function(a,b){a||(a=[]),b||(b={});for(var d=0,e=this.models.length;d<e;d++)this._removeReference(this.models[d]);return this._reset(),this.add(a,c.extend({silent:!0},b)),b.silent||this.trigger("reset",this,b),this},fetch:function(a){a=a?c.clone(a):{},a.parse===undefined&&(a.parse=!0);var d=this,e=a.success;return a.success=function(b,c,f){d[a.add?"add":"reset"](d.parse(b,f),a),e&&e(d,b)},a.error=b.wrapError(a.error,d,a),(this.sync||b.sync).call(this,"read",this,a)},create:function(a,b){var d=this;b=b?c.clone(b):{},a=this._prepareModel(a,b);if(!a)return!1;b.wait||d.add(a,b);var e=b.success;return b.success=function(c,f,g){b.wait&&d.add(c,b),e?e(c,f):c.trigger("sync",a,f,b)},a.save(null,b),a},parse:function(a,b){return a},chain:function(){return c(this.models).chain()},_reset:function(a){this.length=0,this.models=[],this._byId={},this._byCid={}},_prepareModel:function(a,b){b||(b={});if(a instanceof j)a.collection||(a.collection=this);else{var c=a;b.collection=this,a=new this.model(c,b),a._validate(a.attributes,b)||(a=!1)}return a},_removeReference:function(a){this==a.collection&&delete a.collection,a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){if(a!="add"&&a!="remove"||c==this)a=="destroy"&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&(delete this._byId[b.previous(b.idAttribute)],this._byId[b.id]=b),this.trigger.apply(this,arguments);else return}});var l=["forEach","each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortBy","sortedIndex","toArray","size","first","initial","rest","last","without","indexOf","shuffle","lastIndexOf","isEmpty","groupBy"];c.each(l,function(a){k.prototype[a]=function(){return c[a].apply(c,[this.models].concat(c.toArray(arguments)))}});var m=b.Router=function(a){a||(a={}),a.routes&&(this.routes=a.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},n=/:\w+/g,o=/\*\w+/g,p=/[-[\]{}()+?.,\\^$|#\s]/g;c.extend(m.prototype,i,{initialize:function(){},route:function(a,d,e){return b.history||(b.history=new q),c.isRegExp(a)||(a=this._routeToRegExp(a)),e||(e=this[d]),b.history.route(a,c.bind(function(c){var f=this._extractParameters(a,c);e&&e.apply(this,f),this.trigger.apply(this,["route:"+d].concat(f)),b.history.trigger("route",this,d,f)},this)),this},navigate:function(a,c){b.history.navigate(a,c)},_bindRoutes:function(){if(!this.routes)return;var a=[];for(var b in this.routes)a.unshift([b,this.routes[b]]);for(var c=0,d=a.length;c<d;c++)this.route(a[c][0],a[c][1],this[a[c][1]])},_routeToRegExp:function(a){return a=a.replace(p,"\\$&").replace(n,"([^/]+)").replace(o,"(.*?)"),new RegExp("^"+a+"$")},_extractParameters:function(a,b){return a.exec(b).slice(1)}});var q=b.History=function(){this.handlers=[],c.bindAll(this,"checkUrl")},r=/^[#\/]/,s=/msie [\w.]+/;q.started=!1,c.extend(q.prototype,i,{interval:50,getHash:function(a){var b=a?a.location:window.location,c=b.href.match(/#(.*)$/);return c?c[1]:""},getFragment:function(a,b){return a==null&&(this._hasPushState||!this._wantsHashChange||b?a=window.location.pathname:a=this.getHash()),a.indexOf(this.options.root)||(a=a.substr(this.options.root.length)),a.replace(r,"")},start:function(a){if(q.started)throw new Error("Backbone.history has already been started");q.started=!0,this.options=c.extend({},{root:"/"},this.options,a),this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&window.history&&window.history.pushState);var b=this.getFragment(),e=document.documentMode,f=s.exec(navigator.userAgent.toLowerCase())&&(!e||e<=7);f&&this._wantsHashChange&&(this.iframe=d('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(b)),this._hasPushState?d(window).bind("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!f?d(window).bind("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=b;var g=window.location,h=g.pathname==this.options.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!h)return this.fragment=this.getFragment(null,!0),window.location.replace(this.options.root+"#"+this.fragment),!0;this._wantsPushState&&this._hasPushState&&h&&g.hash&&(this.fragment=this.getHash().replace(r,""),window.history.replaceState({},document.title,g.protocol+"//"+g.host+this.options.root+this.fragment));if(!this.options.silent)return this.loadUrl()},stop:function(){d(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),q.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(a){var b=this.getFragment();b==this.fragment&&this.iframe&&(b=this.getFragment(this.getHash(this.iframe)));if(b==this.fragment)return!1;this.iframe&&this.navigate(b),this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(a){var b=this.fragment=this.getFragment(a),d=c.any(this.handlers,function(a){if(a.route.test(b))return a.callback(b),!0});return d},navigate:function(a,b){if(!q.started)return!1;if(!b||b===!0)b={trigger:b};

var c=(a||"").replace(r,"");if(this.fragment==c)return;this._hasPushState?(c.indexOf(this.options.root)!=0&&(c=this.options.root+c),this.fragment=c,window.history[b.replace?"replaceState":"pushState"]({},document.title,c)):this._wantsHashChange?(this.fragment=c,this._updateHash(window.location,c,b.replace),this.iframe&&c!=this.getFragment(this.getHash(this.iframe))&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,c,b.replace))):window.location.assign(this.options.root+a),b.trigger&&this.loadUrl(a)},_updateHash:function(a,b,c){c?a.replace(a.toString().replace(/(javascript:|#).*$/,"")+"#"+b):a.hash=b}});var t=b.View=function(a){this.cid=c.uniqueId("view"),this._configure(a||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},u=/^(\S+)\s*(.*)$/,v=["model","collection","el","id","attributes","className","tagName"];c.extend(t.prototype,i,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this},make:function(a,b,c){var e=document.createElement(a);return b&&d(e).attr(b),c!=null&&d(e).html(c),e},setElement:function(a,b){return this.$el&&this.undelegateEvents(),this.$el=a instanceof d?a:d(a),this.el=this.$el[0],b!==!1&&this.delegateEvents(),this},delegateEvents:function(a){if(!a&&!(a=A(this,"events")))return;this.undelegateEvents();for(var b in a){var d=a[b];c.isFunction(d)||(d=this[a[b]]);if(!d)throw new Error('Method "'+a[b]+'" does not exist');var e=b.match(u),f=e[1],g=e[2];d=c.bind(d,this),f+=".delegateEvents"+this.cid,g===""?this.$el.bind(f,d):this.$el.delegate(g,f,d)}},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(a){this.options&&(a=c.extend({},this.options,a));for(var b=0,d=v.length;b<d;b++){var e=v[b];a[e]&&(this[e]=a[e])}this.options=a},_ensureElement:function(){if(!this.el){var a=A(this,"attributes")||{};

this.id&&(a.id=this.id),this.className&&(a["class"]=this.className),this.setElement(this.make(this.tagName,a),!1)}else this.setElement(this.el,!1)}});var w=function(a,b){var c=z(this,a,b);return c.extend=this.extend,c};

j.extend=k.extend=m.extend=t.extend=w;var x={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};

b.sync=function(a,e,f){var g=x[a];f||(f={});var h={type:g,dataType:"json"};

return f.url||(h.url=A(e,"url")||B()),!f.data&&e&&(a=="create"||a=="update")&&(h.contentType="application/json",h.data=JSON.stringify(e.toJSON())),b.emulateJSON&&(h.contentType="application/x-www-form-urlencoded",h.data=h.data?{model:h.data}:{}),b.emulateHTTP&&(g==="PUT"||g==="DELETE")&&(b.emulateJSON&&(h.data._method=g),h.type="POST",h.beforeSend=function(a){a.setRequestHeader("X-HTTP-Method-Override",g)}),h.type!=="GET"&&!b.emulateJSON&&(h.processData=!1),d.ajax(c.extend(h,f))},b.wrapError=function(a,b,c){return function(d,e){e=d===b?e:d,a?a(b,e,c):b.trigger("error",b,e,c)}};

var y=function(){},z=function(a,b,d){var e;return b&&b.hasOwnProperty("constructor")?e=b.constructor:e=function(){a.apply(this,arguments)},c.extend(e,a),y.prototype=a.prototype,e.prototype=new y,b&&c.extend(e.prototype,b),d&&c.extend(e,d),e.prototype.constructor=e,e.__super__=a.prototype,e},A=function(a,b){return!a||!a[b]?null:c.isFunction(a[b])?a[b]():a[b]},B=function(){throw new Error('A "url" property or function must be specified')};

return b}),define("pubsub",["underscore","backbone"],function(a,b){var c=a.extend({},b.Events);c.attach=function(b,c){a.each(b,a.bind(function(a,b){this.on(b,a,c)},this))},c.unattach=function(b,c){a.each(b,a.bind(function(a,b){this.off(b,a,c)},this))};

var d=c.trigger;return c.trigger=function(a){try{d.apply(c,arguments)}catch(b){console.error('PubSub trigger "'+a+'" threw exception: ',b.stack||b.stacktrace||b.message)}return c},c}),define("app",["jquery","underscore","backbone","pubsub"],function($,_,Backbone,PubSub){var AppModel=Backbone.Model.extend({initialize:function(){this.set("DEBUG",!0),this.set("document",$(document)),this.set("win",$(window)),this.set("body",$("body")),this.set("scrollEl",$("html,body")),this.set("doc",$(document)),this.set("navEl",$("#nav")),this.set("headerEl",$("#header")),this.set("breakingEl",$("#breaking")),this.set("breakingWrapEl",$("#breaking-wrap")),this.baseUrl="#"+window.location.host+"/",this.pubSub={"page:load":this.onPageLoad},PubSub.attach(this.pubSub,this)},getPageInfo:function(a){a||(a=$("body"));var b=a.find(".pageinfo.data").text();return $.parseJSON(b)||{}},getPageUrl:function(){return document.location.protocol+"//"+document.location.host+document.location.pathname},onPageLoad:function(a){a&&a.asset_collection?(this.set("collection",a.asset_collection),PubSub.trigger("updateArrowLinks:overlay",!0)):this.set("collection",null)},setCollection:function(a){var b=this.getPageInfo(a);b&&b.asset_collection&&(this.set("collection",b.asset_collection),PubSub.trigger("updateArrowLinks:overlay",!0))},setTrack:function(a,b,c){a&&(b=a.data("ht"),c=a.data("uotrack")),b&&PubSub.trigger("heattrack",b),c&&PubSub.trigger("uotrack",c)},getScrollPosition:function(){return window.pageYOffset||document.body.scrollTop},loadScript:function(scriptUrl,symbol,callback){eval("window."+symbol)?callback():require([scriptUrl],function(){eval("window."+symbol)?callback():console.error("Error loading "+scriptUrl)})},openPopup:function(a,b,c){b=b||600,c=c||400;var d=this.popupCoords(b,c);window.open(a,"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height="+c+",width="+b+",top="+d.top+",left="+d.left)},popupCoords:function(a,b){var c=window.screenLeft?window.screenLeft:window.screenX,d=window.screenTop?window.screenTop:window.screenY,e=window.outerWidth?window.outerWidth:document.documentElement.clientWidth,f=window.outerHeight?window.outerHeight:document.documentElement.clientHeight;return{left:c+e/2-a/2,top:d+f/2-b/2-25}},getDefinedRoute:function(a){if(a==="#")return null;if(!a.indexOf(this.baseUrl))a=a.substring(this.baseUrl.length);else if(a.indexOf("://")!==-1)return null;a=Backbone.history.getFragment(a);var b=_.any(Backbone.history.handlers,function(b){return b.route.test(a)});return b?a:null},triggerRoute:function(a,b,c){var d;if(a instanceof $||_.isElement(a)){var e=$(a);d=e.attr("href"),this.setTrack(e)}else _.isString(a)&&(d=a,this.setTrack(undefined,b,c));d=$.trim(d);if(this.isValidUrl(d)){if(Modernizr.history){var f=this.getDefinedRoute(d);if(f!==null)return Backbone.history.navigate(f,{trigger:!0}),!0}return window.location=d,!0}return!1},isValidUrl:function(a){return a?a.indexOf("javascript:")!==-1?!1:a[0]==="#"&&a.length===1?!1:a.indexOf("../")!==-1?(console.error("Attempting to load a relative url, bad code monkey! ("+a+")"),!1):a[0]!=="/"&&a.indexOf("://")===-1?(console.error("Attempting to load a relative url, bad code monkey! ("+a+")"),!1):!0:!1}});return new AppModel}),define("trafficcop",["jquery","underscore"],function(a,b){var c=function(){this.DEBUG=!0,this.animationTimeout=2e3,this.activeRequests=[],this.activeAnimations=[],this.animationCompletion=null};

return c.prototype={addRequest:function(c){var d={ajaxPromise:c,gate:a.Deferred(),requestResult:null};

this.activeRequests.push(d),c.always(b.bind(function(a){d.requestResult=a,this.activeAnimations.length===0&&(c.state()==="resolved"?d.gate.resolve():d.gate.reject(),this._clearFinishedRequests())},this));var e=d.gate.promise();return e=e.pipe(function(){return d.requestResult},function(a){return d.requestResult}),e.abort=c.abort,e},addAnimation:function(c,d,e,f){if(c.state()!=="pending")return c;this.animationCompletion||(this.animationCompletion=a.Deferred());var g={promise:c,el:d&&d[0],property:e,value:f};

return g.timeout=window.setGlobalTimeout(b.bind(function(){console.warn("ANIMATION did NOT resolve within "+this.animationTimeout+" ms, releasing barrier "+this._getAnimationPropertyDescription(e,f),g.el),this.activeAnimations=b.without(this.activeAnimations,g),this._resolveAnimation()},this),this.animationTimeout),this.activeAnimations.push(g),c.always(b.bind(function(){window.clearGlobalTimeout(g.timeout);var b=a.inArray(g,this.activeAnimations);b!==-1?(this.activeAnimations.splice(b,1),this._resolveAnimation()):console.warn("animation finished after being released "+this._getAnimationPropertyDescription(e,f),g.el)},this)),this.animationCompletion.promise()},_getAnimationPropertyDescription:function(a,b){return a&&b!=null?"on property "+a+":"+b:"on unregistered element"},_resolveAnimation:function(){if(this.activeAnimations.length===0){var a=this.animationCompletion;this.animationCompletion=null,this._triggerEvents(),a.resolve()}},_triggerEvents:function(){b.each(this.activeRequests,function(a){var b=a.ajaxPromise.state();b==="resolved"?a.gate.resolve():b==="rejected"&&a.gate.reject()}),this._clearFinishedRequests()},_clearFinishedRequests:function(){this.activeRequests=b.reject(this.activeRequests,function(a){return a.gate.state()!=="pending"})}},new c}),define("requestmanager",["jquery","underscore","trafficcop"],function(a,b,c){var d=function(){this.DEBUG=!0,this.navRequest=null,this.xhrList=[]};

return d.prototype={fetchHtml:function(a,b,c,d){return this.fetchData(a,b,c,d,!0)},fetchData:function(d,e,f,g,h){var i=this._initializeFetchData(d,f);if(!i){var j=a.Deferred().reject();return j.abort=function(){},j}var k={};

g&&(k["X-PJAX"]="true",k["X-PJAX-Container"]="#overlay"),d?d.indexOf("/")!==0&&(d="/"+d):d="/",e=a.extend({url:d,data:{ajax:!0},beforeSend:function(b){a.each(k,function(a,c){b.setRequestHeader(a,c)})},timeout:3e4},e);var l=a.ajax(e);this.DEBUG&&l.fail(function(a){a.statusText!=="abort"&&console.log("fetchData Error: ",a.statusText)});var m=a.Deferred();l=c.addRequest(l),this._registerNavDoneHandlers(l,m,h),this._registerNavRequests(l,m,f);var n=m.promise();return n.abort=b.bind(function(){l.abort(),m.reject()},this),n},_registerNavDoneHandlers:function(b,c,d){b.done(function(e){if(d){var f=document.createDocumentFragment(),g=document.createElement("div");g.innerHTML=e,f.appendChild(g),e=a(f).children().children()}c.resolveWith(b,[e])}).fail(function(a){c.rejectWith(b,[a])})},_registerNavRequests:function(a,c,d){if(d)this.navRequest.xhr=a,this.navRequest.deferred=c,c.always(b.bind(function(){this.navRequest=null},this));else{var e={ajaxPromise:a,resultDeferred:c};

this.xhrList.push(e),a.always(b.bind(function(){this.xhrList=b.without(this.xhrList,e)},this))}},_initializeFetchData:function(a,b){if(!b){if(this.navRequest)return!1}else{if(this.navRequest){if(this.navRequest.path===a)return!1;console.log("aborting nav request"),this.navRequest.xhr&&this.navRequest.xhr.abort(),this.navRequest&&this.navRequest.deferred&&this.navRequest.deferred.reject()}jQuery.each(this.xhrList,function(a,b){b.ajaxPromise.abort(),b.resultDeferred.reject()}),this.xhrList=[],this.navRequest={path:a}}return!0}},new d}),function(a){a.cookie=function(b,c,d){if(arguments.length>1&&(!/Object/.test(Object.prototype.toString.call(c))||c===null||c===undefined)){d=a.extend({},d);if(c===null||c===undefined)d.expires=-1;if(typeof d.expires=="number"){var e=d.expires,f=d.expires=new Date;f.setDate(f.getDate()+e)}return c=String(c),document.cookie=[encodeURIComponent(b),"=",d.raw?c:encodeURIComponent(c),d.expires?"; expires="+d.expires.toUTCString():"",d.path?"; path="+d.path:"",d.domain?"; domain="+d.domain:"",d.secure?"; secure":""].join("")}d=c||{};

var g=d.raw?function(a){return a}:decodeURIComponent,h=document.cookie.split("; ");
for(var i=0,j;j=h[i]&&h[i].split("=");i++)
return g(j[1]||"");
return null}}(jQuery),define("cookie",function(){}),
define("admanager",
function(a,b,c){var d=function(){this.initialize()};

return d.prototype={adSizes:{pushdown:[1100,615],elastic:[1000,810],outofpage:[1000,810],heroflip:[720,524],livefeed:[360,800],videotakeover:[720,405],lowerthird:[1,1],mediumrectangle:[300,250],halfpage:[300,600],leaderboard:[728,90]},csId:"J06575",debug:!1,noAds:!1,slots:{},_containsValue:function(a,b){return Array.prototype.indexOf||(Array.prototype.indexOf=function(a){for(var b=0;b<this.length;b++)if(this[b]===a)return b;return-1}),a.indexOf(b)},_createScript:function(a,b,c){this.logDebug("Creating script",a,b,c);var d=document.createElement("script");d.id=a,d.src=b,d.type="text/javascript",d.defer=!1,typeof callback!="undefined"&&callback!=null&&(d.onreadystatechange=function(){if(this.readyState=="complete"||this.readyState=="loaded")this.onreadystatechange=this.onload=null},d.onload=function(){this.onreadystatechange=this.onload=null}),c[0].appendChild(d)},_createStyleSheet:function(a,b,c){if(b!=null&&b!=""){var d=document.createElement("link");d.id=a,d.rel="stylesheet",d.type="text/css",d.href=b,c.append(d)}},_get:function(b){return Modernizr.localstorage?a.parseJSON(sessionStorage[b]):a.parseJSON(a.cookie(b))},_set:function(b,c){this.logDebug("_set",b,c),typeof c!="string"&&(c=this._toString(c)),Modernizr.localstorage?sessionStorage.setItem(b,c):a.cookie(b,c)},_sortUnique:function(a){a=a.sort(function(a,b){return a*1-b*1});var b=[a[0]];for(var c=1;c<a.length;c++)a[c-1]!==a[c]&&b.push(a[c]);return b},_split:function(a,b){if(a.split){var c=a.split(b);if(c.length)return c}return a},_toString:function(b){if(window.JSON)return JSON.stringify(b);if(a.isArray(b)){var c="[";for(var d=0;d<b.length;d++)d>0&&(c+=","),typeof b[d]=="number"||typeof b[d]=="boolean"?c+=b[d]:c+='"'+b[d]+'"';return c+="]",c}return this.logWarn("String conversion not supported for:",b),""},checkMeter:function(a){var b=site_config.ADS.THRESHOLDS[a.toUpperCase()];if(typeof b=="undefined")return this.logWarn("Rate Meter threshold not found"),!1;var c=!1,d=this._get("rm_"+a);this.logDebug("Found from storage",d);if(typeof d=="undefined"||d===null)d=new Array,d[0]=b[0],d[1]=0;else if(d[0]===-1)return!1;return d[0]--,d[0]<1&&(c=!0,d[1]++,d[1]>b.length&&d[1]--,d[0]=b[d[1]]),this._set("rm_"+a,d),c},convertAdTypeToAdUnit:function(a){switch(a){case"Pushdown":return"pushdown";case"Hero Flip":return"heroflip";case"Live Feed Takeover":return"livefeed";case"Elastic":return"elastic";case"outofpage":return a}return null},defineSlot:function(a,b,c,d){if(typeof this.slots[b]!="undefined")return this.slots[b];var e=new Object;e.isRefreshable=!1,e.sizes=c,e.slot=null,e.slotId=b,this.slots[b]=e;var f=site_config.ADS.DFP.ACCOUNTID+"/"+site_config.ADS.DFP.ACCOUNTNAME+"/"+a;return this.registerSlotWithGoogle(f,c,b,d),e},defineOutOfPageSlot:function(a,b,c){if(typeof this.slots[b]!="undefined")return this.slots[b];var d=new Object;d.isRefreshable=!1,d.sizes=null,d.slot=null,d.slotId=b,this.slots[b]=d;var e=site_config.ADS.DFP.ACCOUNTID+"/"+site_config.ADS.DFP.ACCOUNTNAME+"/"+a;return this.registerOutOfPageSlotWithGoogle(e,b,c),d},getBlankStateObj:function(){var a=new Object;return a.ecid=null,a.isOpen=!0,a},getCreativeState:function(a){var b=this._get("dfpc_"+a);if(typeof b=="undefined"||b===null){var c=this.getBlankStateObj();return c.ecid=a,c}return b},getSize:function(a){var b=this.adSizes[a];return typeof b=="undefined"?(this.logWarn("Size not found for "+a),null):b},getSizes:function(b,c){var d=this;return a(this._split(c,",")).each(function(){b.push(d.getSize(this))}),this._sortUnique(b)},getVCESize:function(a){var b=this.getSize(a);return b==null?"1x1":b[0]+"x"+b[1]},initialize:function(){if(typeof googletag=="undefined"||decodeURI((RegExp("no_ads"+"="+"(.+?)(&|$)").exec(location.search)||[,null])[1])=="true"){this.noAds=!0;return}this.noAds=!1;if(isAdDebug||decodeURI((RegExp("usat_console"+"="+"(.+?)(&|$)").exec(location.search)||[,null])[1])=="1")this.debug=!0;this.logDebug("AdManager initializing",this),this.initializeGoogletag(),this.initializeBaseTargeting(),this.logDebug("AdManager initialize",this)},initializeGoogletag:function(){var a=this;googletag.cmd.push(function(){a.logInfo("Collapses the empty divs. Used for the asset pages where the slot and placement are the same"),googletag.pubads().collapseEmptyDivs(),a.logInfo("Enabled the ad calls"),googletag.enableServices()})},initializeBaseTargeting:function(){var b=this;googletag.cmd.push(function(){var c=a.cookie("rsi_segs");if(c!=null){var d=b._split(c,"|"),e=new RegExp("^"+this.csId+"_","i"),f=[];for(var g=0;g<d.length;g++)f.push(d[g].replace(e,""));b.logInfo("set revsci targeting",f),b.setTargeting(null,"segments",f)}})},loadAd:function(b){var c=this;googletag.cmd.push(function(){var d=b.slot;d==null&&(d=c.slots[slotId].slot),a("iframe","#"+b.slotId).attr("allowtransparency","true");if(!d.isRefreshable){d.isRefreshable=!0;return}googletag.pubads().refresh([b.slot]),c.logInfo("Ad refreshed for "+b.slotId,b)})},logDebug:function(a){this.debug&&console.log("Ad Debug",arguments)},logError:function(a){console.error("Ad Error",arguments)},logInfo:function(a){this.debug&&console.log("Ad Info",arguments)},logWarn:function(a){this.debug&&console.warn("Ad Warn",arguments)},registerCreativeState:function(a,b){this._set("dfpc_"+a,b)},registerOutOfPageSlotWithGoogle:function(a,b,c){var d=this;googletag.cmd.push(function(){var e=d.slots[b];e.slot=googletag.defineOutOfPageSlot(a,b).addService(googletag.pubads());for(var f in c)c.hasOwnProperty(f)&&c[f]!=null&&(d.logInfo("Set preloaded "+f+" targeting",c[f]),d.setTargeting(e.slot,f,c[f]))}),googletag.cmd.push(function(){googletag.display(b)})},registerSlotWithGoogle:function(a,b,c,d){var e=this;googletag.cmd.push(function(){var f=e.slots[c];f.slot=googletag.defineSlot(a,b,c).addService(googletag.pubads()),e.logInfo("Slot defined for "+c,f);for(var g in d)d.hasOwnProperty(g)&&d[g]!=null&&(e.logInfo("Set "+g+" targeting",d[g]),e.setTargeting(f.slot,g,d[g]))}),googletag.cmd.push(function(){googletag.display(c),e.logInfo("Slot enabled for "+c)})},refreshAd:function(a){if(typeof this.slots[a]=="undefined")return this.logWarn("Trying to fresh an ad slot that does not exist, "+a),!1;this.loadAd(this.slots[a])},setTargeting:function(a,b,c){var d=this._split(c,"|");a==null?googletag.pubads().setTargeting(b,c):a.setTargeting(b,c)}},new d}),function(a,b){function h(){e=a.now(),f=f||b(i,10)}function i(){var h=a.now();h-e<a.resizestop.threshold?f=b(i,10):(clearTimeout(f),f=e=0,g.width=c.width(),g.height=c.height(),d.trigger("resizestop"))}var c=a(window),d=a([]),e=0,f=0,g={};

a.resizestop={propagate:!1,threshold:500},a.event.special.resizestop={setup:function(a,b){d=d.not(this),d=d.add(this),d.length===1&&c.bind("resize",h)},teardown:function(a){d=d.not(this),d.length||c.unbind("resize",h)},add:function(b){var c=b.handler;b.handler=function(b){return a.resizestop.propagate||b.stopPropagation(),b.data=b.data||{},b.data.size=b.data.size||{},a.extend(b.data.size,g),c.apply(this,arguments)}}}}(jQuery,setTimeout),define("resizestop",function(){}),define("views/modules/form",["jquery","underscore","backbone","pubsub","app"],function(a,b,c,d,e){var f=c.View.extend({events:{"focus input":"onFocusBlurField","blur input":"onFocusBlurField","keyup input":"onTyping","click .ui-text-input-clear":"clearField"},initialize:function(){this.inputFields=this.$el.find('[type="text"],[type="search"]');var b=this;a.each(this.inputFields,function(b){var c=a("<div>").addClass("ui-text-input-container"),d=a("<div>").addClass("ui-text-input-clear");a(this).wrap(c),a(this).parent().append(d),a(this).val(a(this).data("placeholder")),a(this).hasClass("icon-search")&&a(this).parent().append(a("<div>").addClass("input-icon").addClass("icon-search"))})},onFocusBlurField:function(b){var c=a(b.currentTarget),d=c.data("placeholder");b.type==="focusin"&&c.val()===d?c.val(""):b.type==="focusout"&&c.val()===""&&(d?c.val(c.data("placeholder")):c.val("")),this.showHideClearButton(b)},onTyping:function(a){var b=a.keyCode?a.keyCode:a.which;this.showHideClearButton(a)},showHideClearButton:function(b){var c=a(b.currentTarget);if(c.parent().hasClass("ui-text-input-container")){var d=c.parent(),e=d.find(".ui-text-input-clear");c.val()!=""&&c.val()!=c.data("placeholder")?e.show():e.hide()}},clearField:function(b){var c=a(b.currentTarget).parent().find("input"),d=c.data("placeholder");d?c.val(d):c.val(""),this.showHideClearButton(b),c.focus()},destroy:function(a){this.undelegateEvents(),a&&this.remove()}});return f}),define("views/modules/video",["jquery","underscore","backbone","pubsub"],function(a,b,c,d){var e=c.View.extend({events:{"click .videoStillPlay":"swapImageForVideo","click .videoCloseButton":"hidePlayer"},initialize:function(c){if(!c||!c.el)return;this.scriptsLoaded=!1,this.liveHidden=!1,this.$videoObj=this.$(".videoObject"),b.bindAll(this,"createPlayer"),this.pubSub={"carousel:switchSlide":this.hidePlayer},d.attach(this.pubSub,this),this.brightcoveId=this.$(".BrightcoveExperience").attr("id"),(this.options.autostart||this.options.autocreate)&&this.createPlayer(),window.BCLoad=function(b){a(".temp-loader").fadeOut()}},createPlayer:function(){window.brightcove?(a(".open-sidebar").is(":visible")&&a("#overlay").length===0&&(a(".open-sidebar").hide(),this.liveHidden=!0),window.brightcove.getExperience(this.brightcoveId)?console.log("reusing player for brightcoveId: "+this.brightcoveId):(console.log("creating player for brightcoveId: "+this.brightcoveId),window.brightcove.createExperiences(null,this.brightcoveId),d.trigger("video:load",{videoname:this.$videoObj.attr("data-videoname")})),this.$videoObj.show()):this.loadScripts(this.createPlayer)},destroy:function(a,b){this.undelegateEvents(),d.unattach(this.pubSub,this);if(this.brightcoveId&&window.brightcove){var c=window.brightcove.getExperience(this.brightcoveId);if(c)if(b){var e=c.getModule(APIModules.VIDEO_PLAYER);e&&e.pause()}else{var f=c.getModule(APIModules.EXPERIENCE);f&&f.unload()}!b&&window.brightcove&&(window.brightcove.experiences&&delete window.brightcove.experiences[this.brightcoveId],window.brightcove.instances&&delete window.brightcove.instances[this.brightcoveId])}window.BCLoad=null,a&&this.remove()},hidePlayer:function(){this.liveHidden&&(a("").show(),this.liveHidden=!1),this.$videoObj&&this.$videoObj.hide()},loadScripts:function(a){require([""],function(){typeof window.brightcove!="undefined"?(a(),console.log("loading Brightcove")):console.log("Error loading Brightcove")})},swapImageForVideo:function(b){if(this.$el.parents(".hero")&&a(b.target).is("a"))return;this.createPlayer(),a(".temp-loader").show(),d.trigger("video:playClick")}});return e}),jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(a,b,c,d,e){return jQuery.easing[jQuery.easing.def](a,b,c,d,e)},easeInQuad:function(a,b,c,d,e){return d*(b/=e)*b+c},easeOutQuad:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c},easeInOutQuad:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b+c:-d/2*(--b*(b-2)-1)+c},easeInCubic:function(a,b,c,d,e){return d*(b/=e)*b*b+c},easeOutCubic:function(a,b,c,d,e){return d*((b=b/e-1)*b*b+1)+c},easeInOutCubic:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b+c:d/2*((b-=2)*b*b+2)+c},easeInQuart:function(a,b,c,d,e){return d*(b/=e)*b*b*b+c},easeOutQuart:function(a,b,c,d,e){return-d*((b=b/e-1)*b*b*b-1)+c},easeInOutQuart:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b+c:-d/2*((b-=2)*b*b*b-2)+c},easeInQuint:function(a,b,c,d,e){return d*(b/=e)*b*b*b*b+c},easeOutQuint:function(a,b,c,d,e){return d*((b=b/e-1)*b*b*b*b+1)+c},easeInOutQuint:function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b*b*b*b+c:d/2*((b-=2)*b*b*b*b+2)+c},easeInSine:function(a,b,c,d,e){return-d*Math.cos(b/e*(Math.PI/2))+d+c},easeOutSine:function(a,b,c,d,e){return d*Math.sin(b/e*(Math.PI/2))+c},easeInOutSine:function(a,b,c,d,e){return-d/2*(Math.cos(Math.PI*b/e)-1)+c},easeInExpo:function(a,b,c,d,e){return b==0?c:d*Math.pow(2,10*(b/e-1))+c},easeOutExpo:function(a,b,c,d,e){return b==e?c+d:d*(-Math.pow(2,-10*b/e)+1)+c},easeInOutExpo:function(a,b,c,d,e){return b==0?c:b==e?c+d:(b/=e/2)<1?d/2*Math.pow(2,10*(b-1))+c:d/2*(-Math.pow(2,-10*--b)+2)+c},easeInCirc:function(a,b,c,d,e){return-d*(Math.sqrt(1-(b/=e)*b)-1)+c},easeOutCirc:function(a,b,c,d,e){return d*Math.sqrt(1-(b=b/e-1)*b)+c},easeInOutCirc:function(a,b,c,d,e){return(b/=e/2)<1?-d/2*(Math.sqrt(1-b*b)-1)+c:d/2*(Math.sqrt(1-(b-=2)*b)+1)+c},easeInElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(b==0)return c;if((b/=e)==1)return c+d;g||(g=e*.3);if(h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return-(h*Math.pow(2,10*(b-=1))*Math.sin((b*e-f)*2*Math.PI/g))+c},easeOutElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(b==0)return c;if((b/=e)==1)return c+d;g||(g=e*.3);if(h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return h*Math.pow(2,-10*b)*Math.sin((b*e-f)*2*Math.PI/g)+d+c},easeInOutElastic:function(a,b,c,d,e){var f=1.70158,g=0,h=d;if(b==0)return c;if((b/=e/2)==2)return c+d;g||(g=e*.3*1.5);if(h<Math.abs(d)){h=d;var f=g/4}else var f=g/(2*Math.PI)*Math.asin(d/h);return b<1?-0.5*h*Math.pow(2,10*(b-=1))*Math.sin((b*e-f)*2*Math.PI/g)+c:h*Math.pow(2,-10*(b-=1))*Math.sin((b*e-f)*2*Math.PI/g)*.5+d+c},easeInBack:function(a,b,c,d,e,f){return f==undefined&&(f=1.70158),d*(b/=e)*b*((f+1)*b-f)+c},easeOutBack:function(a,b,c,d,e,f){return f==undefined&&(f=1.70158),d*((b=b/e-1)*b*((f+1)*b+f)+1)+c},easeInOutBack:function(a,b,c,d,e,f){return f==undefined&&(f=1.70158),(b/=e/2)<1?d/2*b*b*(((f*=1.525)+1)*b-f)+c:d/2*((b-=2)*b*(((f*=1.525)+1)*b+f)+2)+c},easeInBounce:function(a,b,c,d,e){return d-jQuery.easing.easeOutBounce(a,e-b,0,d,e)+c},easeOutBounce:function(a,b,c,d,e){return(b/=e)<1/2.75?d*7.5625*b*b+c:b<2/2.75?d*(7.5625*(b-=1.5/2.75)*b+.75)+c:b<2.5/2.75?d*(7.5625*(b-=2.25/2.75)*b+.9375)+c:d*(7.5625*(b-=2.625/2.75)*b+.984375)+c},easeInOutBounce:function(a,b,c,d,e){return b<e/2?jQuery.easing.easeInBounce(a,b*2,0,d,e)*.5+c:jQuery.easing.easeOutBounce(a,b*2-e,0,d,e)*.5+d*.5+c}}),define("easing",function(){}),function(a){function b(){var b=a("script:first"),c=b.css("color"),d=!1;if(/^rgba/.test(c))d=!0;else try{d=c!=b.css("color","rgba(0, 0, 0, 0.5)").css("color"),b.css("color",c)}catch(e){}return d}function c(b,c,d){var e="rgb"+(a.support.rgba?"a":"")+"("+parseInt(b[0]+d*(c[0]-b[0]),10)+","+parseInt(b[1]+d*(c[1]-b[1]),10)+","+parseInt(b[2]+d*(c[2]-b[2]),10);return a.support.rgba&&(e+=","+(b&&c?parseFloat(b[3]+d*(c[3]-b[3])):1)),e+=")",e}function d(a){var b,c;if(b=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})/.exec(a))c=[parseInt(b[1],16),parseInt(b[2],16),parseInt(b[3],16),1];else if(b=/#([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])/.exec(a))c=[parseInt(b[1],16)*17,parseInt(b[2],16)*17,parseInt(b[3],16)*17,1];else if(b=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(a))c=[parseInt(b[1]),parseInt(b[2]),parseInt(b[3]),1];else if(b=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9\.]*)\s*\)/.exec(a))c=[parseInt(b[1],10),parseInt(b[2],10),parseInt(b[3],10),parseFloat(b[4])];return c}a.extend(!0,a,{support:{rgba:b()}});var e=["color","backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","outlineColor"];a.each(e,function(b,e){a.fx.step[e]=function(b){b.init||(b.a=d(a(b.elem).css(e)),b.end=d(b.end),b.init=!0),b.elem.style[e]=c(b.a,b.end,b.pos)}}),a.fx.step.borderColor=function(b){b.init||(b.end=d(b.end));var i=e.slice(2,6);a.each(i,function(e,h){b.init||(b[h]={a:d(a(b.elem).css(h))}),b.elem.style[h]=c(b[h].a,b.end,b.pos)}),b.init=!0}}(jQuery),define("animatecolors",function(){}),define("baseview",["jquery","underscore","backbone","app","pubsub","trafficcop","easing"],function(a,b,c,d,e,f){var g=c.View.extend({transEndEventNames:{WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},transitionCssName:Modernizr.prefixed("transition"),transitionEndName:"",transformOriginCssName:Modernizr.prefixed("transformOrigin"),perspectiveCssName:Modernizr.prefixed("perspective"),perspectiveOriginCssName:Modernizr.prefixed("perspectiveOrigin"),useCSSTransitions:Modernizr.csstransitions,isSafari:navigator.userAgent.indexOf("Safari")>-1&&navigator.userAgent.indexOf("Chrome")===-1&&navigator.userAgent.indexOf("iPhone")===-1&&navigator.userAgent.indexOf("iPad")===-1,isSafari5:navigator.userAgent.indexOf("Safari")>-1&&navigator.userAgent.indexOf("Chrome")===-1&&navigator.userAgent.indexOf("Version/5")!==-1,isApple:navigator.userAgent.indexOf("iPhone")>-1||navigator.userAgent.indexOf("iPad")>-1,useCSSTransforms:Modernizr.csstransforms,transformCssName:Modernizr.prefixed("transform"),transformStyleCssName:Modernizr.prefixed("transformStyle"),backfaceVisibilityCssName:Modernizr.prefixed("backfaceVisibility"),transformCssHyphenName:"",pubSub:null,options:{animations:{fadeIn:{duration:200,easing:"easeInQuad"},fadeOut:{duration:200,easing:"easeOutSine"},slide:{duration:350,easing:"ease-in-out"},useCSSTransitions:!0}},initialize:function(b){this.options=a.extend(!0,{},this.options,b),this.useCSSTransitions=this.options.animations.useCSSTransitions&&this.useCSSTransitions,this.useCSSTransitions||(this.useCSSTransforms=!1),this.subviews={},this.pubSub&&e.attach(this.pubSub,this)},destroy:function(a,b){this.destroyModules(a,b),this.undelegateEvents(),this.pubSub&&e.unattach(this.pubSub,this),a&&this.$el.remove()},destroyModules:function(a,b){this._destroyCollection(this.subviews,a,b),this.subviews={}},_destroyCollection:function(c,d,e){b.each(c,function(c){try{a.isArray(c)?b.each(c,function(a){typeof a.destroy!="undefined"&&a.destroy(d,e)}):typeof c.destroy!="undefined"&&c.destroy(d,e)}catch(f){console.error("subview threw exception on destruction: ",f.stack||f.stacktrace||f.message)}})},registerAnimation:function(a,b,c,d){return f.addAnimation(a,b,c,d)},slide:function(c,d,e,f){var g=null,h=null;d==="left"?(g="left",h=-100):d==="right"&&(g="left",h=100),this.$el.css(g,"0%"),c=a(c),c.css(g,h*-1+"%"),c.insertAfter(this.$el);var i=a.Deferred();return b.defer(b.bind(function(){this.$el.length!==0&&this.animate(this.$el,g,h+"%",e,f);var a=this.animate(c,g,"0%",e,f);a.done(b.bind(function(){this.$el.remove(),this.setElement(c),i.resolve()},this))},this)),i.promise()},animate:function(b,c,d,e,f,g){if(!b||b.length===0)return console.error("tried animating null or empty jquery object"),a.Deferred().reject();f=f||"linear";var h=null;if(this.useCSSTransitions){g?g=" "+g+"ms":g="";if(this.useCSSTransforms&&c==="left")h=this._transform(b,c,d,e,f,g);else{if(c==="opacity"&&b.css("display")==="none")return console.error("tried animating the opacity of a display:none property",b),a.Deferred().reject();h=this._transition(b,c,d,e,f,g)}}else{f.indexOf("cubic-bezier")!==-1?f="swing":f==="ease-in"?f="easeInQuad":f==="ease-out"?f="easeOutQuad":f==="ease-in-out"&&(f="easeInOutQuad");var i={};

i[c]=d,h=b.animate(i,e,f).promise()}return this.registerAnimation(h,b,c,d),h},_transition:function(c,d,e,f,g,h){var i=a.Deferred();return c[0].style[this.transitionCssName]=d+" "+f+"ms "+g+h,f===0?(c.css(d,e),i.resolve()):parseFloat(e)===parseFloat(c.css(d))?i.resolve():b.delay(b.bind(function(){this.registerTransitionEndListener(c,i),c.css(d,e)},this)),i.promise()},_transform:function(c,d,e,f,g,h){var i=a.Deferred(),j=this.transformCssHyphenName+" "+f+"ms "+g+h,k="translate3d("+e+",0,0)",l=c.css(d);l&&(c[0].style[this.transformCssName]="translate3d("+l+",0,0)",c.css(d,"auto"));if(f===0)c[0].style[this.transitionCssName]=j,c[0].style[this.transformCssName]=k,i.resolve();else{var m=c[0].style[this.transformCssName]||"";k.replace(/[px ]/g,"")===m.replace(/[px ]/g,"")?i.resolve():b.delay(b.bind(function(){this.registerTransitionEndListener(c,i),c[0].style[this.transitionCssName]=j,c[0].style[this.transformCssName]=k},this))}return d==="left"&&i.done(b.bind(function(){this.clearTransition(c),c.css("left",e)},this)),i.promise()},clearTransition:function(){this.useCSSTransitions&&a(arguments).each(b.bind(function(b,c){if(!c)return;c instanceof a&&(c=c[0]),c.style[this.transitionCssName]="",this.useCSSTransforms&&(c.style[this.perspectiveCssName]="",c.style[this.perspectiveOriginCssName]="",c.style[this.backfaceVisibilityCssName]="",c.style[this.transformCssName]="",c.style[this.transformStyleCssName]="",c.style[this.transformOriginCssName]="")},this))},registerTransitionEndListener:function(b,c){c||(c=a.Deferred());var d=this.transitionEndName,e=function(){this.removeEventListener(d,e),c.resolve(),e=null};

return b[0].addEventListener(this.transitionEndName,e),c.promise()},show:function(b,c){var d=null;return b&&!this.isSafari5?(d=this.$el.fadeTo(this.options.animations.fadeIn.duration,1,this.options.animations.fadeIn.easing).promise(),this.registerAnimation(d,this.$el,"opacity",1)):(d=a.Deferred().resolve(),this.$el.css({display:"block",opacity:1})),d.done(function(){c&&c()}),d},hide:function(c,d){var e=null;return c&&!this.isSafari5?(e=this.$el.fadeTo(this.options.animations.fadeOut.duration,0,this.options.animations.fadeOut.easing).promise(),e.done(b.bind(function(){this.$el.css({display:"none"})},this)),this.registerAnimation(e,this.$el,"opacity",0)):(e=a.Deferred().resolve(),this.$el.css({display:"none",opacity:0})),e.done(function(){d&&d()}),e}});return g.prototype.isSafari5&&(g.prototype.useCSSTransforms=!1),g.prototype.useCSSTransitions&&(g.prototype.transitionEndName=g.prototype.transEndEventNames[g.prototype.transitionCssName],g.prototype.useCSSTransforms&&(g.prototype.transformCssHyphenName=g.prototype.transformCssName.replace(/([A-Z])/g,function(a,b){return"-"+b.toLowerCase()}).replace(/^ms-/,"-ms-"))),g}),function(a){function b(b){var c=b||window.event,d=[].slice.call(arguments,1),e=0,f=!0,g=0,h=0;return b=a.event.fix(c),b.type="mousewheel",c.wheelDelta&&(e=c.wheelDelta/120),c.detail&&(e=-c.detail/3),h=e,c.axis!==undefined&&c.axis===c.HORIZONTAL_AXIS&&(h=0,g=-1*e),c.wheelDeltaY!==undefined&&(h=c.wheelDeltaY/120),c.wheelDeltaX!==undefined&&(g=-1*c.wheelDeltaX/120),d.unshift(b,e,g,h),(a.event.dispatch||a.event.handle).apply(this,d)}var c=["DOMMouseScroll","mousewheel"];if(a.event.fixHooks)for(var d=c.length;d;)a.event.fixHooks[c[--d]]=a.event.mouseHooks;a.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var a=c.length;a;)this.addEventListener(c[--a],b,!1);else this.onmousewheel=b},teardown:function(){if(this.removeEventListener)for(var a=c.length;a;)this.removeEventListener(c[--a],b,!1);else this.onmousewheel=null}},a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})}(jQuery),define("mousewheel",function(){}),define("views/modules/base-scroll",["jquery","underscore","backbone","pubsub","app","mousewheel"],function(a,b,c,d,e,f){var g=c.View.extend({events:{mousewheel:"onMouseWheel"},removeActiveDelay:300,currentPosition:0,initialize:function(){b.bindAll(this,"onBarClicked","onMouseDown","onMouseOver","onMouseOut","onMouseMove","onMouseUp","removeActiveClass","onMouseEnter","onMouseLeave"),this.content=this.$(this.options.contentClass),this.bar=a(this.options.template),this.dragger=this.bar.find(".scrolldragger"),this.body=e.get("body"),this.isMouseDown=!1,this.isMouseOver=!1,this.draggerOffset=0,this.refresh()},bindEvents:function(){this.delegateEvents(),this.bar.on("mousedown."+this.cid,this.onBarClicked),this.dragger.on("mousedown."+this.cid,this.onMouseDown),this.dragger.on("mouseover."+this.cid,this.onMouseOver),this.dragger.on("mouseout."+this.cid,this.onMouseOut),this.$el.on("mouseenter."+this.cid,b.bind(function(a){clearTimeout(this.leaveDelay),this.enterDelay=setTimeout(this.onMouseEnter,300)},this)),this.$el.on("mouseleave."+this.cid,b.bind(function(a){clearTimeout(this.enterDelay),this.leaveDelay=setTimeout(this.onMouseLeave,300)},this))},unbindEvents:function(){this.undelegateEvents(),this.bar.off("."+this.cid),this.dragger.off("."+this.cid),this.body.off("."+this.cid),this.$el.off("."+this.cid),this.enterDelay&&clearTimeout(this.enterDelay),this.leaveDelay&&clearTimeout(this.leaveDelay)},onMouseDown:function(a){a.stopPropagation(),a.preventDefault(),this.isMouseDown=!0,this.body.on("mousemove."+this.cid,this.onMouseMove),this.body.on("mouseup."+this.cid,this.onMouseUp)},onMouseUp:function(a){this.isMouseDown=!1,this.body.off("."+this.cid),this.isMouseOver||(this.dragger.removeClass("hover"),this.bar.removeClass("active"))},onMouseOver:function(a){this.isMouseOver=!0,this.dragger.addClass("hover"),this.bar.addClass("active")},onMouseOut:function(a){this.isMouseOver=!1,this.isMouseDown||(this.dragger.removeClass("hover"),this.startTimeout(this.removeActiveDelay))},onMouseEnter:function(a){this.isMouseInTheHouse=!0},onMouseLeave:function(a){this.isMouseInTheHouse=!1},onMouseWheel:function(a,b){},addActiveClass:function(a){this.bar.addClass("active"),this.startTimeout(a||this.removeActiveDelay)},removeActiveClass:function(){if(this.isMouseDown||this.isMouseOver)return;this.bar.removeClass("active"),clearTimeout(this.removeActiveClassDelay)},startTimeout:function(a){clearTimeout(this.removeActiveClassDelay),this.removeActiveClassDelay=setTimeout(this.removeActiveClass,a)},getCurrentPosition:function(){return isNaN(this.currentPosition)?0:this.currentPosition},destroy:function(){this.unbindEvents(),this.bar.remove()}});return g}),define("views/modules/vertical-scroll",["jquery","underscore","app","views/modules/base-scroll"],function(a,b,c,d){var e=d.extend({initialize:function(e){this.options=a.extend({color:"light",fadeout:!1,contentClass:".scrollable-content",padding:5,lockPageScroll:!0,delayScroll:!1},e||{});var f=this.options.fadeout?"fadeout":"",g=b.template('<div class="vertical-scroll ui-<%= color %> <%= fade %>"><div class="scrolldragger"></div></div>');this.options.template=g({color:this.options.color,fade:f}),this.win=c.get("win"),this.$(".vertical-scroll").remove(),d.prototype.initialize.apply(this,arguments)},refresh:function(){if(this.content.length===0)return;var a=this.$el.height(),b=a-this.options.padding*2;this.bar.css({height:b,top:this.options.padding});var c=this.content.outerHeight(),d=a/c,e=d*b;this.dragger.css({height:e}),this.overflow=c-a,this.draggerSpace=b-e,d<1?(this.$el.append(this.bar),this.bindEvents(),this.active=!0):(this.bar.remove(),this.unbindEvents(),this.active=!1,this.currentPosition=0),this.position(this.currentPosition,!0)},position:function(a,b){var c=-(this.overflow*a);this.content.css({marginTop:c+"px"}),this.currentPosition=a;if(b){var d=this.draggerSpace*a;this.dragger.css({marginTop:d+"px"})}this.$el.trigger("scrollBarUpdate")},onBarClicked:function(a){var b=a.pageY-this.bar.offset().top,c=b/this.bar.height();this.position(c);var d=this.draggerSpace*c;this.dragger.css({marginTop:d+"px"}),this.addActiveClass()},onMouseMove:function(a){if(!this.isMouseDown)return;var b=a.pageY-this.bar.offset().top,c=b-this.draggerOffset;c=Math.max(0,Math.min(c,this.draggerSpace)),this.dragger.css({marginTop:c+"px"});var d=c/this.draggerSpace;this.position(d)},onMouseDown:function(a){d.prototype.onMouseDown.apply(this,arguments);var b=a.pageY-this.bar.offset().top,c=parseInt(this.dragger.css("marginTop"),10);this.draggerOffset=b-c,this.bar.addClass("active")},onMouseWheel:function(a,b){if(this.isMouseDown||this.options.delayScroll&&!this.isMouseInTheHouse)return;var c=a.originalEvent.wheelDeltaY*.1;isNaN(c)&&(c=a.originalEvent.detail*-1);if(isNaN(c)||c===0)c=a.originalEvent.wheelDelta*.1;c=c<0?Math.floor(c):Math.ceil(c);var d=parseInt(this.dragger.css("marginTop"));d-=c,d=Math.max(0,Math.min(d,this.draggerSpace)),this.dragger.css({marginTop:d+"px"});var e=d/this.draggerSpace;this.position(e),this.options.lockPageScroll&&(e<=0&&b>0||e>=1&&b<0)&&a.preventDefault(),e>0&&e<1&&c!=0&&(a.preventDefault(),this.addActiveClass())}});return e}),define("views/modules/sidebar-scroll",["jquery","underscore","views/modules/vertical-scroll"],function(a,b,c){var d=c.extend({removeActiveDelay:1e3,initialize:function(a){b.bindAll(this,"onScrollUpdated","addActiveScroll"),c.prototype.initialize.apply(this,arguments)},bindEvents:function(){this.$el.on("scrollBarUpdate."+this.cid,this.onScrollUpdated),this.$el.on("mouseenter."+this.cid,this.addActiveScroll),c.prototype.bindEvents.apply(this,arguments)},destroy:function(a){this.$el.off("."+this.cid),c.prototype.destroy.apply(this,arguments)},onMouseOver:function(a){this.isMouseOver=!0},onMouseOut:function(a){this.isMouseOver=!1},addTopShadow:function(){this.topShadow||(this.topShadow=a('<div class="shadow top-shadow"></div>')),this.$(".top-shadow").length===0&&this.$el.append(this.topShadow)},removeTopShadow:function(){this.topShadow&&this.topShadow.remove()},addBottomShadow:function(){this.bottomShadow||(this.bottomShadow=a('<div class="shadow bottom-shadow"></div>')),this.$(".bottom-shadow").length===0&&this.$el.append(this.bottomShadow)},removeBottomShadow:function(){this.bottomShadow&&this.bottomShadow.remove()},removeActiveClass:function(){c.prototype.removeActiveClass.apply(this,arguments),setTimeout(b.bind(function(){this.bar.hasClass("active")||this.bar.addClass("hide")},this),1e3)},addActiveClass:function(a){this.bar.removeClass("hide"),this.bar.addClass("active"),this.startTimeout(a||this.removeActiveDelay)},addHideClass:function(){this.bar.addClass("hide")},addActiveScroll:function(){this.addActiveClass(this.removeActiveDelay)},onScrollListen:null,onScrollUpdated:function(){this.getCurrentPosition()==0?this.removeTopShadow():this.addTopShadow(),this.getCurrentPosition()==1?this.removeBottomShadow():this.active&&this.addBottomShadow(),this.onScrollListen!==null&&this.onScrollListen()}});return d}),define("models/modules/live-feed-model",["jquery","underscore","backbone"],function(a,b,c){var d=c.Model.extend({merge:function(b){var c=a.makeArray(this.get("markup-"+b)),d=this.get("queue-"+b);this.set("markup-"+b,a(d.concat(c))),this.set("queue-"+b,[])}});return d}),define("views/modules/footer",["jquery","underscore","backbone","easing","pubsub","app"],
function(a,b,c,d,e,f)
{
	var g=c.View.extend({el:".footer",events:{"click p.site-index":"toggle",
	"click .footer-more-trigger":"showMore"},
	
	initialize:function()
	{

		this.$nav=a("nav",this.$el),
		this.$doc=f.get("doc"),
		this.$win=f.get("win"),
		this.$toggle=a("p.site-index"),
		this.footerHeight=383
	},
		showMore:function(b)
		{
			b.preventDefault();
			var c=a(b.currentTarget);
			c.hide().siblings(".footer-more-item").show()
		},
			
			
			
			subscribers:function(a){var b;for(b in a)this.subscribe(b,a[b])},subscribe:function(b,c){typeof this[c]=="function"&&e.on(b,a.proxy(function(){this[c].apply(this,arguments)},this))},toggle:function(b){b&&b.preventDefault();var c=this.$el.offset().top-a("#nav").height()-a("#breaking").height()-a(".social-wrap .wrap").height();
			this.$toggle.toggleClass("open"),
			
			this.$nav.slideToggle(500,"easeInOutCubic")},
			close:function()
			{this.$nav.hide(),
			this.$toggle.removeClass("open")},
			destroy:function(a){this.undelegateEvents(),
			a&&this.remove()}});return g}),define("views/modules/horizontal-scroll",["jquery","underscore","views/modules/base-scroll","app"],function(a,b,c,d){var e=c.extend({initialize:function(e){this.options=a.extend({color:"light",contentClass:".scrollable-content",padding:0,lockPageScroll:!0,delayScroll:!0},e||{});var f=b.template('<div class="horizontal-scroll ui-<%= color %>"><div class="scrolldragger"><div class="over-icon"></div></div></div>');this.options.template=f({color:this.options.color}),this.win=d.get("win"),this.$(".horizontal-scroll").remove(),c.prototype.initialize.apply(this,arguments)},destroy:function(a){c.prototype.destroy.call(this,a)},refresh:function(){if(this.content.length===0)return;var a=this.$el.outerWidth()-this.options.padding*2;this.bar.css({width:a+"px",left:this.options.padding+"px"});var b=this.content.outerWidth(),c=a/b;this.dragger.css({width:c*a+"px"}),this.overflow=b-this.$el.width(),this.draggerSpace=this.bar.width()-this.dragger.width(),c<1?(this.$el.append(this.bar),this.bindEvents(),this.active=!0,this.$(".thumbs").addClass("scrollon")):(this.bar.remove(),this.unbindEvents(),this.active=!1,this.currentPosition=0),this.position(this.currentPosition,!0)},position:function(a,b){var c=-(this.overflow*a);this.content.css({marginLeft:c+"px"}),this.currentPosition=a;if(b){var d=this.draggerSpace*a;this.dragger.css({marginLeft:d+"px"})}this.$el.trigger("scrollBarUpdate")},onBarClicked:function(a){var b=a.pageX-this.bar.offset().left,c=b/this.bar.width();this.position(c);var d=this.draggerSpace*c;this.dragger.css({marginLeft:d+"px"}),this.addActiveClass()},onMouseMove:function(a){if(!this.isMouseDown)return;var b=a.pageX-this.bar.offset().left,c=b-this.draggerOffset;c=Math.max(0,Math.min(c,this.draggerSpace)),this.dragger.css({marginLeft:c+"px"});var d=c/this.draggerSpace;this.position(d)},onMouseDown:function(a){c.prototype.onMouseDown.apply(this,arguments);var b=a.pageX-this.bar.offset().left,d=parseInt(this.dragger.css("marginLeft"),10);this.draggerOffset=b-d,this.bar.addClass("active")},onMouseWheel:function(a,b){if(this.isMouseDown||this.options.delayScroll&&!this.isMouseInTheHouse)return;var c=a.originalEvent.wheelDeltaX*.1;isNaN(c)&&(c=a.originalEvent.detail*-1);if(isNaN(c)||c===0)c=a.originalEvent.wheelDelta*.1;c=c<0?Math.floor(c):Math.ceil(c);var d=parseInt(this.dragger.css("marginLeft"),10);d-=c,d=Math.max(0,Math.min(d,this.draggerSpace)),this.dragger.css({marginLeft:d+"px"});var e=d/this.draggerSpace;this.position(e),this.options.lockPageScroll&&(e<=0&&b>0||e>=1&&b<0)&&a.preventDefault(),e>0&&e<1&&c!=0&&(a.preventDefault(),this.addActiveClass())}});return e}),define("views/modules/gallery-thumb-scroll",["jquery","underscore","views/modules/horizontal-scroll"],function(a,b,c){var d=c.extend({updateThumbsPosition:function(){if(!this.active)return;var b=this.content.children(),c=b.length,d;while(--c>-1){d=a(b[c]);if(d.hasClass("active")){this.checkThumbPosition(d);break}}},checkThumbPosition:function(b){var c=b.position().left,d=c+b.outerWidth(),e,f;c<0?(e=parseInt(this.content.css("marginLeft"),10),c=b.position().left-e,d=c+b.outerWidth(),c=-d+this.$el.width(),c=Math.min(0,c),f=!0):d>this.$el.width()&&(e=parseInt(this.content.css("marginLeft"),10),c=-(b.position().left-e),c=Math.max(c,-this.overflow),f=!0),f&&(this.slidingThumbs||(this.slidingThumbs=!0,this.currentPercent=e/-this.overflow),this.targetPercent=c/-this.overflow,this.slidingInterval&&clearInterval(this.slidingInterval),this.slidingInterval=setInterval(a.proxy(this.updatePercent,this),50))},centerThumb:function(b){var c=parseInt(this.content.css("marginLeft"),10);this.slidingThumbs||(this.slidingThumbs=!0,this.currentPercent=c/-this.overflow);var d=b.position().left-c,e=this.$el.width()*.5-d-b.outerWidth()*.5;e=Math.max(Math.min(e,0),-this.overflow),this.targetPercent=e/-this.overflow,this.slidingInterval&&clearInterval(this.slidingInterval),this.slidingInterval=setInterval(a.proxy(this.updatePercent,this),50)},updatePercent:function(){Math.abs(this.currentPercent-this.targetPercent)<1e-4&&(this.currentPercent=this.targetPercent,this.slidingInterval&&clearInterval(this.slidingInterval));var a=(this.targetPercent-this.currentPercent)*.4;this.currentPercent+=a,this.position(this.currentPercent,!0)},destroy:function(a){this.slidingThumbs=!1,this.slidingInterval&&clearInterval(this.slidingInterval),c.prototype.destroy.call(this,a)}});return d}),define("views/modules/loader",["jquery","underscore","backbone","pubsub","app"],function(a,b,c,d,e){var f=c.View.extend({initialize:function(b){this.options=a.extend({msg:""},b||{}),this.win=e.get("win"),this.body=e.get("body"),this.el=a(this.options.el),this.msg=this.options.msg,this.render()},render:function(){var b=a("<div>").addClass("loading-icon"),c;this.$loader=a("<div>").addClass("ui-loader"),this.$target=this.$el,this.$target.append(this.$loader.append(b).append(a("<span>").html(this.msg))),this.$el=this.$loader},destroy:function(a){this.hide(),a&&this.remove()},show:function(){this.$loader.addClass("active")},hide:function(){this.$loader.removeClass("active")}});return f}),define("views/modules/tooltip",["jquery","underscore","backbone","pubsub"],function(a,b,c,d){var e=c.View.extend({events:{mouseenter:"show",mouseleave:"hide"},initialize:function(c){this.options=a.extend({template:'<div class="tooltip"><div class="tooltip-indicator"></div><div class="tooltip-inner"></div></div>',animation:{fadeIn:0,fadeOut:200,opacity:.9},position:"top",offset:{x:0,y:0}},c||{}),this.el=a(this.options.el),b.each(this.el,function(b){a(b).data("title",a(b).attr("title")).removeAttr("title")}),this.tip().addClass(this.options.position)},destroy:function(a){this.undelegateEvents(),this.tip().remove(),a&&this.tip().remove()},tip:function(){return this.tooltip=this.tooltip||a(this.options.template)},show:function(b){var c=a(b.currentTarget);a(document.body).append(this.tip()),this.tip().children(".tooltip-inner").html(c.data("title")),this.tip().addClass("active");switch(this.options.position){case"left":var d=c.offset().left-this.tip().outerWidth(),e=c.offset().top+(c.outerHeight()-this.tip().outerHeight())*.5;break;case"bottom":var d=c.offset().left+(c.outerWidth()-this.tip().outerWidth())*.5,e=c.offset().top+this.tip().outerHeight();break;case"right":var d=c.offset().left+c.outerWidth(),e=c.offset().top+(c.outerHeight()-this.tip().outerHeight())*.5;break;case"top":var d=c.offset().left+(c.outerWidth()-this.tip().outerWidth())*.5,e=c.offset().top-this.tip().outerHeight()}e+=this.options.offset.x,e+=this.options.offset.y,this.tip().css({left:d+"px",top:e+"px"}),this.tip().stop(!0,!1).fadeTo(this.options.animation.fadeIn,this.options.animation.opacity,function(){})},hide:function(){this.tip().removeClass("active"),this.tip().stop(!0,!1).fadeTo(this.options.animation.fadeOut,0,function(){})}});return e}),define("views/modules/partner/leavebehind",["jquery","underscore","backbone","pubsub","baseview","admanager"],function(a,b,c,d,e,f){var g=e.extend({destroy:function(a){this.$el.removeClass("leave-behind-compact"),this.$html.unbind(),this.hideLeavebehind(!0),this.undelegateEvents(),e.prototype.destroy.call(this,!1)},hideLeavebehind:function(a){this.hide(!0,b.bind(function(){this.$el.removeClass("show")},this)),a&&this.$el.empty()},initialize:function(c){this.config=a.extend({},c||{}),b.bindAll(this),this.pubSub={},this.pubSub["partner:"+this.config.dfp.ecid+":stopToClose"]=this.showLeavebehind,e.prototype.initialize.call(this,c),this.setup(),this.config.startVisible&&this.showLeavebehind(),f.logDebug("LeaveBehind initialized",this)},onClick:function(){this.hideLeavebehind(),d.trigger("partner:"+this.config.dfp.ecid+":leavebehind:clicked")},setup:function(){var c=this.config.$adEl.closest(".theatre").find(".hero").hasClass("headline_pack");c&&this.$el.addClass("leave-behind-compact");var d={image_alt:this.config.leaveBehindText,image_url:this.config.leaveBehindImage},e=a("#partner_leave_behind_template").html(),f=b.template(e,d);this.$html=a(f).appendTo(this.$el),this.$html.bind("click",b.bind(function(){this.onClick()},this))},showLeavebehind:function(){this.show(!0,b.bind(function(){this.$el.addClass("show")},this))}});return g}),define("views/modules/partner/slider",["jquery","underscore","backbone","pubsub","baseview","admanager"],function(a,b,c,d,e,f){var g=e.extend({events:{"click a.close-partner":"onClickCloseButton"},refreshTime:9e5,refreshTimer:null,sliderCheckCounter:0,sliderCheckTimer:null,destroy:function(a){this.stopListenForAd(),this.stopRefreshTimer(),this.hide(!0),e.prototype.destroy.call(this,!1)},hide:function(b){this.$adEl.hide(),e.prototype.hide.call(this,!0,a.proxy(this.onHidden,this.$el)),b&&this.stopRefreshTimer()},initialize:function(b){this.config=a.extend({},b||{}),this.$adEl=a("#partner_high_impact_"+this.config.awsId),this.pubSub={"breakingbar:before:close":this.shiftTop,"breakingbar:before:open":this.shiftTop},e.prototype.initialize.call(this,this.config),f.logDebug("Slider initialized",this),this.$bb=App.get("breakingEl").css("display"),this.$hh=App.get("headerEl").outerHeight()},listenForAd:function(){this.$bb=="block"&&this.shiftTop(this.$hh);if(this.$adEl.length&&this.$adEl[0].style.display==="none"){clearTimeout(this.sliderCheckTimer),this.sliderCheckCounter[c]=0;return}if(a("iframe",this.$adEl).attr("width")==300){this.show(),clearTimeout(this.sliderCheckTimer),this.sliderCheckCounter[c]=0;return}var c=this.$adEl.attr("id");if(b.isUndefined(this.sliderCheckCounter[c]))this.sliderCheckCounter[c]=0;else if(this.sliderCheckCounter[c]>10){this.stopListenForAd();return}this.sliderCheckTimer=setTimeout(b.bind(function(){this.sliderCheckCounter[c]++,this.listenForAd()},this),100)},onClickCloseButton:function(){return this.hide(!1),!1},onHidden:function(){this.removeClass("show").removeAttr("style")},onShown:function(){this.addClass("show")},refreshAd:function(){this.hide(!1),this.$adEl.removeAttr("style"),this.listenForAd(),f.refreshAd(this.$adEl.attr("id")),this.stopRefreshTimer(),this.startRefreshTimer()},show:function(){e.prototype.show.call(this,!0,a.proxy(this.onShown,this.$el)),this.startRefreshTimer()},startRefreshTimer:function(){this.refreshTime=site_config.ADS.SLIDER.REFRESHTIME,this.refreshTimer=setTimeout(b.bind(function(){this.refreshAd()},this),this.refreshTime)},stopListenForAd:function(){var a=this.$adEl.attr("id");this.hide(!1),clearTimeout(this.sliderCheckTimer),this.sliderCheckCounter[a]=0},stopRefreshTimer:function(){clearTimeout(this.refreshTimer)},shiftTop:function(a,b){this.$el.stop().animate({top:a},b)}});return g}),define("views/modules/partner/leaderboard",["jquery","underscore","backbone","pubsub","baseview","admanager"],function(a,b,c,d,e,f){var g=e.extend({destroy:function(a){this.$el.empty(),e.prototype.destroy.call(this,!1)},initialize:function(c){this.config=a.extend({},c||{}),b.bindAll(this),this.setup(),e.prototype.initialize.call(this,c),f.logDebug("Leaderboard initialized",this)},setup:function(){this.config.data.adType.indexOf("flash")>-1?this.setupFlash():this.config.data.adType.indexOf("image")>-1?this.setupImage():this.config.data.adType.indexOf("thrid")>-1&&this.setupThirdParty()},setupFlash:function(){var a=escape("clickTAG="+this.config.data.clickUrl)+this.config.data.clickThruUrl,b="";b+='<div style="width:728px">',b+='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" id="google_flash_obj" codebase="" width="728" height="90">',b+='<param name="movie" value="'+this.config.data.flashUrl+'">',b+='<param name="quality" value="high">',b+='<param name="AllowScriptAccess" value="never">',b+='<param name="wmode" value="opaque">',b+='<param name="FlashVars" value="'+a+'">',b+='<object data="'+this.config.data.flashUrl+'" id="google_flash_embed" width="728" height="90" wmode="opaque" flashvars="'+a+'" type="application/x-shockwave-flash" allowscriptaccess="never" pluginspage=#">',b+="</object>",b+="</object>",b+="</div>",this.$el.append(b),this.show()},setupImage:function(){var a="";a+='<div style="width:728px">',a+='<a href="'+this.config.data.clickUrl+this.config.data.clickThruUrl+'" target="_blank">',a+='<img src="'+this.config.data.imageUrl+'">',a+="</a>",a+="</div>",this.$el.append(a),this.show()},setupThirdParty:function(){}});return g}),define("views/modules/partner/asset-sponsorship",["jquery","underscore","backbone","pubsub","baseview","admanager"],function(a,b,c,d,e,f){var g=e.extend({isSetup:!1,destroy:function(a){!this.isSetup,e.prototype.destroy.call(this,!1)},initialize:function(c){this.config=a.extend({},c||{}),b.bindAll(this),e.prototype.initialize.call(this,c),f.logDebug("Asset Sponsorship initialized",this),this.config.masterPageType=="asset"&&(this.isSetup=!0,this.setup())},setup:function(){this.setupBackground(),this.setupLogo()},setupBackground:function(){if(this.options.data.imageSkinLeft==null||this.options.data.imageSkinRight==null||this.options.data.imageSkinLeft==""||this.options.data.imageSkinRight=="")return;var a='<img src="<%= srcLeft %>" class="asset-sponsorship-skin asset-sponsorship-skin-left" /><img src="<%= srcRight %>" class="asset-sponsorship-skin asset-sponsorship-skin-right" />',c={srcLeft:this.options.data.imageSkinLeft,srcRight:this.options.data.imageSkinRight},d=b.template(a,c);this.$el.append(d)},setupLogo:function(){var c=a(".content-bar .title",this.$el);if(c.length==0)return;var d={clickthru:this.config.data.clickThru,logoText:this.config.data.imageLogoAlt,logoUrl:this.config.data.imageLogo},e='<div class="sponsor"><a href="<%= clickthru %>" target="_blank"><img src="<%= logoUrl %>" alt="<%= logoText %>"><span>Brought to you by <br/><%= logoText %></span></a></div>';c.after(b.template(e,d))}});return g}),define("views/modules/set-homepage",["jquery","underscore","backbone","pubsub"],function(a,b,c,d){var e=c.View.extend({el:".size-suspender:first",events:{"click .set-homepage":"setHomepage"},initialize:function(a){this.render()},render:function(){document.all&&a(".set-homepage").length===0&&this.$el.append('<div class="set-homepage">Set as my Home Page</div>')},setHomepage:function(){document.all&&(document.body.style.behavior="url(#default#homepage)",document.body.setHomePage(""))},destroy:function(a){this.undelegateEvents(),a&&this.remove()}});return e}),define("twitter",["jquery"],function(a){var b=function(b){this.settings=a.extend({user:"eduglobal",tweetCount:4,appendTo:".tweet-list"},b),this.loadTweets=function(b){var c=this;a.ajax({url:"",type:"GET",dataType:"jsonp",data:{screen_name:this.settings.user,include_rts:!0,count:this.settings.tweetCount,include_entities:!1},success:function(a,d,e){var f=[];for(var g=0;g<a.length;g++)a[g].text=c.ify.clean(a[g].text),a[g].created_at=c.timeAgo(a[g].created_at),f.push(a[g]);b(f)}})},this.timeAgo=function(b){var c=new Date,d=new Date(b);a.browser.msie&&(d=Date.parse(b.replace(/( \+)/," UTC$1")));var e=c-d,f=1e3,g=f*60,h=g*60,i=h*24,j=i*7;return isNaN(e)||e<0?"":e<f*2?"right now":e<g?Math.floor(e/f)+" seconds ago":e<g*2?"about 1 minute ago":e<h?Math.floor(e/g)+" minutes ago":e<h*2?"about 1 hour ago":e<i?Math.floor(e/h)+" hours ago":e>i&&e<i*2?"yesterday":e<i*365?Math.floor(e/i)+" days ago":"over a year ago"},this.ify={link:function(a){return a.replace(/\b(((https*\:\/\/)|www\.)[^\"\']+?)(([!?,.\)]+)?(\s|$))/g,function(a,b,c,d,e){var f=c.match(/w/)?"":"";return'<a target="_blank" href="'+f+b+'">'+(b.length>25?b.substr(0,24)+"...":b)+"</a>"+e})},at:function(a){return a.replace(/\B[@ï¼ ]([a-zA-Z0-9_]{1,20})/g,function(a,b){return'<a target="_blank" href="#">@'+b+"</a>"})},list:function(a){return a.replace(/\B[@ï¼ ]([a-zA-Z0-9_]{1,20}\/\w+)/g,function(a,b){return'<a target="_blank" href="'+b+'">@'+b+"</a>"})},hash:function(a){return a.replace(/(^|\s+)#(\w+)/gi,function(a,b,c){return b+'<a target="_blank" href="#">#'+c+"</a>"})},clean:function(a){return this.hash(this.at(this.list(this.link(a))))}}};

return b}),define("views/modules/twitter",["jquery","underscore","backbone","twitter","pubsub","views/modules/sidebar-scroll"],function(a,b,c,d,e,f){var g=c.View.extend({events:{"click .twitter a":"onClickTweetLink"},initialize:function(c){this.options=a.extend({num_tweets:6,columns:1,default_account:null,sidebar:!1},c||{}),this.columns=this.options.columns,this.num_tweets=this.options.num_tweets,this.twitterHandle=this.options.username,this.isSidebar=this.options.sidebar,b.bindAll(this),this.twitter_el=this.$(".tweet-list");var e=this.twitter_el.attr("data-user-id");e||(e=this.options.default_account||"EDUGLOBAL"),this.twitter=new d({user:e,tweetCount:this.num_tweets,appendTo:this.el}),this.twitter.loadTweets(this.createTweetsHTML)},onClickTweetLink:function(){e.trigger("uotrack","{% section %}tweets")},destroy:function(a){this.undelegateEvents(),this.scrollbar&&this.scrollbar.destroy(a),a&&this.remove()},createTweetsHTML:function(c){var d=a("#tweet-list-template",this.el),e;d.length&&(e=b.template(a("#tweet-list-template",this.el).html(),{data:c}),this.twitter_el.html(e),this.twitter_el.find("li").slice(0,this.columns).addClass("no-border"),this.isSidebar&&this.addScrollbar())},addScrollbar:function(){this.scrollbar=new f({el:this.$(".twitter-scroll-content"),color:"light",padding:2,lockPageScroll:!1,fadeout:!0}),this.scrollbar.addHideClass()}});return g}),define("views/modules/featured-content",["jquery","underscore","backbone","baseview","pubsub"],function(a,b,c,d,e){var f=d.extend({events:{"click .indicator span":"scroll"},initialize:function(c){b.bindAll(this,"starttimer","stoptimer"),c=a.extend({itemWidth:180,itemsPerView:4,transition:{interval:15e3}},c||{}),this.moveMe=this.$(".featured-content ul"),this.$=this.$(".featured-content ."),this.$.on("mouseenter."+this.cid,this.stoptimer),this.$.on("mouseleave."+this.cid,this.starttimer);if(typeof c.transition!="undefined"){var e=c.transition;this.interval=e.interval||!1,this.timer=null,b.bindAll(this,"automate","starttimer","stoptimer"),this.interval&&this.starttimer()}d.prototype.initialize.call(this,c)},automate:function(){var a=this.$(".indicator .selected"),b=a.index(),c=this.$(".indicator span"),d=c.length;b<d-1?c.eq(b+1).click():c.eq(0).click()},destroy:function(a){this.$.off("."+this.cid),this.stoptimer(),d.prototype.destroy.call(this,a)},scroll:function(b){var c=a(b.currentTarget).index(),d=this.options.itemWidth*this.options.itemsPerView,e=d*c,f={left:"-"+e+"px"},g=c*this.options.itemsPerView,h=g+this.options.itemsPerView,i;return a(b.currentTarget).siblings().removeClass("selected"),a(b.currentTarget).addClass("selected"),this.animate(this.moveMe,"left","-"+e+"px",450,"ease-in-out"),this.moveMe.find("li img").each(function(b,c){i=a(c),b>=g&&b<h&&i.attr("data-src")&&(i.attr("src",i.attr("data-src")),i.attr("data-src",null))}),!1},starttimer:function(){this.interval&&!this.timer&&(this.timer=setInterval(this.automate,this.interval))},stoptimer:function(){this.timer&&(clearInterval(this.timer),this.timer=null)}});return f}),define("views/modules/blogs",["jquery","underscore","backbone","baseview","pubsub"],function(a,b,c,d,e){var f=d.extend({events:{"click .scroller":"scroll"},initialize:function(b){this.$moveMe=this.$(".stage ul"),this.totalItems=a("li",this.$moveMe).length,this.$scrollerLeft=this.$(".scroller.left"),this.$scrollerRight=this.$(".scroller.right"),d.prototype.initialize.call(this,b)},scroll:function(b){var c=a(b.target);if(c.hasClass("disabled"))return!1;var d=c.hasClass("right"),e=this.$moveMe.data("item-offset"),f=4;window.matchMedia("screen and (min-width: 1440px)").matches?f=6:window.matchMedia("screen and (min-width: 1240px)").matches&&(f=5),d&&(f*=-1);var g=f+e;g>0&&(g=0);var h=e*190-1,i=f*190,j=i+h;j=g*190-1,g==0?this.$scrollerLeft.addClass("disabled"):this.$scrollerLeft.removeClass("disabled");var k=Math.abs(g)+Math.abs(f);return k>=this.totalItems?(this.$scrollerRight.addClass("disabled"),f+=k-this.totalItems,g=f+e,i=f*190,j=i+h,j=g*190-1):this.$scrollerRight.removeClass("disabled"),this.$moveMe.data("item-offset",g),this.animate(this.$moveMe,"left",j+"px",200,"ease-in"),!1}});return f}),define("views/modules/about/national-settings",[],function(){return{target:"#about-maps",
maps:
[
	{
		id:"hawaii",url:"",scrollTo:!1,zoom:!1,options:
	    {
			lat:20.591652120829167,lon:-157.2802734375,zoom:4},data:
			{
				temp:["Honolulu HI"],radar:!1,satellite:!1
			}
		},
		{
			id:"alaska",url:"",scrollTo:!1,zoom:!1,options:
			{
				lat:62.75472592723178,lon:-155.390625,zoom:2
			},data:
			{
				temp:["Anchorage AK"],radar:!1,satellite:!1
			}
		}
	]
	}
	}
	),
	define("views/modules/about/local-settings",[],function(){return{target:"#about-maps",maps:[{id:"continental",url:"",scrollTo:!0,zoom:!0,options:{zoom:9,minZoom:4,dragging:!0,doubleClickZoom:!0,scrollWheelZoom:!0},bounds:{top:49.3457868,left:-124.7844079,right:-66.9513812,bottom:24.7433195},data:{radar:!0,satellite:!0,worldSatellite:!1}}]}});var swfobject=function(){function A(){if(t)return;try{var a=i.getElementsByTagName("body")[0].appendChild(Q("span"));a.parentNode.removeChild(a)}catch(b){return}t=!0;var c=l.length;for(var d=0;d<c;d++)l[d]()}function B(a){t?a():l[l.length]=a}function C(b){if(typeof h.addEventListener!=a)h.addEventListener("load",b,!1);else if(typeof i.addEventListener!=a)i.addEventListener("load",b,!1);else if(typeof h.attachEvent!=a)R(h,"onload",b);else if(typeof h.onload=="function"){var c=h.onload;h.onload=function(){c(),b()}}else h.onload=b}function D(){k?E():F()}function E(){var c=i.getElementsByTagName("body")[0],d=Q(b);d.setAttribute("type",e);var f=c.appendChild(d);if(f){var g=0;(function(){if(typeof f.GetVariable!=a){var b=f.GetVariable("$version");b&&(b=b.split(" ")[1].split(","),y.pv=[parseInt(b[0],10),parseInt(b[1],10),parseInt(b[2],10)])}else if(g<10){g++,setTimeout(arguments.callee,10);return}c.removeChild(d),f=null,F()})()}else F()}function F(){var b=m.length;if(b>0)for(var c=0;c<b;c++){var d=m[c].id,e=m[c].callbackFn,f={success:!1,id:d};

if(y.pv[0]>0){var g=P(d);if(g)if(S(m[c].swfVersion)&&!(y.wk&&y.wk<312))U(d,!0),e&&(f.success=!0,f.ref=G(d),e(f));else if(m[c].expressInstall&&H()){var h={};

h.data=m[c].expressInstall,h.width=g.getAttribute("width")||"0",h.height=g.getAttribute("height")||"0",g.getAttribute("class")&&(h.styleclass=g.getAttribute("class")),g.getAttribute("align")&&(h.align=g.getAttribute("align"));var i={},j=g.getElementsByTagName("param"),k=j.length;for(var l=0;l<k;l++)j[l].getAttribute("name").toLowerCase()!="movie"&&(i[j[l].getAttribute("name")]=j[l].getAttribute("value"));I(h,i,d,e)}else J(g),e&&e(f)}else{U(d,!0);if(e){var n=G(d);n&&typeof n.SetVariable!=a&&(f.success=!0,f.ref=n),e(f)}}}}function G(c){var d=null,e=P(c);if(e&&e.nodeName=="OBJECT")if(typeof e.SetVariable!=a)d=e;else{var f=e.getElementsByTagName(b)[0];f&&(d=f)}return d}function H(){return!u&&S("6.0.65")&&(y.win||y.mac)&&!(y.wk&&y.wk<312)}function I(b,c,d,e){u=!0,r=e||null,s={success:!1,id:d};

var g=P(d);if(g){g.nodeName=="OBJECT"?(p=K(g),q=null):(p=g,q=d),b.id=f;if(typeof b.width==a||!/%$/.test(b.width)&&parseInt(b.width,10)<310)b.width="310";if(typeof b.height==a||!/%$/.test(b.height)&&parseInt(b.height,10)<137)b.height="137";i.title=i.title.slice(0,47)+" - Flash Player Installation";var j=y.ie&&y.win?"ActiveX":"PlugIn",k="MMredirectURL="+h.location.toString().replace(/&/g,"%26")+"&MMplayerType="+j+"&MMdoctitle="+i.title;typeof c.flashvars!=a?c.flashvars+="&"+k:c.flashvars=k;if(y.ie&&y.win&&g.readyState!=4){var l=Q("div");d+="SWFObjectNew",l.setAttribute("id",d),g.parentNode.insertBefore(l,g),g.style.display="none",function(){g.readyState==4?g.parentNode.removeChild(g):setTimeout(arguments.callee,10)}()}L(b,c,d)}}function J(a){if(y.ie&&y.win&&a.readyState!=4){var b=Q("div");a.parentNode.insertBefore(b,a),b.parentNode.replaceChild(K(a),b),a.style.display="none",function(){a.readyState==4?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)}()}else a.parentNode.replaceChild(K(a),a)}function K(a){var c=Q("div");if(y.win&&y.ie)c.innerHTML=a.innerHTML;else{var d=a.getElementsByTagName(b)[0];if(d){var e=d.childNodes;if(e){var f=e.length;for(var g=0;g<f;g++)(e[g].nodeType!=1||e[g].nodeName!="PARAM")&&e[g].nodeType!=8&&c.appendChild(e[g].cloneNode(!0))}}}return c}function L(c,d,f){var g,h=P(f);if(y.wk&&y.wk<312)return g;if(h){typeof c.id==a&&(c.id=f);if(y.ie&&y.win){var i="";for(var j in c)c[j]!=Object.prototype[j]&&(j.toLowerCase()=="data"?d.movie=c[j]:j.toLowerCase()=="styleclass"?i+=' class="'+c[j]+'"':j.toLowerCase()!="classid"&&(i+=" "+j+'="'+c[j]+'"'));var k="";for(var l in d)d[l]!=Object.prototype[l]&&(k+='<param name="'+l+'" value="'+d[l]+'" />');h.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+i+">"+k+"</object>",n[n.length]=c.id,g=P(c.id)}else{var m=Q(b);m.setAttribute("type",e);for(var o in c)c[o]!=Object.prototype[o]&&(o.toLowerCase()=="styleclass"?m.setAttribute("class",c[o]):o.toLowerCase()!="classid"&&m.setAttribute(o,c[o]));for(var p in d)d[p]!=Object.prototype[p]&&p.toLowerCase()!="movie"&&M(m,p,d[p]);h.parentNode.replaceChild(m,h),g=m}}return g}function M(a,b,c){var d=Q("param");d.setAttribute("name",b),d.setAttribute("value",c),a.appendChild(d)}function N(a){var b=P(a);b&&b.nodeName=="OBJECT"&&(y.ie&&y.win?(b.style.display="none",function(){b.readyState==4?O(a):setTimeout(arguments.callee,10)}()):b.parentNode.removeChild(b))}function O(a){var b=P(a);if(b){for(var c in b)typeof b[c]=="function"&&(b[c]=null);b.parentNode.removeChild(b)}}function P(a){var b=null;try{b=i.getElementById(a)}catch(c){}return b}function Q(a){return i.createElement(a)}function R(a,b,c){a.attachEvent(b,c),o[o.length]=[a,b,c]}function S(a){var b=y.pv,c=a.split(".");return c[0]=parseInt(c[0],10),c[1]=parseInt(c[1],10)||0,c[2]=parseInt(c[2],10)||0,b[0]>c[0]||b[0]==c[0]&&b[1]>c[1]||b[0]==c[0]&&b[1]==c[1]&&b[2]>=c[2]?!0:!1}function T(c,d,e,f){if(y.ie&&y.mac)return;var g=i.getElementsByTagName("head")[0];if(!g)return;var h=e&&typeof e=="string"?e:"screen";f&&(v=null,w=null);if(!v||w!=h){var j=Q("style");j.setAttribute("type","text/css"),j.setAttribute("media",h),v=g.appendChild(j),y.ie&&y.win&&typeof i.styleSheets!=a&&i.styleSheets.length>0&&(v=i.styleSheets[i.styleSheets.length-1]),w=h}y.ie&&y.win?v&&typeof v.addRule==b&&v.addRule(c,d):v&&typeof i.createTextNode!=a&&v.appendChild(i.createTextNode(c+" {"+d+"}"))}function U(a,b){if(!x)return;var c=b?"visible":"hidden";t&&P(a)?P(a).style.visibility=c:T("#"+a,"visibility:"+c)}function V(b){var c=/[\\\"<>\.;]/,d=c.exec(b)!=null;return d&&typeof encodeURIComponent!=a?encodeURIComponent(b):b}var a="undefined",b="object",c="Shockwave Flash",d="ShockwaveFlash.ShockwaveFlash",e="application/x-shockwave-flash",f="SWFObjectExprInst",g="onreadystatechange",h=window,i=document,j=navigator,k=!1,l=[D],m=[],n=[],o=[],p,q,r,s,t=!1,u=!1,v,w,x=!0,y=function(){var f=typeof i.getElementById!=a&&typeof i.getElementsByTagName!=a&&typeof i.createElement!=a,g=j.userAgent.toLowerCase(),l=j.platform.toLowerCase(),m=l?/win/.test(l):/win/.test(g),n=l?/mac/.test(l):/mac/.test(g),o=/webkit/.test(g)?parseFloat(g.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,p=!1,q=[0,0,0],r=null;if(typeof j.plugins!=a&&typeof j.plugins[c]==b)r=j.plugins[c].description,r&&(typeof j.mimeTypes==a||!j.mimeTypes[e]||!!j.mimeTypes[e].enabledPlugin)&&(k=!0,p=!1,r=r.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),q[0]=parseInt(r.replace(/^(.*)\..*$/,"$1"),10),q[1]=parseInt(r.replace(/^.*\.(.*)\s.*$/,"$1"),10),q[2]=/[a-zA-Z]/.test(r)?parseInt(r.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof h.ActiveXObject!=a)try{var s=new ActiveXObject(d);s&&(r=s.GetVariable("$version"),r&&(p=!0,r=r.split(" ")[1].split(","),q=[parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10)]))}catch(t){}return{w3:f,pv:q,wk:o,ie:p,win:m,mac:n}}(),z=function(){if(!y.w3)return;(typeof i.readyState!=a&&i.readyState=="complete"||typeof i.readyState==a&&(i.getElementsByTagName("body")[0]||i.body))&&A(),t||(typeof i.addEventListener!=a&&i.addEventListener("DOMContentLoaded",A,!1),y.ie&&y.win&&(i.attachEvent(g,function(){i.readyState=="complete"&&(i.detachEvent(g,arguments.callee),A())}),h==top&&function(){if(t)return;try{i.documentElement.doScroll("left")}catch(a){setTimeout(arguments.callee,0);return}A()}()),y.wk&&function(){if(t)return;if(!/loaded|complete/.test(i.readyState)){setTimeout(arguments.callee,0);return}A()}(),C(A))}(),W=function(){y.ie&&y.win&&window.attachEvent("onunload",function(){var a=o.length;for(var b=0;b<a;b++)o[b][0].detachEvent(o[b][1],o[b][2]);var c=n.length;for(var d=0;d<c;d++)N(n[d]);for(var e in y)y[e]=null;y=null;for(var f in swfobject)swfobject[f]=null;swfobject=null})}();return{registerObject:function(a,b,c,d){if(y.w3&&a&&b){var e={};

e.id=a,e.swfVersion=b,e.expressInstall=c,e.callbackFn=d,m[m.length]=e,U(a,!1)}else d&&d({success:!1,id:a})},getObjectById:function(a){if(y.w3)return G(a)},embedSWF:function(c,d,e,f,g,h,i,j,k,l){var m={success:!1,id:d};

y.w3&&!(y.wk&&y.wk<312)&&c&&d&&e&&f&&g?(U(d,!1),B(function(){e+="",f+="";var n={};

if(k&&typeof k===b)for(var o in k)n[o]=k[o];n.data=c,n.width=e,n.height=f;var p={};

if(j&&typeof j===b)for(var q in j)p[q]=j[q];if(i&&typeof i===b)for(var r in i)typeof p.flashvars!=a?p.flashvars+="&"+r+"="+i[r]:p.flashvars=r+"="+i[r];if(S(g)){var s=L(n,p,d);n.id==d&&U(d,!0),m.success=!0,m.ref=s}else{if(h&&H()){n.data=h,I(n,p,d,l);return}U(d,!0)}l&&l(m)})):l&&l(m)},switchOffAutoHideShow:function(){x=!1},ua:y,getFlashPlayerVersion:function(){return{major:y.pv[0],minor:y.pv[1],release:y.pv[2]}},hasFlashPlayerVersion:S,createSWF:function(a,b,c){return y.w3?L(a,b,c):undefined},showExpressInstall:function(a,b,c,d){y.w3&&H()&&I(a,b,c,d)},removeSWF:function(a){y.w3&&N(a)},createCSS:function(a,b,c,d){y.w3&&T(a,b,c,d)},addDomLoadEvent:B,addLoadEvent:C,getQueryParamValue:function(a){var b=i.location.search||i.location.hash;if(b){/\?/.test(b)&&(b=b.split("?")[1]);if(a==null)return V(b);var c=b.split("&");for(var d=0;d<c.length;d++)if(c[d].substring(0,c[d].indexOf("="))==a)return V(c[d].substring(c[d].indexOf("=")+1))}return""},expressInstallCallback:function(){if(u){var a=P(f);a&&p&&(a.parentNode.replaceChild(p,a),q&&(U(q,!0),y.ie&&y.win&&(p.style.display="block")),r&&r(s)),u=!1}}}}();define("libs/swfobject/swfobject",function(){}),define("libs/onlineopinion/oo_engine",[],function(){var a={Browser:function(){var a=navigator.userAgent,b=Object.prototype.toString.call(window.opera)==="[object Opera]",c={IE:!!window.attachEvent&&!b,Opera:b,WebKit:a.indexOf("AppleWebKit/")>-1,Chrome:a.indexOf("Chrome")>-1,Gecko:a.indexOf("Gecko")>-1&&a.indexOf("KHTML")===-1,MobileSafari:/Apple.*Mobile.*Safari/.test(a),PalmPre:a.indexOf("Pre/")>-1,BlackBerry:a.indexOf("BlackBerry")>-1,Fennec:a.indexOf("Fennec")>-1,IEMobile:a.indexOf("IEMobile")>-1,OperaMobile:a.search(/Opera (?:Mobi|Mini)/)>-1,ua:a},d=!1;return c.isMobile=c.MobileSafari||c.PalmPre||c.BlackBerry||c.Fennec||c.IEMobile||c.OperaMobile,c}()};

a.Cache={},a.instanceCount=0,a.K=function(){};

var b=b||a;return function(){function b(a){return document.getElementById(a)}function c(a,b){var c;for(c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function d(a,b,c,d){a.addEventListener?a.addEventListener(b,c,d):a.attachEvent&&a.attachEvent("on"+b,c)}function e(a,b,c,d){a.removeEventListener?a.removeEventListener(b,c,d):a.detachEvent&&a.detachEvent("on"+b,c)}function f(a){var b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push(c+"="+(encodeURIComponent(a[c])||""));return b.join("&")}function g(b){var c=f(b.metrics),d=b.tealeafId+"|"+b.clickTalePID+"/"+b.clickTaleUID+"/"+b.ClickTaleGetSID;return c+="&custom_var="+a.createLegacyVars(b.legacyVariables,d),b.metrics.type==="OnPage"&&(c+="|iframe"),b.asm&&(c+="&asm=2"),c+="&_rev=2",b.customVariables&&(c+="&customVars="+encodeURIComponent(a.serialize(b.customVariables))),c}function h(b,c){var d=document,e=d.createElement("form"),f=d.createElement("input"),h=b.referrerRewrite;return b.metrics.referer=location.href,h&&(b.metrics.referer=a.referrerRewrite(h)),e.style.display="none",e.method="post",e.target=c||"OnlineOpinion",e.action=b.onPageCard?""+location.href:"",b.commentCardUrl&&(e.action=b.commentCardUrl,b.onPageCard&&(e.action+="?r="+location.href)),f.name="params",f.value=g(b),e.appendChild(f),d.body.appendChild(e),e}function i(){return{width:screen.width,height:screen.height,referer:location.href,prev:document.referrer,time1:(new Date).getTime(),time2:null,currentURL:location.href,ocodeVersion:"5.6.2"}}function j(a,b){return a=a||{},typeof a=="string"?b+"|"+a:a.override?a.vars:b+(a.vars?"|"+a.vars:"")}function k(a,b){return b||(b=location),typeof a=="string"?a:a.searchPattern?b.href.replace(a.searchPattern,a.replacePattern):a.replacePattern}function n(){a.$("oo_container").style.display="none"}function o(){var b=a.$("oo_invitation_prompt");if(b){var c=a.$("oo_container");this.showPrompt(c);return}var d=window.XMLHttpRequest?new XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP"),e=this,f=document.createElement("link"),g;d.onreadystatechange=function(){if(d.readyState!==4)return;e.showPrompt(d.responseText)},d.open("GET",this.options.pathToAssets+this.options.promptMarkup,!0),d.send(null)}function p(b,c){var d=document,e=typeof b=="string"?d.createElement("div"):b,f=d.createElement("div"),g,h,i=this.options,j;f.id="oo_invitation_overlay",e.id="oo_container",e.style.visibility="hidden",typeof b=="string"&&(e.innerHTML=b,d.body.appendChild(e)),e.appendChild(f),j=a.$("oo_launch_prompt"),i.companyLogo&&(g=new Image,g.src=i.companyLogo,a.$("oo_company_logo").appendChild(g)),a.addEventListener(j,"click",c.bind(this),!1),i.clickCallbacks&&(typeof i.clickCallbacks.yes=="function"&&a.addEventListener(j,"click",function(){i.clickCallbacks.yes()},!1),typeof i.clickCallbacks.no=="function"&&a.addEventListener(a.$("oo_no_thanks"),"click",function(){i.clickCallbacks.no()},!1)),i.neverShowAgainButton&&(h=a.$("oo_never_show"),h.style.visibility="visible",a.addEventListener(h,"click",this.killPrompt.bind(this),!1)),a.Browser.IE&&!window.XMLHttpRequest&&(f.style.position="absolute",f.style.width=Math.max(document.documentElement.clientWidth,document.body.offsetWidth)+"px",f.style.height=Math.max(document.documentElement.clientHeight,document.body.offsetHeight)+"px",e.style.position="absolute"),e.style.visibility="visible",e.style.display="block",f.className="no_loading"}var l=function(){var a=document.body,b,c,d,e,f;return document.createElement&&a&&a.appendChild&&a.removeChild?(b=document.createElement("div"),b.getBoundingClientRect?(b.innerHTML="x",b.style.cssText="position:fixed;top:100px;",a.appendChild(b),c=a.style.height,d=a.scrollTop,a.style.height="3000px",a.scrollTop=500,e=b.getBoundingClientRect().top,a.style.height=c,f=e===100,a.removeChild(b),a.scrollTop=d,f):null):null}(),m=function(){if(navigator.appName==="Microsoft Internet Explorer"&&navigator.userAgent.search("MSIE 6")!==-1)return!0;var a=document.body,b,c;return document.createElement&&a&&a.appendChild&&a.removeChild?(b=document.createElement("iframe"),c=!1,b.setAttribute("name","oo_test"),b.style.display="none",a.appendChild(b),c=!document.getElementsByName("oo_test")[0],a.removeChild(b),c):null}();c(a,{extend:c,toQueryString:f,addEventListener:d,$:b,appendOOForm:h,removeEventListener:e,createMetrics:i,createLegacyVars:j,POSITION_FIXED_SUPPORTED:l,DYNAMIC_FRAME_NAME_IS_BUGGY:m,getFormParams:g,referrerRewrite:k,hidePrompt:n,getPrompt:o,showPrompt:p})}(),function(){function b(a){if(!a)return null;switch(typeof a){case"number":case"boolean":case"function":return a;case"string":return"'"+a+"'";case"object":var c,d,e,g;if(a.constructor===Array||typeof a.callee!="undefined"){c="[",e=a.length;for(d=0;d<e-1;d+=1)c+=b(a[d])+",";c+=b(a[d])+"]"}else{c="{";for(g in a)a.hasOwnProperty(g)&&(c+=g+":"+b(a[g])+",");c=c.replace(/\,$/,"")+"}"}return c;default:return null}}a.extend(a,{serialize:b})}(),function(){function b(b,c,d){var e;return b.search(c[0])!==-1?(a.createCookie(d,0),!1):a.readCookie(d)?(e=parseInt(a.readCookie(d),10),b.search(c[e+1])!==-1&&e+1!==c.length-1?(a.createCookie(d,e+1),!1):b.search(c[e])!==-1?!1:e+1===c.length-1&&b.search(c.pop())!==-1?(a.eraseCookie(d),!0):(a.eraseCookie(d),!1)):!1}a.extend(a,{checkTunnel:b})}(),function(){function b(a){var b="",c;for(c=7;c>=0;c-=1)b+="0123456789abcdef".charAt(a>>c*4&15);return b}function c(a){var b=(a.length+8>>6)+1,c=new Array(b*16),d;for(d=0;d<b*16;d+=1)c[d]=0;for(d=0;d<a.length;d+=1)c[d>>2]|=a.charCodeAt(d)<<24-d%4*8;return c[d>>2]|=128<<24-d%4*8,c[b*16-1]=a.length*8,c}function d(a,b){var c=(a&65535)+(b&65535),d=(a>>16)+(b>>16)+(c>>16);return d<<16|c&65535}function e(a,b){return a<<b|a>>>32-b}function f(a,b,c,d){return a<20?b&c|~b&d:a<40?b^c^d:a<60?b&c|b&d|c&d:b^c^d}function g(a){return a<20?1518500249:a<40?1859775393:a<60?-1894007588:-899497514}function h(a){var h=c(a),i=new Array(80),j=1732584193,k=-271733879,l=-1732584194,m=271733878,p=-1009589776,q,s,u,x,y,z,A,B;for(A=0;A<h.length;A+=16){q=j,s=k,u=l,x=m,y=p;for(B=0;B<80;B+=1)B<16?i[B]=h[A+B]:i[B]=e(i[B-3]^i[B-8]^i[B-14]^i[B-16],1),z=d(d(e(j,5),f(B,k,l,m)),d(d(p,i[B]),g(B))),p=m,m=l,l=e(k,30),k=j,j=z;j=d(j,q),k=d(k,s),l=d(l,u),m=d(m,x),p=d(p,y)}return b(j)+b(k)+b(l)+b(m)+b(p)}a.extend(a,{sha1:h})}(),function(){function b(b,c){c||(c=location);var d=b.cookieName||"oo_abandon",e=a.readCookie(d),f=b.startPage,g=b.endPage,h=b.middle;return e?c.pathname.indexOf(g)!==-1?(a.eraseCookie(d),!1):c.pathname.search(h)!==-1?!1:(a.eraseCookie(d),!0):(c.pathname.indexOf(f)!==-1&&a.createCookie(d),!1)}a.extend(a,{checkAbandonment:b})}(),function(){function b(b){var c,d;for(c=b.length-1;c>=0;c-=1)if(b[c].read){d=a.readCookie(b[c].name);if(!!d&&d===b[c].value)return!0;if(typeof b[c].value=="undefined"&&!!a.readCookie(b[c].name))return!0}return!1}function c(b){var c;for(c=b.length-1;c>=0;c-=1)b[c].set&&a.createCookie(b[c].name,b[c].value,b[c].expiration)}a.extend(a,{checkThirdPartyCookies:b,setThirdPartyCookies:c})}(),a.extend(Function.prototype,function(){function b(a,b){var c=a.length,d=b.length;while(d)d-=1,a[c+d]=b[d];return a}function c(c,d){return c=a.call(c,0),b(c,d)}function d(b){if(arguments.length<2&&typeof b=="undefined")return this;var d=this,f=a.call(arguments,1);return function(){var a=c(f,arguments);return d.apply(b,a)}}if(typeof Function.prototype.bind!="undefined")return;var a=Array.prototype.slice;return{bind:d}}()),function(){function b(a){a||(a=location);var b;if(a.host.search(/\.[a-z]+/)!==-1){b=a.host.split(".").reverse();if(b.length>3)return a.host;b="."+b[1]+"."+b[0]}else b=a.host;return b}function c(a,c,d){var e="",g="";d&&(e=new Date,e.setTime(e.getTime()+d*1e3),g="; expires="+e.toGMTString()),location.host!==b()?document.cookie=a+"="+c+g+"; path=/; domain="+b()+";":document.cookie=a+"="+c+g+"; path=/;"}function d(a){var b=a+"=",c=document.cookie.split(";"),d,e;for(e=0;e<c.length;e+=1){d=c[e];while(d.charAt(0)===" ")d=d.substring(1,d.length);if(d.indexOf(b)===0)return d.substring(b.length,d.length)}return null}function e(a){c(a,"",-1)}a.extend(a,{getCookieDomain:b,createCookie:c,readCookie:d,eraseCookie:e})}(),a.Ocode=function(b){var c=a.Browser,d,e;if(b.disableMobile&&c.isMobile)return;if(b.disableNoniOS&&(navigator.userAgent.search("Android")!==-1||c.PalmPre||c.IEMobile||c.OperaMobile||c.Fennec))return;a.instanceCount+=1,this.options={tealeafCookieName:"TLTSID"},a.extend(this.options,b),d=this.options,d.metrics=a.createMetrics(),this.frameName=d.onPageCard?"OnlineOpinion"+a.instanceCount:"OnlineOpinion";if(d.cookie&&a.Ocode.matchUrl(d.cookie,location))return;if(d.thirdPartyCookies&&a.checkThirdPartyCookies(d.thirdPartyCookies))return;if(d.abandonment&&!a.checkAbandonment(d.abandonment))return;if(d.tunnel&&!a.checkTunnel(location.pathname,d.tunnel.path,d.tunnel.cookieName))return;d.events&&d.events.onSingleClick&&(this.singProbability=Math.random()<1-d.events.onSingleClick/100),d.tealeafId=a.readCookie(d.tealeafCookieName)||a.readCookie(d.sessionCookieName),d.events&&(this.setupEvents(),(d.events.disableLinks||d.events.disableFormElements)&&this.setupDisableElements()),d.floating?this.floating():d.bar?this.bar():d.tab&&this.tab()},a.Ocode.prototype={show:function(b,c){b==="Tab"&&c&&c.preventDefault&&c.preventDefault();if(this.onPageCardVisible)return;var d=this.options,e;d.events&&d.events.prompt&&(d.cookie&&a.eraseCookie(d.cookie.name||"oo_r"),a.hidePrompt());if(this.interruptShow)return;if(!this.floatingLogo&&d.cookie&&a.Ocode.matchUrl(d.cookie))return;if(!d.floating&&d.events&&this.singProbability)return;d.events&&d.events.onSingleClick&&(this.singProbability=!0),d.cookie&&a.Ocode.tagUrl(d.cookie);if(d.thirdPartyCookies){if(a.checkThirdPartyCookies(d.thirdPartyCookies))return;a.setThirdPartyCookies(d.thirdPartyCookies)}this.floatingLogo&&this.floatingLogo.children[0].blur(),this.floatingLogo&&d.disappearOnClick&&(this.floatingLogo.style.display="none"),b&&(d.metrics.trigger=b),d.clickTalePID&&typeof window.ClickTale=="function"&&(d.clickTaleUID=window.ClickTaleGetUID(),d.clickTaleSID=window.ClickTaleGetSID()),d.onPageCard?this.setupOnPageCC():this.launchOOPopup(),e=d.floating||d.tab||d.bar,e&&typeof e.onClickCallback=="function"&&e.onClickCallback();if(a.Browser.IE)return!1}},a.extend(a.Ocode,{tagUrl:function(b,c){c||(c=location);var d=b.name||"oo_r",e=b.type==="page"?c.href:c.hostname,f=a.readCookie(d)||"";if(a.Ocode.matchUrl(b,c))return;a.createCookie(d,f+a.sha1(e),b.expiration)},matchUrl:function(b,c){c||(c=location);var d=a.readCookie(b.name||"oo_r"),e;return d?(e=b.type==="page"?c.href:c.hostname,d.search(a.sha1(e))!==-1):!1}}),function(){function b(){var b=this.options,c=b.newWindowSize||[545,325],d=[parseInt((b.metrics.height-c[1])/2,10),parseInt((b.metrics.width-c[0])/2,10)],e,f,g="location=no,status=no,width="+c[0]+",height="+c[1]+",top="+d[0]+",left="+d[1],h=a.Browser.IE&&navigator.userAgent.search("MSIE 7")!==-1;b.metrics.time2=(new Date).getTime(),b.metrics.type="Popup",b.asm&&(g+=",scrollbars=1"),e=a.appendOOForm(b),f=window.open(h?b.commentCardUrl||""+e.children[0].value:"","OnlineOpinion",g),f&&!h&&e.submit()}a.extend(a.Ocode.prototype,{launchOOPopup:b})}(),function(){function b(){var b=this.options.events,c=[!1,!1],d=["onExit","onEntry"],e=a.Browser.Opera?"unload":"beforeunload",f,g,h,i,j;b.prompt&&a.extend(this.options,{promptMarkup:b.prompt.promptMarkup||"oo_event_prompt.html",neverShowAgainButton:!1,pathToAssets:b.prompt.pathToAssets});for(h=d.length-1;h>=0;h-=1){f=d[h];if(b[f]instanceof Array){i=b[f],j=i.length;while(j&&!c[h])j-=1,window.location.href.search(i[j].url)!==-1&&Math.random()>=1-i[j].p/100&&(c[h]=!0)}else b[f]&&Math.random()>=1-b[f]/100&&(c[h]=!0)}c[0]&&a.addEventListener(window,e,this.show.bind(this,"onExit"),!1),c[1]&&(b.delayEntry?window.setTimeout(function(){b.prompt?this.getPrompt():this.show()}.bind(this,"onEntry"),b.delayEntry*1e3):b.prompt?this.getPrompt():this.show("onEntry"))}function c(a){var b=a||window.event,c=a.target||a.srcElement,d=this.options.events,e=c.parentNode,f=5,g=0;while(e&&(c.nodeName!=="A"||c.nodeName!=="INPUT")&&g!==f)e.nodeName==="A"&&(c=e),e=e.parentNode,g+=1;d.disableFormElements&&c.tagName==="INPUT"&&(c.type==="submit"||c.type==="image")&&(this.interruptShow=!0),d.disableLinks&&c.nodeName==="A"&&c.href.substr(0,4)==="http"&&c.href.search(d.disableLinks)!==-1&&(this.interruptShow=!0)}function d(a){this.interruptShow=!0}function e(){a.addEventListener(document.body,"mousedown",c.bind(this));if(!this.options.events.disableFormElements)return;var b=document.getElementsByTagName("form"),e;for(e=b.length-1;e>=0;e-=1)a.addEventListener(b[e],"submit",d.bind(this))}a.extend(a.Ocode.prototype,{setupEvents:b,setupDisableElements:e,getPrompt:function(){a.getPrompt.call(this)},showPrompt:function(b){this.options.cookie&&a.Ocode.tagUrl(this.options.cookie),a.showPrompt.call(this,b,this.show)}})}(),a.extend(a.Ocode.prototype,{floating:function(){function u(a){return a.offsetLeft+a.offsetWidth}function v(a){p.style.left=u(i)+"px"}function w(a){var d=b.documentElement.scrollTop||b.body.scrollTop,e=b.documentElement.clientHeight||document.body.clientHeight;c.style.top=d+e-(s||0)-10+"px"}var b=document,c=this.floatingLogo=document.createElement("div"),d=b.createElement("div"),e=b.createElement("div"),f=b.createElement("div"),g=b.createElement("span"),h=this.options.floating,i=a.$(h.contentId),j="10px",k=h.id,l=b.createElement("span"),m,n,o,p,q,r,s,t;l.innerHTML="Screen reader users: Please switch to forms mode for this link.",l.className="screenReader",k&&(c.id=k),c.className="oo_feedback_float",e.className="oo_transparent",d.className="olUp",f.className="olOver",d.tabIndex=0,d.onkeyup=function(a){m=a||window.event;if(m.keyCode!==13)return;this.show()}.bind(this),d.innerHTML=h.caption||"Feedback",c.appendChild(l),c.appendChild(d),g.innerHTML=h.hoverCaption||"Click here to<br>rate this page",f.appendChild(g),c.appendChild(f),c.appendChild(e),a.Browser.MobileSafari?a.Browser.ua.search("OS 4")!==-1&&(n=window.innerHeight,c.style.bottom=null,c.style.top=window.pageYOffset+window.innerHeight-60+"px",t=function(a){o=window.pageYOffset-(n-window.innerHeight),c.style.webkitTransform="translateY("+o+"px)"},a.addEventListener(window,"scroll",t,!1),setTimeout(t,100)):a.POSITION_FIXED_SUPPORTED||(c.style.position="absolute",c.style.bottom="",a.addEventListener(window,"scroll",w,!1),a.addEventListener(window,"resize",w,!1),b.compatMode==="BackCompat"&&(c.style.background="white"));if(h.position&&h.position.search(/Content/)&&i){p=this.spacer=b.createElement("div"),q=a.Browser.WebKit?b.body:b.documentElement,p.id="oo_feedback_fl_spacer",p.style.left=u(i)+"px",b.body.appendChild(p);switch(h.position){case"rightOfContent":r=function(b){c.style.left=u(i)-q.scrollLeft+"px",a.POSITION_FIXED_SUPPORTED||(r=null)};

break;case"fixedPreserveContent":r=function(d){var e=a.Browser.IE?b.body.clientWidth:window.innerWidth,f=a.POSITION_FIXED_SUPPORTED?q.scrollLeft:0;e<=u(i)+c.offsetWidth+parseInt(j,10)?c.style.left=u(i)-f+"px":(c.style.left="",c.style.right=j)};

break;case"fixedContentMax":r=function(d){var e=a.Browser.IE?b.body.clientWidth:window.innerWidth;e<=u(i)+c.offsetWidth+parseInt(j,10)?(c.style.left="",c.style.right=j,!a.POSITION_FIXED_SUPPORTED&&d&&d.type==="scroll"&&(c.style.left=b.body.clientWidth+b.body.scrollLeft-105+"px")):(c.style.left=u(i)-q.scrollLeft+"px",c.style.right="")}}window.setTimeout(r,0),a.addEventListener(window,"scroll",r,!1),a.addEventListener(window,"resize",r,!1),a.addEventListener(window,"resize",v,!1)}else c.style.right=j;a.addEventListener(c,"click",this.show.bind(this,"Floating"),!1),a.addEventListener(c,"touchstart",this.show.bind(this,"Floating"),!1),b.body.appendChild(c),!a.POSITION_FIXED_SUPPORTED&&!a.Browser.MobileSafari&&(e.style.height=c.clientHeight+"px",s=c.clientHeight,setTimeout(w,100))},removeFloatingLogo:function(){document.body.removeChild(this.floatingLogo),this.spacer&&document.body.removeChild(this.spacer)}}),a.extend(a.Ocode.prototype,{bar:function(){function i(a){var b=0,c=0;if(a.offsetParent){do c+=a.offsetLeft,b+=a.offsetTop;while(a=a.offsetParent);return[c,b]}}function j(a){var b=document.activeElement,d;if(!b)return;d=i(b);if(!d)return;d[1]+b.clientHeight>(window.innerHeight||document.body.clientHeight)+(window.pageYOffset||document.body.scrollTop)-c.clientHeight&&window.scrollBy(0,b.clientHeight+20)}var b=document,c=this.floatingLogo=b.createElement("div"),d=b.createElement("span"),e,f,g,h=b.documentElement.scrollTop||b.body.scrollTop;this.reflowBar=a.K,c.id="oo_bar",d.innerHTML=this.options.bar.caption||"Feedback",c.appendChild(d),c.tabIndex=0,c.onkeyup=function(a){var b=a||window.event;if(b.keyCode!==13)return;this.show()}.bind(this),a.addEventListener(c,"click",this.show.bind(this,"Bar")),document.body.className+=document.body.className<1?"oo_bar":" oo_bar",document.body.appendChild(c),a.Browser.IE?(b.compatMode==="CSS1Compat"?e=function(a){a&&a.type==="resize"&&setTimeout(e,50),c.style.top=b.documentElement.scrollTop+document.documentElement.clientHeight-c.clientHeight-1+"px",c.style.width=Math.max(b.documentElement.clientWidth,b.body.offsetWidth)+"px"}:e=function(a){c.style.top=b.body.scrollTop+document.body.clientHeight-c.clientHeight-1+"px",c.style.width=Math.max(b.documentElement.clientWidth,b.body.offsetWidth)-22+"px"},c.style.position="absolute",a.addEventListener(window,"scroll",e,!1),a.addEventListener(window,"resize",e,!1),this.reflowBar=function(){c.style.display="none",e(),c.style.display="block"},e()):a.Browser.MobileSafari&&a.Browser.ua.search("OS 4")!==-1&&(f=window.innerHeight,c.style.bottom=null,c.style.top=window.pageYOffset+window.innerHeight-22+"px",e=function(a){g=window.pageYOffset-(f-window.innerHeight),c.style.webkitTransform="translateY("+g+"px)"},a.addEventListener(window,"scroll",e,!1),setTimeout(e,100)),a.addEventListener(document.body,"keyup",j,!1)}}),a.extend(a.Ocode.prototype,{tab:function(){function g(a){var d=b.documentElement.scrollTop||b.body.scrollTop,e=b.documentElement.scrollLeft||b.body.scrollLeft,g=b.documentElement.clientHeight||document.body.clientHeight;c.style.top=d+(g/2-c.clientHeight/2)+"px";if(!f.position||f.position==="right")c.style.right=-1*e+2+"px"}function h(a){c.style.top=window.pageYOffset+(window.innerHeight/2-c.clientHeight/2)+"px",c.style.right=document.documentElement.clientWidth-window.innerWidth-window.pageXOffset-15+"px"}var b=document,c=this.floatingLogo=b.createElement("div"),d=b.createElement("div"),e=b.createElement("span"),f=this.options.tab;c.id="oo_tab",c.className="oo_tab_"+(f.position||"right"),!a.POSITION_FIXED_SUPPORTED&&!a.Browser.MobileSafari&&(c.style.position="absolute",(!f.position||f.position==="right")&&a.Browser.IE&&(c.className+=" oo_tab_ie_right",a.Browser.ua.search("IE 6")===-1&&(a.addEventListener(window,"scroll",g,!1),a.addEventListener(window,"resize",g,!1)))),c.tabIndex=0,c.onkeyup=function(a){var b=a||window.event;if(b.keyCode!==13)return;this.show()}.bind(this),d.appendChild(e),c.appendChild(d),a.addEventListener(c,"click",this.show.bind(this,"Tab"),!1),b.body.appendChild(c),a.Browser.MobileSafari&&a.Browser.ua.search("OS 4")!==-1&&(c.style.position="absolute",a.addEventListener(window,"scroll",h,!1),setTimeout(h,100))}}),a.extend(a.Ocode.prototype,{setupOnPageCC:function(){function z(e){return e&&e.preventDefault&&e.preventDefault(),document.body.focus(),i.tabIndex=-1,i.title="empty",i["aria-hidden"]="true",c.style.display="none",c.className="",b.body.removeChild(d),window.postMessage?a.removeEventListener(window,"message",w):window.clearInterval(o),q=!1,r.onPageCardVisible=!1,!1}var b=document,c=a.Cache.overlay||b.createElement("div"),d=this.wrapper=b.createElement("div"),e=b.createElement("div"),f=b.createElement("div"),g=b.createElement("span"),h=this.frameName,i=b.createElement(a.DYNAMIC_FRAME_NAME_IS_BUGGY?'<iframe name="'+h+'">':"iframe"),j=b.createDocumentFragment(),k=this.options,l=k.onPageCard,m="",n,o,p,q=!1,r=this,s,t,u,v,w,x,y;w=a.Ocode.postMessageHandler(function(e){var f=parseInt(e,10),h,j;if(f>0){if(q)return;q=!0,h=window.innerHeight||b.documentElement.clientHeight||b.body.clientHeight,j=f,y=d.offsetTop,j+y>h&&(j=h-40-y,i.style.width="555px"),i.style.height=j+"px",d.style.visibility="visible",g.clientHeight<20&&(g.style.height=d.offsetHeight+"px"),c.className="no_loading",r.onPageCardVisible=!0}else e==="submitted"&&z();a.Browser.IE&&b.compatMode==="BackCompat"&&window.scrollTo(0,0)},r.options.commentCardUrl),k.metrics.type="OnPage",a.Cache.overlay=c,c.id="oo_overlay",c.style.display="block",c.className="",f.className="iwrapper",d.className="oo_cc_wrapper",e.className="oo_cc_close",e.innerHTML="X",e.title="Click to close comment card",d.style.visibility="hidden",e.tabIndex=0,e.onkeyup=function(a){var b=a||window.event;if(b.keyCode!==13)return;z()};

if(a.Browser.IE){i.frameBorder="0";if(!window.XMLHttpRequest||b.compatMode==="BackCompat")x=Math.max(b.documentElement.clientWidth,b.body.offsetWidth),c.style.position="absolute",c.style.width=b.compatMode==="BackCompat"?x-21+"px":x+"px",c.style.height=Math.max(b.documentElement.clientHeight,b.body.offsetHeight)+"px",d.style.position="absolute",a.addEventListener(window,"scroll",function(){c.style.top=b.body.scrollTop+document.body.clientHeight-c.clientHeight+"px",d.style.top=b.body.scrollTop+y+25+"px"})}a.addEventListener(e,"click",z),l.closeWithOverlay&&!a.Browser.isMobile&&(d.appendChild(g),g.onclick=z,c.onclick=z),i.src=" ",i.name=h,f.appendChild(e),f.appendChild(i),d.appendChild(f),j.appendChild(d),j.appendChild(c),b.body.appendChild(j),window.postMessage?a.addEventListener(window,"message",w):o=setInterval(w,500),k.metrics.time2=(new Date).getTime(),n=a.appendOOForm(k,h),n.submit()}}),a.extend(a.Ocode,{postMessageHandler:function(a,b,c){return function(g){var h="",i;return c||(c=location),g&&g.origin!==h&&g.origin.indexOf(b)===0||!g&&c.hash.search("OL=")===-1?!1:(i=g?g.data:c.hash.split("=").pop(),!g&&location.hash&&(location.hash=""),a(i),i)}}}),a.Invitation=function(b){if(a.Browser.isMobile)return;this.options={tunnelCookie:"oo_inv_tunnel",repromptTime:604800,responseRate:50,repromptCookie:"oo_inv_reprompt",promptMarkup:"oo_inv_prompt.html",promptStyles:"oo_inverstitial_style.css",percentageCookie:"oo_inv_percent",pagesHitCookie:"oo_inv_hit",popupType:"popunder",promptDelay:0,neverShowAgainButton:!1,loadPopupInBackground:!1,tealeafCookieName:"TLTSID",monitorWindow:"oo_inv_monitor.html",beforePrompt:a.K},this.popupShown=!1,a.extend(this.options,b);var c=this.options,d=parseInt(a.readCookie(c.pagesHitCookie),10)||0;a.Invitation.friendlyDomains=c.friendlyDomains||null,location.search.search("evs")!==-1&&(c.loadPopupInBackground=!0,this.launchPopup(),a.createCookie(c.repromptCookie,1,c.repromptTime===-1?0:c.repromptTime)),setTimeout(function(){if(!window.oo_inv_monitor)return;c.area&&location.href.search(c.area)===-1?(this.options.popupType="popup",this.launchPopup()):c.goal&&location.href.search(c.goal)!==-1&&window.oo_inv_monitor.close()}.bind(this),1600);if(a.readCookie(c.repromptCookie))return;if(c.thirdPartyCookies&&a.checkThirdPartyCookies(c.thirdPartyCookies))return;a.readCookie(c.percentageCookie)||a.createCookie(c.percentageCookie,Math.random()>1-c.responseRate/100?"1":"0");if(typeof c.promptTrigger!="undefined")if(c.promptTrigger instanceof RegExp){if(!window.location.href.match(c.promptTrigger))return}else if(c.promptTrigger instanceof Array&&!a.checkTunnel(location.pathname,c.promptTrigger,c.tunnelCookie))return;d+=1,a.createCookie(c.pagesHitCookie,d);if(c.pagesHit&&d<c.pagesHit)return;a.eraseCookie(c.tunnelCookie),a.readCookie(c.percentageCookie)==="1"&&window.setTimeout(function(){a.createCookie(c.repromptCookie,1,c.repromptTime),this.options.beforePrompt(),this.getPrompt()}.bind(this),c.promptDelay*1e3)},a.Invitation.prototype={getPrompt:function(){a.getPrompt.call(this)},showPrompt:function(b){a.showPrompt.call(this,b,this.launchPopup)},launchPopup:function(){if(this.popupShown)return;this.popupShown=!0;var b=this.options,c=window.location.href,d=b.popupType==="popup"?"":b.pathToAssets+b.monitorWindow+"?"+(new Date).getTime()+"&",e,f=[],g=b.asm?[555,500]:[400,335],h,i=a.createMetrics(),j=a.readCookie(b.tealeafCookieName),k;b.clickTalePID&&window.ClickTaleGetUID&&window.ClickTaleGetSID&&(j+="|"+[b.clickTalePID,window.ClickTaleGetUID(),window.ClickTaleGetSID()].join("/")),g=b.newWindowSize||g,k="location=no,status=no,width="+g[0]+",height="+g[1],b.referrerRewrite&&(i.referer=a.referrerRewrite(b.referrerRewrite)),b.thirdPartyCookies&&a.setThirdPartyCookies(b.thirdPartyCookies),e=a.toQueryString(i)+"&type=Invitation",b.customVariables&&(e+="&customVars="+encodeURIComponent(a.serialize(b.customVariables))),e+="&custom_var="+a.createLegacyVars(b.legacyVariables,j),b.asm&&(e+="&asm=2",k+=",scrollbars=1"),h=window.open(d+e,"OnlineOpinionInvitation",k),!b.loadPopupInBackground&&a.$("oo_container")&&a.hidePrompt(),b.popupType==="popunder"?a.Browser.Chrome?(b.loadPopupInBackground||window.alert(b.chromeMainWinPrompt||"Please fill out the form behind this window when you are finished."),b.chromeSurveyPrompt&&setTimeout(function(a){h.postMessage(b.chromeSurveyPrompt,"*")},500)):(h.blur(),window.focus()):window.oo_inv_monitor&&(window.blur(),h.focus())},killPrompt:function(){this.options.clickCallbacks&&typeof this.options.clickCallbacks.no=="function"&&this.options.clickCallbacks.no(),a.createCookie(this.options.repromptCookie,1,15768e4),a.hidePrompt()}},a.extend(a.Invitation,{navigateToFriendlyDomain:function(a){location.href=a}}),a}),define("views/modules/email-widget",["jquery","underscore","backbone","baseview","pubsub","app"],function(a,b,c,d,e,f){var g=d.extend({el:".email-widget-wrapper",events:{"click .email-widget .cta .cancel":"onClickCancel","click .cta .send":"onClickSend","submit .email-widget-form":"onSubmitEmailForm",click:"toggle"},initialize:function(){b.bindAll(this,"toggle"),this.$btn=a(".open-email-widget"),this.$win=f.get("win"),this.$container=a(".email-widget"),this.$emailForm=this.$(".email-widget-form"),this.link=window.location.href,this.toggle(),d.prototype.initialize.apply(this,arguments)},onClickSend:function(a){this.$emailForm.trigger("submit")},onSubmitEmailForm:function(c){c.preventDefault(),this.isValid(this.$emailForm)&&a.ajax({type:"POST",url:this.$emailForm.attr("action"),data:this.$emailForm.serialize()}).done(b.bind(function(a){this.$container.removeClass("open"),this.$(".email-success").show()},this))},isValid:function(b){var c=!0;return b.children("input,textarea").removeClass("error").each(function(b,d){var e=a(d);e.hasClass("required")&&e.val()===""&&(e.addClass("error"),c=!1)}),c?!0:!1},onClickCancel:function(a){this.toggle(undefined,!0)},toggle:function(c,d){d=d||this.$btn.hasClass("open");if(c)if(a(c.target).closest(this.$container).length>0||a(c.target).closest(this.$(".success-pane")).length>0)return!1;d?(this.$btn.removeClass("open"),this.$container.removeClass("open"),this.$(".success-pane").hide(),this.destroy()):d===!1&&(this.$btn.addClass("open"),this.$container.addClass("open"),b.delay(b.bind(function(){this.$win.on("click."+this.cid,this.toggle)},this),100))},destroy:function(a){this.$win.off("."+this.cid),d.prototype.destroy.apply(this,arguments)}});return g}),define("views/modules/audio",["jquery","underscore","backbone"],function(a,b,c){var d=c.View.extend({initialize:function(b){this.options=a.extend({},b||{})},destroy:function(){this.remove()}});return d}),define("views/modules/map",["jquery","underscore","backbone"],function(a,b,c){var d=c.View.extend({initialize:function(a){this.loadScripts()},createMap:function(a){var b=this.$el.data(),c=b.attrMapurl,d=parseFloat(b.attrLat),e=parseFloat(b.attrLon),f=b.attrName,g=b.attrSize,h=parseInt(b.attrZoom),i=!1;g=="L"&&(i=!0);var j=new L.Map(this.$el.get(0),{zoomControl:i});j.setView(new L.LatLng(d,e),h),wax.tilejson(c,function(a){j.addLayer(new wax.leaf.connector(a))});var k=L.Icon.extend({options:{iconUrl:"/static/images/modules/maps/marker.png",shadowUrl:"/static/images/modules/maps/marker-shadow.png"}}),l=new k,m=new L.Marker(new L.LatLng(d,e),{icon:l});m.bindPopup(f),j.addLayer(m),g=="L"&&m.openPopup()},loadScripts:function(){typeof L=="undefined"||typeof wax=="undefined"?require(["/static/js/libs/leaflet/leaflet.js"],b.bind(function(){typeof L!="undefined"?require(["/static/js/libs/wax/wax.leaf.min.js"],b.bind(function(){typeof wax!="undefined"?this.createMap():window.console&&window.console.log&&console.log("Error loading leaflet")},this)):window.console&&window.console.log&&console.log("Error loading leaflet")},this)):this.createMap()}});return d}),define("views/modules/outbrain",["jquery","underscore","backbone","app"],function(a,b,c,d){var e=c.View.extend({initialize:function(c){this.options=a.extend({},c||{}),this.options.url=window.location.href,d.loadScript("","OBR",b.bind(this.render,this))},destroy:function(){this.remove()},render:function(){if(this.options.widget){var c=b.template(a("#outbrain-more-stories-template").html(),{data:this.options});a("#outbrain-more-stories").html(c),b.delay(function(){OBR.extern.researchWidget(),console.log("OUTBRAIN more stories")},100)}}});return e}),define("views/modules/interactives/interactive-templates",["jquery","underscore","backbone","pubsub","app","baseview","views/modules/loader","views/modules/video"],function(a,b,c,d,e,f,g,h){var i=f.extend({el:".interactive",events:{"click . .indicator li":"onPaginatorClick","click .slide-nav.prev, .slide-nav.next":"onArrowClick","click .navigation li":"onNavClick"},initialize:function(a){this.$leftArrow=this.$el.find(".slide-nav.prev"),this.$rightArrow=this.$el.find(".slide-nav.next"),this.$viewport=this.$el.find(".viewport"),this.$slideContainer=this.$viewport.find(".slides"),this.$slides=this.$slideContainer.find(".slide"),this.$=this.$el.find("."),this.$Items=this.$.find("li"),this.$navigation=this.$(".navigation"),this.$navigationItems=this.$navigation.find("li"),this.slideNum=this.$slides.length,this.slideWidth=this.$slides.outerWidth(),this.maxSlides=this.slideNum,this.currentSlideIndex=0,this.subviews={},this.afterInit=!1,this.$viewport.hasClass("slide")&&this.$slides.css({display:"inline-block"}),this.interactiveType=a&&a.interactiveType?a.interactiveType:"none",f.prototype.initialize.call(this,{}),this.subviews.video=[],this.useCSSTransforms=!1},goTo:function(c){var e=this.currentSlideIndex,f=c,g=this.slideWidth*f;c==0?(this.$leftArrow.addClass("invisible"),this.$rightArrow.removeClass("invisible")):c==this.maxSlides-1?(this.$leftArrow.removeClass("invisible"),this.$rightArrow.addClass("invisible")):(this.$leftArrow.removeClass("invisible"),this.$rightArrow.removeClass("invisible")),b.each(this.subviews.video,function(a){a.$el.find("object").remove(),a.$el.find(".videoObject").append(a.clone),a.destroy()}),this.subviews.video=[],this.$Items.removeClass("active").filter("li:eq("+f+")").addClass("active"),this.$navigationItems.removeClass("active").eq(f).addClass("active");if(this.$viewport.hasClass("slide")||this.$viewport.hasClass("slide-transition"))this.animate(this.$slideContainer,"left",-1*g+"px",400,"ease-in-out",0);else if(this.$viewport.hasClass("fade")||this.$viewport.hasClass("fade-transition")){var i=this.$slides.eq(f),j=this.$slides.eq(e);f!=e?(j.css({"z-index":1}),i.css({"z-index":2,opacity:0,display:"block"}),this.animate(i,"opacity",1,400,"linear").done(function(){j.css({opacity:0,display:"none"})})):(i.css({opacity:0,display:"block"}),this.animate(i,"opacity",1,400,"linear"))}this.$slides.removeClass("active").eq(f).addClass("active");var k=this;a.each(this.$slides.eq(c).find(".video"),function(){var b=a(this).find("object").clone(),c=new h({el:a(this).get(0),autocreate:!0});c.clone=b,k.subviews.video.push(c)}),this.currentSlideIndex=f;if(this.interactiveType=="beforeafter"&&this.afterInit){var l="beforeandaftercurrentslide"+f;d.trigger("uotrack",{prop41:l})}else this.afterInit=!0},onPaginatorClick:function(b){var c=this.$Items.index(a(b.currentTarget));this.goTo(c);if(this.interactiveType=="chronology"){var e="chronology"+document.location.pathname+"button_position"+c;d.trigger("uotrack",{prop41:e})}},onArrowClick:function(b){a(b.currentTarget).is(this.$leftArrow)?this.previousSlide():this.nextSlide()},onNavClick:function(b){var c=a(b.currentTarget),d=c.parent().find("li");this.goTo(d.index(c))},previousSlide:function(){this.goTo(Math.max(this.currentSlideIndex-1,0));if(this.interactiveType=="chronology"){var a="chronology"+document.location.pathname+"arrow-left";d.trigger("uotrack",{prop41:a})}},nextSlide:function(){this.goTo(Math.min(this.currentSlideIndex+1,this.maxSlides-1));if(this.interactiveType=="chronology"){var a="chronology"+document.location.pathname+"arrow-right";d.trigger("uotrack",{prop41:a})}}});return i}),define("views/modules/interactives/before-after",["jquery","underscore","backbone","pubsub","app","baseview","views/modules/interactives/interactive-templates"],function(a,b,c,d,e,f,g){var h=f.extend({events:{"click .before-after-caption-toggle":"toggleCaption"},initialize:function(a){this.template=new g({interactiveType:"beforeafter"}),this.template.goTo(this.template.currentSlideIndex),this.setUpSlider(),f.prototype.initialize.call(this,{})},setUpSlider:function(){require(["/static/js/libs/jquery/plugins/jquery-ui-1.8.13.custom.min.js","/static/js/libs/jquery/plugins/jquery.beforeafter-1.4-modified.js"],function(){this.$(".image-container").each(function(){a(this).beforeAfter({animateIntro:!0,imagePath:"/static/images/interactives/before-after/",introDuration:1500,introPosition:.5,showFullLinks:!1,beforeLinkText:"Show before image",afterLinkText:"Show after image",cursor:"e-resize",dividerColor:"none",dividerWidth:2,handleWidth:51,handleHeight:541,handleImageName:"handle.png",handleLeftOffset:-25,dragAreaWidth:950,onReady:function(){}})})})},toggleCaption:function(){var a=this.$(".meta"),b=this.$(".before-after-caption-toggle"),c=function(){var c=a.is(":visible")?"Hide Caption":"Show Caption";b.text(c)};

a.fadeToggle(c);var e=a.is(":visible")?"beforeandafter_caption_on":"beforeandafter_caption_off";d.trigger("uotrack",{prop41:e})}});return h}),define("views/modules/interactives/timeline",["jquery","underscore","backbone","pubsub","app","baseview","views/modules/interactives/interactive-templates","views/modules/video"],function(a,b,c,d,e,f,g,h){var i=f.extend({events:{"click .timeslider .marker":"renderButtonClick","click .slide-nav.prev, .slide-nav.next":"renderArrowClick"},initialize:function(a){this.template=new g,this.$leftArrow=this.template.$leftArrow,this.$rightArrow=this.template.$rightArrow,this.$slideContainer=this.template.$slideContainer,this.$slides=this.template.$slides,this.$viewport=this.template.$viewport,this.$timeslider=this.$el.find(".timeslider"),this.$timesliderBelt=this.$timeslider.find(".belt"),this.$timesliderBuckle=this.$timeslider.find(".buckle"),this.$timesliderLabelContainer=this.$timeslider.find(".labels"),this.$timesliderLabels=this.$timesliderLabelContainer.find(".label"),this.$contentBox=this.$slideContainer.find(".timeline-slide-content"),this.$contentIndicator=this.$contentBox.find(".indicator"),this.$gridLines=this.$viewport.find(".grid-line"),this.numLabels=13,this.arrEventPositions=[],this.maxSlides=this.template.maxSlides,this.speed=500,this.arrayPanelMax=850,this.numPanelMinLefts=6,this.numMarkerWidth=9,this.strDateBegin="",this.strDateEnd="",this.blnFirstClickDone=!1,this.currentSlideIndex=this.template.currentSlideIndex,require(["libs/jquery/plugins/jquery-ui-1.8.13.custom.min"],b.bind(function(){this.loadData(),this.$timesliderBuckle.draggable({containment:".buckle-box",cursor:"move",stop:b.bind(this.snapToMarker,this)})},this)),f.prototype.initialize.call(this,{})},loadData:function(){var b="",c=this;this.strDateBegin=this.$viewport.data().graphstart,this.strDateEnd=this.$viewport.data().graphend,this.$slides.each(function(d){var e=a(this).find(".timeline-slide-content").data().tlpercent,f=parseInt(c.arrayPanelMax),g=Math.round(e*f+27);c.arrEventPositions[d]=g,b+='<div class="marker" style="left:'+g+'px;"></div>'}),this.$timesliderBelt.append(b),this.maxEvents=this.arrEventPositions.length,this.setUpLabels(),this.$el.find(".timeslider .marker").eq(0).trigger("click")},setUpLabels:function(){var b=this.strDateBegin,c=this.strDateEnd,d=c-b,e=this.$viewport.data().unitcount,f=Math.ceil(e/this.numLabels),g,h=this,i=h.arrayPanelMax;this.$timesliderLabels.each(function(c){var e=a(this).data().labelms,f=Math.round((e-b)/d*i);a(this).css("left",f)}),this.$gridLines.each(function(b){var c=h.$timesliderLabels.eq(b).position().left+33+"px";a(this).css("left",c)}),this.$timesliderLabels.find(".time").fadeIn("slow")},renderButtonClick:function(b){var c=a(b.target),e=c.parent().find(".marker");this.goTo(e.index(c));if(this.blnFirstClickDone){var f="timeline"+document.location.pathname+"button_position"+e.index(c).toString();d.trigger("uotrack",{prop41:f})}else this.blnFirstClickDone=!0},renderArrowClick:function(b){var c;a(b.currentTarget).is(this.$leftArrow)?(this.previousSlide(),c="Previous"):(this.nextSlide(),c="Next");var e="timeline"+document.location.pathname+"arrow"+c;d.trigger("uotrack",{prop41:e})},goTo:function(a){var b=this.currentSlideIndex,c=a,d,e=this;e.currentSlideIndex=c;var f=parseInt(e.$contentBox.eq(c).width()),g=this.arrayPanelMax-f;this.$timesliderBuckle.css("left",(this.arrEventPositions[c]-19).toString()+"px"),d=Math.round(this.arrEventPositions[c]+this.numMarkerWidth/2-f/2),d>g?d=g:d<this.numPanelMinLefts&&(d=this.numPanelMinLefts),this.$slides.eq(c).find(".indicator").css("left",this.arrEventPositions[c]-8-d.toString()+"px"),this.$slides.removeClass("active").eq(c).css("left",d.toString()+"px").addClass("active"),this.$contentBox.find(".text a").attr("target","_blank"),this.template.goTo(c),this.currentSlideIndex=c},previousSlide:function(){this.goTo(Math.max(this.currentSlideIndex-1,0))},nextSlide:function(){this.goTo(Math.min(this.currentSlideIndex+1,this.maxSlides-1))},snapToMarker:function(b){var c=850,e,f,g=a(b.target),h=Number(g.css("left").replace("px",""));for(f=0;f<this.arrEventPositions.length;f++)Math.abs(h+19-this.arrEventPositions[f])<c&&(e=f,c=Math.abs(h+19-this.arrEventPositions[f]));var i="timeline"+document.location.pathname+"drag_button_position"+e.toString();d.trigger("uotrack",{prop41:i}),this.goTo(e)},status:function(a,b,c,d){if(b!="move"||c!="left"&&c!="right")b=="cancel"?this.renderEvent(currentEvent,this.speed):b=="end"&&(c=="right"?this.previousSlide():c=="left"&&this.nextSlide());else{var e=0;c=="left"?this.renderEvent(currentEvent+d,e):c=="right"&&this.renderEvent(currentEvent-d,e)}}});return i}),define("views/modules/interactives/overview",["jquery","underscore","backbone","pubsub","app","baseview","views/modules/interactives/interactive-templates","views/modules/video"],function(a,b,c,d,e,f,g,h){var i=f.extend({initialize:function(a){this.template=new g({interactiveType:"chronology"}),this.template.goTo(this.template.currentSlideIndex),f.prototype.initialize.call(this,{})}});return i}),define("views/modules/interactives/sequencer",["jquery","underscore","backbone","pubsub","app","views/modules/interactives/interactive-templates","baseview","views/modules/video"],function(a,b,c,d,e,f,g,h){var i=g.extend({events:{"click .nav-hide":"showHidePanel","click .navigation li":"navInteraction"},initialize:function(a){this.template=new f,this.template.goTo(this.template.currentSlideIndex),this.subviews={},this.subviews.video=[],this.$slides=this.$el.find(".slide"),this.$slideContainer=this.$el.find(".slides"),this.$nav=this.$el.find(".navigation");if(this.$slides.find(".video").length<1)return;this.setupSlides(),g.prototype.initialize.call(this,{})},setupSlides:function(){if(this.$el.find(".viewport").hasClass("slide-transition")){var a=this.$slides.eq(0).width()*this.$slides.length;this.$el.find(".slides").width(a)}},showHidePanel:function(b){var c=a(b.target),e;c.toggleClass("show"),c.is(".show")?(this.animatePanel(430),e="sequencer"+document.location.pathname+"hidepanel"):(this.animatePanel(-46),e="sequencer"+document.location.pathname+"showpanel"),d.trigger("uotrack",{prop41:e})},navInteraction:function(){var a="sequencer"+document.location.pathname+"navinteraction";d.trigger("uotrack",{prop41:a})},animatePanel:function(a){if(!b)var b=this.speed;this.animate(this.$nav,"top",-1*a,350,"ease-out")}});return i}),define("views/modules/sponsored-series-bar",["jquery","underscore","backbone","pubsub"],function(a,b,c,d){var e=c.View.extend({$openSection:null,animationTime:200,events:{"click .close-drawer":"closeDrawer","click nav ul li a":"toggleDrawer"},closeDrawer:function(){return this.$navAnchors.removeClass("open"),this.$drawer.slideUp(this.animationTime,b.bind(function(){this.$drawer.removeClass("open").removeAttr("style"),this.$openSection.removeClass("open").removeAttr("style"),this.$openSection=null},this)),!1},destroy:function(a){this.undelegateEvents(),a&&this.remove()},initialize:function(b){this.options=a.extend({},b||{}),this.el=b.el,this.$el=a(this.el,document),this.$navAnchors=a("nav ul li a",this.$el),this.$drawer=a(".drawer",this.$el),this.$sectionAbout=a(".sponsor-about",this.$drawer),this.$sectionResources=a(".sponsor-resources",this.$drawer),this.$sectionVideos=a(".sponsor-videos",this.$drawer)},toggleDrawer:function(c){var d=a(c.target);if(d.hasClass("open"))this.closeDrawer();else{this.$navAnchors.removeClass("open"),d.addClass("open");var e=null;switch(d.attr("href")){case"#sponsor-about":e=this.$sectionAbout;break;case"#sponsor-resources":e=this.$sectionResources;break;case"#sponsor-videos":e=this.$sectionVideos}this.$openSection==null?(e.addClass("open").removeAttr("style"),this.$drawer.slideDown(this.animationTime,b.bind(function(){this.$drawer.addClass("open").removeAttr("style")},this))):this.$openSection.slideUp(this.animationTime,b.bind(function(){this.$openSection.removeClass("open").removeAttr("style"),e.slideDown(this.animationTime,b.bind(function(){e.addClass("open").removeAttr("style")},this))},this)),this.$openSection=e}return!1}});return e}),define("views/modules/interactives/pie-chart",["jquery","underscore","backbone","pubsub","app"],function($,_,Backbone,PubSub,App){var PieChartView=Backbone.View.extend({el:".interactive.pie-chart",currentSlide:0,events:{},initialize:function(a){this.el=a.el,this.addChart()},render:function(){},createLegend:function(a){var b=this,c="<ul class='row-{{row-num}}'>{{content}}</ul>",d="<li class='item-{{number}}' style='{{custom}}'><h4>{{label}}</h4></li>",e=Math.ceil(a.length/2),f="",g="";$.each(a,function(a,c){var h=b.$el.data("colors")!=""?"background-color:"+b.colors[a]:"",i=d.replace("{{number}}",a+1).replace("{{label}}",c.label).replace("{{custom}}",h);a<e?f+=i:g+=i});var h=c.replace("{{content}}",f).replace("{{row-num}}","1"),i=c.replace("{{content}}",g).replace("{{row-num}}","2");b.$el.find(".chart-area-legend").html(h+i)},addChart:function(){var _this=this,reqs=Modernizr.canvas?["/static/js/views/modules/interactives/chart-style-assets.js","libs/flot/jquery.flot","libs/flot/jquery.flot.usat.pie"]:["/static/js/views/modules/interactives/chart-style-assets.js","/static/js/libs/flot/excanvas.js","libs/flot/jquery.flot","libs/flot/jquery.flot.usat.pie"];require(reqs,function(chartStyles){var interactEl=_this.$el,dataSrc=interactEl.find(" .data tr"),data=[],chartAssets=new chartStyles,sections=["country","money","sports","train","tech","about","case","teac"],colorId=interactEl.data("section")!=""?interactEl.data("section"):"country",colorOverride=interactEl.data("colors"),colors=colorOverride!=""?colorOverride.split("|"):chartAssets.color[colorId];_this.colors=colors,$.each(dataSrc,function(index){var row=interactEl.find(".data tr:eq("+index+")"),label=row.find("td:eq(0)").text(),dataValue=eval(row.find("td:eq(1)").text()),legendItems=interactEl.find(".chart-area-legend li");data.push({label:label,data:dataValue,color:colors[index]})}),_this.createLegend(data),$.plot($(interactEl.find(".graph")),data,{series:{pie:{show:!0,stroke:{color:"#fff",width:5},innerRadius:_this.$el.data("isdonut")?.47:0,radius:_this.$el.data("isdonut")?1:.9},pattern:chartAssets.createPattern("rgba(256,256,256,0.25)")},grid:{hoverable:!0,clickable:!0},legend:{show:!1}});var lazyPieHover=_.debounce(_this.pieHover,10);interactEl.find(".chart-area").bind("plothover",lazyPieHover)})},pieHover:function(a,b,c){var d=$(this),e=d.find(".graph");if(!c){d.find(".chart-hover").hide();return}d.find(".chart-hover").show();var f=parseFloat(c.series.percent).toFixed(2),g=" <div class='{{pointerClass}}'></div><h3>{{label}}</h3><h4>{{body}}</h4>",h=d.closest(".interactive"),i=d.find(".chart-hover"),j=d.data("prefix"),k=d.data("suffix"),l=c.series.pie.innerRadius>0?!0:!1,m=e.offset().left,n=e.offset().top,o=e.height()/3+n,p=l?e.offset().left+e.width()/3:e.width()/2+e.offset().left,q=l?e.width()/3*2+e.offset().left:e.width()/2+e.offset().left,r=e.offset().top+e.height()/3*2,s="",t=i.height(),u=i.width(),v;b.pageY<o?(s="top-hover",w="pointer-top",v={top:b.pageY-n,left:b.pageX-u/2-m}):b.pageY>r?(s="bottom-hover",w="pointer-bottom",v={top:b.pageY-t-n,left:b.pageX-u/2-m}):b.pageX<p?(s="middleleft-hover",w="pointer-left",v={top:b.pageY-t/2-n,left:b.pageX-m}):b.pageX>q?(s="middleright-hover",w="pointer-right",v={top:b.pageY-t/2-n,left:b.pageX-u-m}):(d.find(".chart-hover").hide(),v={});var w="pointer-"+s.replace("-hover","").replace("middle",""),f=parseFloat(c.series.percent).toFixed(2),x=l?j+" "+c.datapoint[1][0][1]+""+k:f+"%",y=g.replace("{{pointerClass}}",w).replace("{{label}}",c.series.label).replace("{{body}}",x);i.css(v).attr("class",s+" chart-hover").html(y)}});return PieChartView}),define("views/modules/interactives/bar-chart",["jquery","underscore","backbone","pubsub","app"],function(a,b,c,d,e){var f=c.View.extend({el:".interactive.bar-chart",currentSlide:0,events:{},initialize:function(a){this.el=a.el,this.addChart()},render:function(){},addChart:function(){var c=this,d=Modernizr.canvas?["/static/js/views/modules/interactives/chart-style-assets.js","libs/flot/jquery.flot","libs/flot/jquery.flot.multibars","/static/js/libs/flot/jquery.flot.usat.style.js"]:["/static/js/views/modules/interactives/chart-style-assets.js","/static/js/libs/flot/excanvas.js","libs/flot/jquery.flot","libs/flot/jquery.flot.multibars"];require(d,function(d){var e=c.$el,f=new d,g=[],h=e.data("section")!=""?e.data("section"):"country",i=e.data("colors"),j=i!=""?i.split("|"):"",k=e.data("xaxis");c.colors=j!=""?j:f.color[h],c.barType=e.data("ismulti")?"multi":"single",c.tickLabels=[];var l=j!=""?j[0]:f.color[h][3];e.find(".data tr").each(function(b){var d=e.find(".data tr:eq("+b+")"),f=d.find("td.label").text(),h=[],j=e.find(".chart-area-legend");c.barType!="multi"?e.find(".chart-area-legend").hide():i!=""&&j.find("li:eq("+b+")").css("background-color",c.colors[b]),c.tickLabels=c.createTicks(k),d.find("td.coord").each(function(){var b=a(this).text().split(",");h.push([b[0],b[1]])});var m=c.barType=="multi"?"rgb(256, 256, 256)":h[0][1]<0?"#900":l;g.push({label:f,data:h,color:m,bars:{borderWidth:30,fillColor:c.barType=="multi"?c.colors[b]:h[0][1]<0?"#900":l}})});var m=g[0].data.length<5?.5:g[0].data.length<7?.6:g[0].data.length<=9?.7:g[0].data.length>9?.8:.8,n=g.length<=2?.37:.2,o=c.barType=="multi"?.03:g[0].data.length<5?.2:.07,p=a.plot(e.find(".graph"),g,{multiplebars:c.barType=="multi"?!0:!1,legend:{show:!1},xaxis:{ticks:c.tickLabels,position:"bottom",tickLength:0,autoscaleMargin:o},yaxis:{position:"left",labelHeight:25},series:{bars:{show:!0,borderWidth:30,barWidth:c.barType=="multi"?n:m,align:"center",order:"integer"}},grid:{borderWidth:0,labelMargin:5,axisMargin:0,clickable:!0,hoverable:!0,autoHighlight:!0,borderColor:"rgb(237,236,236)"},colors:c.colors,pattern:f.createPattern()}),q=p.getData();a.each(q[0].data,function(b){if(c.barType=="multi")return!1;var d=q[0].data[b],f=q[0].color,g=e.find(".tickLabel").eq(b).css("left"),h=p.pointOffset({x:d[0],y:d[1]}),i=h.left,j=p.getXAxes(),k=d[1]<=0?{width:j[0].labelWidth,color:f,position:"absolute",left:g,top:h.top+5,display:"none"}:{width:j[0].labelWidth,color:f,position:"absolute",left:g,top:h.top-15,display:"none"};

a('<div class="data-point-label">'+d[1]+"</div>").css(k).appendTo(p.getPlaceholder()).fadeIn("slow")});var r=b.debounce(c.barHover,10);e.find(".chart-area").bind("plothover",r)})},barHover:function(b,c,d){var e=a(this),f=e.offset().top,g=e.offset().left,h=e.find(".chart-hover"),i=e.data("prefix"),j=e.data("suffix"),k="",l="",m,n,o=a(this).closest(".bar-chart").data("ismulti");if(!d){h.hide();return}h.show(),k=d.dataIndex,l=d.series.xaxis.ticks;var p=parseFloat(d.series.percent).toFixed(2),q=o?d.series.label:l[k].label,r="<div class='{{pointerClass}}'></div><h3>{{label}}</h3><h4 class='about'>{{body}}</h4>",s=f+e.height()/2,t=g+e.width()/3,u=g+e.width()/3*2,v=f+e.height()/3*2,w="",x=h.height(),y=h.width();c.pageX<t?(w="middleleft-hover",m="pointer-left",n={top:c.pageY-x/2-f,left:c.pageX-g}):c.pageX>u?(w="middleright-hover",m="pointer-right",n={top:c.pageY-x/2-f,left:c.pageX-y-g}):c.pageY<s?(w="top-hover",m="pointer-top",n={top:c.pageY-f,left:c.pageX-y/2-g}):c.pageY>s?(w="bottom-hover",m="pointer-bottom",n={top:c.pageY-x-f,left:c.pageX-y/2-g}):(h.hide(),n={});var z=i+""+d.datapoint[1]+" "+j,A=r.replace("{{pointerClass}}",m).replace("{{label}}",q).replace("{{body}}",z);h.css(n).html(A).attr("class",w+" chart-hover")},createTicks:function(b){var c=b.split("|"),d=[];return a.each(c,function(a,b){d.push([a,b])}),d}});return f}),define("views/modules/interactives/line-graph",["jquery","underscore","backbone","pubsub","app"],function(a,b,c,d,e){var f=c.View.extend({el:".interactive.line-graph",events:{},initialize:function(a){this.el=a.el,this.createLine(".graph")},render:function(){},createLine:function(){var c=this,d=Modernizr.canvas?["",""]:["","",""];require(d,function(d){var e=c.$el,f=[],g=[],h=[],d=new d;colorId=e.data("section"),colorOverride=e.data("colors"),colorList=colorOverride.split("|"),xAxisOverride=e.data("xaxis"),colors=colorOverride!=""?colorList:d.color[colorId],c.tickLabels=c.createTicks(xAxisOverride),e.find(".chart-area-legend ul li").each(function(b){a(this).css("background-color",colors[b])}),e.find(".data tr").each(function(b){var c=e.find("tr:eq("+b+")"),d=c.find("td:eq(0)").text(),g=[];c.find("td.coord").each(function(){var b=a(this).text().split(",");g.push([b[0],b[1]])});var h=colors[b];f.push({label:d,data:g,color:colors[b],points:{fillColor:colors[b]}})});var i=a.plot(e.find(".graph"),f,{legend:{show:!1,noColumns:1},xaxis:{ticks:c.tickLabels,autoscaleMargin:.03,position:"bottom",borderColor:"rgb(237,236,236)"},yaxis:{position:"left",labelHeight:25,borderColor:"rgb(237,236,236)"},lines:{show:!0},points:{show:!0,radius:2,fill:!0},grid:{borderWidth:1,borderColor:"rgb(237,236,236)",labelMargin:5,axisMargin:0,clickable:!0,hoverable:!0,autoHighlight:!0}}),j=b.debounce(c.lineHover,10);e.find(".chart-area").bind("plothover",j)})},createTicks:function(b){var c=b.split("|"),d=[];return a.each(c,function(a,b){d.push([a,b])}),d},lineHover:function(b,c,d){var e=a(this);if(!d){e.find(".chart-hover").hide();return}e.find(".chart-hover").show();var f=parseFloat(d.series.percent).toFixed(2),g=" <div class='{{pointerClass}}'></div>{{label}}<h4 class='about'>{{body}}</h4>",h=e.find(".chart-hover"),i=e.data("prefix"),j=e.data("suffix"),k=e.offset().top,l=e.offset().left,m=e.closest(".interactive"),n="",o="",p=e.offset().left,q=e.offset().top,r=k+e.height()/2,s=l+e.width()/3,t=l+e.width()/3*2,u=k+e.height()/3*2,v="",w=h.height(),x=h.width();c.pageX<s?(v="middleleft-hover",n="pointer-left",o={top:c.pageY-w/2-k,left:c.pageX-l}):c.pageX>t?(v="middleright-hover",n="pointer-right",o={top:c.pageY-w/2-k,left:c.pageX-x-l}):c.pageY<r?(v="top-hover",n="pointer-top",o={top:c.pageY-k,left:c.pageX-x/2-l}):c.pageY>r?(v="bottom-hover",n="pointer-bottom",o={top:c.pageY-w-k,left:c.pageX-x/2-l}):h.hide();var y=i+""+d.datapoint[1]+" "+j,z=d.series.label!=""?"<h3>"+d.series.label+"</h3>":'<h3 class="empty"></h3>',A=g.replace("{{pointerClass}}",n).replace("{{label}}",z).replace("{{body}}",y);h.css(o).html(A).attr("class",v+" chart-hover")}});return f}),function(a){a.fn.fitVids=function(b){var c={customSelector:null,maxWidth:!1,maxWidthDefault:574},d,e;return a(".fit-vids-style").length<=0&&(d=document.createElement("div"),e=document.getElementsByTagName("base")[0]||document.getElementsByTagName("script")[0],d.className="fit-vids-style",d.style.display="none",e.parentNode.insertBefore(d,e)),b&&a.extend(c,b),this.each(function(){var b=["iframe[src*='#']","iframe[src*='#']","iframe[src*='#']","iframe[src^='#']","iframe[src^='#']","iframe[src^='#']","iframe[src^='#']","iframe[src^='#']","iframe[src^='#']","iframe[src^='#']","iframe[src^='#']","iframe[src^='#']","iframe[src^='#']","iframe[src^='#']","iframe[src^='#']","iframe[src*='#']","iframe[src*='#']","iframe object","object embed[src*='#']"];c.customSelector&&b.push(c.customSelector);var d=a(this).find(b.join(","));d.each(function(){var b=a(this);if(this.tagName.toLowerCase()=="embed"&&b.parent("object").length||b.parent(".fluid-width-video-wrapper").length)return;var c=this.tagName.toLowerCase()=="object"?b.attr("height"):b.height(),d=this.tagName.toLowerCase()=="object"?b.attr("width"):b.width(),e,f=b.attr("width");if(!c||!d)c=parseInt(b.find("embed").css("height"),10),d=parseInt(b.find("embed").css("width"),10);e=c/d;if(!b.attr("id")){var g="fitvid"+Math.floor(Math.random()*999999);b.attr("id",g)}b.wrap('<div class="fluid-width-video-wrapper" style="padding-top:'+e*100+'%;"></div>').removeAttr("height").removeAttr("width"),b.removeAttr("height").removeAttr("width"),b.parent(".fluid-width-video-wrapper").parent("object").removeAttr("height").removeAttr("width"),b.parent(".fluid-width-video-wrapper").parent().removeAttr("style").parent().removeAttr("style"),b.find("embed").removeAttr("height").removeAttr("width").removeAttr("style").removeAttr("style").parent().removeAttr("style")})})}}(jQuery),define("fitvids",function(){}),define("views/modules/previous-bar",["jquery","underscore","backbone"],function(a,b,c){var d=c.View.extend({el:".previous-bar",initialize:function(b){this.options=a.extend({},b||{});var c=a(".previous-bar").addClass("active");c.find(".title").text(b.title),c.attr("href",b.url)}});return d}),define("views/modules/datepicker",["jquery","underscore","backbone","baseview","app"],function(a,b,c,d,e){var f=d.extend({events:{"click .ui-date-picker-btn":"onClickBtn"},initialize:function(c){b.bindAll(this,"initDatepicker","onSelect","beforeShow"),this.options=a.extend(!0,{pluginOptions:{changeMonth:!0,changeYear:!0,showOtherMonths:!0,selectOtherMonths:!0,showMonthAfterYear:!0,dateFormat:"yy / mm / dd",dayNamesMin:["S","M","T","W","T","F","S"],onSelect:this.onSelect,beforeShow:this.beforeShow}},this.options),this.$input=this.$(".ui-date-picker-input"),this.pathRoot=this.$input.data("path-root"),d.prototype.initialize.apply(this,arguments),require(["/static/js/libs/jquery/plugins/jquery-ui.datepicker.min.js"],this.initDatepicker)},initDatepicker:function(){this.$input.datepicker(this.options.pluginOptions)},beforeShow:function(a,b){this.options.pluginOptions.flyoutClass&&b.dpDiv.addClass(this.options.pluginOptions.flyoutClass)},onSelect:function(a){var b=new Date(a),c=b.getDate();c=c<10?"0"+c:c;var d=b.getMonth()+1;d=d<10?"0"+d:d,this.$input.datepicker("hide"),e.triggerRoute(this.pathRoot+b.getFullYear()+"/"+d+"/"+c+"/")},onClickBtn:function(a){this.$input.datepicker("show"),this.$input.val(this.$input.val())},destroy:function(){this.$input.datepicker("destroy"),d.prototype.destroy.apply(this,arguments)}});return f}),define("views/modules/sports/nav-header",["jquery","underscore","backbone","baseview","app","views/modules/vertical-scroll","views/modules/datepicker"],function(a,b,c,d,e,f,g){var h=d.extend({el:".sp-nav-wrap",events:{"hover .sp-nav-item":"onHoverNavBarItem","hover .sp-nav-item.more":"onHoverNavBarMore","hover .sp-head":"onHoverHead","hover .sp-head-item.more":"onHoverHeadMore","hover .sp-head-item.teams":"onHoverHeadTeams","hover .sp-filter-dropdown":"onHoverFilterDropdown"},initialize:function(){this.$spHeads=this.$(".sp-heads"),this.stayOpen=this.$spHeads.hasClass("stay-open"),this.slideSpeed=200,b.bindAll(this,"toggleNavBarMoreFlyout","toggleHeadMoreFlyout","toggleHeadTeamsFlyout","toggleHead","switchHead"),d.prototype.initialize.apply(this,arguments),this.subviews.datepicker=new g({el:"#sp-filter-date-picker",pluginOptions:{flyoutClass:"sp-filter-date-picker-flyout"}})},onHoverFilterDropdown:function(b){if(b.type==="mouseenter"){var c=a(b.currentTarget),d=c.find(".sp-filter-scroll-wrap");this.subviews.vscroll=new f({el:d,padding:6})}else this.subviews.vscroll&&this.subviews.vscroll.destroy()},onHoverHead:function(a){clearTimeout(this.navBarItemTimer),a.type==="mouseleave"&&(this.navBarItemTimer=b.delay(this.toggleHead,100,undefined,a.type==="mouseenter"))},onHoverNavBarItem:function(c){clearTimeout(this.navBarItemTimer),clearTimeout(this.navBarSwitchHeadTimer),this.navBarItem=a(c.currentTarget);var d=this.navBarItem.hasClass("more");d||(this.navBarSwitchHeadTimer=b.delay(this.switchHead,80,c));var e=d?!1:c.type==="mouseenter";this.navBarItemTimer=b.delay(this.toggleHead,100,undefined,e)},toggleHead:function(b,c){this.stayOpen?c||this.setActiveHead(this.$(".sp-head.current").data("ss")):c?this.$spHeads.stop(!0).animate({height:90},this.slideSpeed,function(){a(this).addClass("temp-open")}):this.$spHeads.removeClass("temp-open").stop(!0).animate({height:0},this.slideSpeed)},switchHead:function(a){if(a.type==="mouseout")return;this.setActiveHead(this.navBarItem.data("ss"))},setActiveHead:function(a){this.$(".sp-head.active").removeClass("active"),this.$(".sp-head."+a).addClass("active")},onHoverNavBarMore:function(c){clearTimeout(this.navBarMoreTimer);var d=a(c.currentTarget);this.navBarMoreBtn=d.find(".more"),this.navBarMoreFlyout=d.find(".sp-nav-more-fly"),this.navBarMoreTimer=b.delay(this.toggleNavBarMoreFlyout,100,undefined,c.type==="mouseenter")},toggleNavBarMoreFlyout:function(a,b){return this.navBarMoreBtn.toggleClass("active",b),this.navBarMoreFlyout.toggleClass("active",b),!1},onHoverHeadMore:function(c){clearTimeout(this.headMoreTimer);var d=a(c.currentTarget);this.headMoreBtn=d.find(".more"),this.headMoreFlyout=d.find(".sp-head-more-fly"),this.headMoreTimer=b.delay(this.toggleHeadMoreFlyout,100,undefined,c.type==="mouseenter")},toggleHeadMoreFlyout:function(a,b){this.headMoreBtn.toggleClass("active",b),this.headMoreFlyout.toggleClass("active",b)},onHoverHeadTeams:function(c){clearTimeout(this.headTeamsTimer);var d=a(c.currentTarget);this.headTeamsBtn=d.find(".teams"),this.headTeamsFlyout=d.find(".sp-head-teams-fly"),this.headTeamsTimer=b.delay(this.toggleHeadTeamsFlyout,100,undefined,c.type==="mouseenter")},toggleHeadTeamsFlyout:function(a,b){return this.headTeamsBtn.toggleClass("active",b),this.headTeamsFlyout.toggleClass("active",b),!1}});return h}),define("views/modules/sports/back-to-top",["jquery","underscore","backbone","pubsub"],function(a,b,c,d){var e=c.View.extend({el:"#section_sports",events:{"click .backtotop":"backToTop"},initialize:function(){},backToTop:function(b){a("body,html").animate({scrollTop:0},700),d.trigger("uotrack",a(b.target).attr("data-ht"))},destroy:function(){this.undelegateEvents()}});return e}),define("views/modules/sports/leagues",["jquery","underscore","backbone","pubsub"],function(a,b,c,d){var e=c.View.extend({el:"#section_sports",events:{"click #teams_toggle ul li a":"onToggle","click #ncaaf_div_selector ul li a":"onNCAAFChange"},initialize:function(a,b){this.$teams=this.$el.find("div.teams"),this.$ncaaf=this.$el.find("#ncaaf_div_selector")},onToggle:function(b){var c=a(b.currentTarget).attr("data-value"),e=c.split(".")[0]=="c"?'div[data-conf="'+c+'"]':'div[data-div="'+c+'"]',f=a(b.currentTarget).attr("data-ht"),g=a(e);c=="all"?this.$teams.show():(this.$teams.hide(),g.show()),f&&d.trigger("uotrack",f)},destroy:function(){this.undelegateEvents()},onNCAAFChange:function(e){var f=this,g=a(e.currentTarget),h=App.attributes.currentCardPath,i=g.attr("data-ht"),j=g.attr("data-value"),k=b.template("sports/<%= division %>/teams/",{division:j});return i&&d.trigger("heattrack",i),Modernizr.history?c.history.navigate(k,{trigger:!0}):window.location=k,!1}});return e}),define("views/modules/sports/filterSeason",["jquery","underscore","backbone","pubsub"],function(a,b,c,d){var e=c.View.extend({el:"#section_sports",events:{'click label[for="topplayers"]':"onSeasonalFilter",'click label[for="topteams"]':"onSeasonalFilter","mouseenter .top-five ol li":"onProfileHover","click .sp-filter-link.week":"onWeekFilter"},initialize:function(a,b){this.$league=this.$el.data("subsection-id"),this.$pageType=this.$el.find("> article").data("page")},onProfileHover:function(b){a(b.currentTarget).addClass("selected").siblings().removeClass("selected")},onSeasonalFilter:function(b){b.preventDefault();var d=this.$el.find("> article").data("team"),e=this.$el.find("#year").val(),f=this.$pageType,g=a(b.currentTarget).data("team")!==undefined?a(b.currentTarget).data("team"):d,h=e!==""?e.split("|")[0]:"",i=e.split("|").length>1?e.split("|")[1]:"";if(a(b.currentTarget).attr("for")=="topplayers"||a("#topplayers").is(":checked")&&g!=d)f=["player",f].join("/");var j=["/sports",this.$league,g,f,h,i];j=j.filter(function(a){return a});var k=j.join("/");Modernizr.history?c.history.navigate(k,{trigger:!0}):window.location=k},onWeekFilter:function(c){c.preventDefault();var d=a(c.currentTarget),e=d.parents(".sp-filter-dropdown"),f=e.find(".sp-filter-scroll-wrap"),g=d.data("weeks"),h=this.$el.find('div[data-tags^="Week "]'),i=this.$el.find('div[data-tags="'+g+'"]');e.find(".sp-filter-btn").text(g),f.hide(),b.delay(function(){f.removeAttr("style")},50),d.parent().addClass("selected").siblings().removeClass("selected"),g==="All Weeks"?h.show():(h.hide(),i.show())},destroy:function(){this.undelegateEvents()}});return e}),define("views/modules/sports/team-chooser",["jquery","underscore","backbone","baseview","views/modules/vertical-scroll"],function(a,b,c,d,e){var f=d.extend({el:"#section_sports",events:{"click .sp-team-picker-btn":"onTeamPickerOpen","click .sp-popup-close":"onTeamPickerClose"},initialize:function(){d.prototype.initialize.apply(this,arguments)},onTeamPickerOpen:function(b){b.preventDefault(),this.openedOnce=!0;var c=a(b.currentTarget);this.$popup=c.siblings(".sp-popup"),this.$popupFilm=c.siblings(".sp-popup-film");var d=this.$popup.find(".sp-popup-content");this.$nextPrev=a(".card-wrap[data-order=-1], .card-wrap[data-order=1], nav.nextPrev"),this.$nextPrev.hide(),this.$popup.show(),this.$popupFilm.show(),this.subviews.vscroll=new e({el:d,padding:3})},onTeamPickerClose:function(a){if(!this.openedOnce)return;a&&a.preventDefault(),this.$nextPrev.show(),this.$popup.hide(),this.$popupFilm.hide(),this.subviews.vscroll.destroy()},destroy:function(){this.onTeamPickerClose(),d.prototype.destroy.apply(this,arguments)}});return f}),function(){var a;a=function(){function a(){this.options_index=0,this.parsed=[]}return a.prototype.add_node=function(a){return a.nodeName==="OPTGROUP"?this.add_group(a):this.add_option(a)},a.prototype.add_group=function(a){var b,c,d,e,f,g;b=this.parsed.length,this.parsed.push({array_index:b,group:!0,label:a.label,children:0,disabled:a.disabled}),f=a.childNodes,g=[];for(d=0,e=f.length;d<e;d++)c=f[d],g.push(this.add_option(c,b,a.disabled));return g},a.prototype.add_option=function(a,b,c){if(a.nodeName==="OPTION")return a.text!==""?(b!=null&&(this.parsed[b].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:a.value,text:a.text,html:a.innerHTML,selected:a.selected,disabled:c===!0?c:a.disabled,group_array_index:b,classes:a.className,style:a.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1},a}(),a.select_to_array=function(b){var c,d,e,f,g;d=new a,g=b.childNodes;for(e=0,f=g.length;e<f;e++)c=g[e],d.add_node(c);return d.parsed},this.SelectParser=a}.call(this),function(){var a,b;b=this,a=function(){function a(a,b){this.form_field=a,this.options=b!=null?b:{},this.set_default_values(),this.is_multiple=this.form_field.multiple,this.set_default_text(),this.setup(),this.set_up_html(),this.register_observers(),this.finish_setup()}return a.prototype.set_default_values=function(){var a=this;return this.click_test_action=function(b){return a.test_active_click(b)},this.activate_action=function(b){return a.activate_field(b)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.result_single_selected=null,this.allow_single_deselect=this.options.allow_single_deselect!=null&&this.form_field.options[0]!=null&&this.form_field.options[0].text===""?this.options.allow_single_deselect:!1,this.disable_search_threshold=this.options.disable_search_threshold||0,this.search_contains=this.options.search_contains||!1,this.choices=0,this.single_backstroke_delete=this.options.single_backstroke_delete||!1,this.max_selected_options=this.options.max_selected_options||Infinity},a.prototype.set_default_text=function(){return this.form_field.getAttribute("data-placeholder")?this.default_text=this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.default_text=this.options.placeholder_text_multiple||this.options.placeholder_text||"Select Some Options":this.default_text=this.options.placeholder_text_single||this.options.placeholder_text||"Select an Option",this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||"No results match"},a.prototype.mouse_enter=function(){return this.mouse_on_container=!0},a.prototype.mouse_leave=function(){return this.mouse_on_container=!1},a.prototype.input_focus=function(a){var b=this;if(!this.active_field)return setTimeout(function(){return b.container_mousedown()},50)},a.prototype.input_blur=function(a){var b=this;if(!this.mouse_on_container)return this.active_field=!1,setTimeout(function(){return b.blur_test()},100)},a.prototype.result_add_option=function(a){var b,c;return a.disabled?"":(a.dom_id=this.container_id+"_o_"+a.array_index,b=a.selected&&this.is_multiple?[]:["active-result"],a.selected&&b.push("result-selected"),a.group_array_index!=null&&b.push("group-option"),a.classes!==""&&b.push(a.classes),c=a.style.cssText!==""?' style="'+a.style+'"':"",'<li id="'+a.dom_id+'" class="'+b.join(" ")+'"'+c+">"+a.html+"</li>")},a.prototype.results_update_field=function(){return this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.result_single_selected=null,this.results_build()},a.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},a.prototype.results_search=function(a){return this.results_showing?this.winnow_results():this.results_show()},a.prototype.keyup_checker=function(a){var b,c;b=(c=a.which)!=null?c:a.keyCode,this.search_field_scale();switch(b){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:a.preventDefault();if(this.results_showing)return this.result_select(a);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},a.prototype.generate_field_id=function(){var a;return a=this.generate_random_id(),this.form_field.id=a,a},a.prototype.generate_random_char=function(){var a,b,c;return a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",c=Math.floor(Math.random()*a.length),b=a.substring(c,c+1)},a}(),b.AbstractChosen=a}.call(this),function(){var a,b,c,d,e=Object.prototype.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};

d=this,a=jQuery,a.fn.extend({chosen:function(c){return!a.browser.msie||a.browser.version!=="6.0"&&a.browser.version!=="7.0"?this.each(function(d){var e;e=a(this);if(!e.hasClass("chzn-done"))return e.data("chosen",new b(this,c))}):this}}),b=function(b){function e(){e.__super__.constructor.apply(this,arguments)}return f(e,b),e.prototype.setup=function(){return this.form_field_jq=a(this.form_field),this.current_value=this.form_field_jq.val(),this.is_rtl=this.form_field_jq.hasClass("chzn-rtl")},e.prototype.finish_setup=function(){return this.form_field_jq.addClass("chzn-done")},e.prototype.set_up_html=function(){var b,d,e,f;return this.container_id=this.form_field.id.length?this.form_field.id.replace(/[^\w]/g,"_"):this.generate_field_id(),$label=$("#section_sports").length==1?$('label[for="'+this.container_id+'"]').outerWidth():0,this.container_id+="_chzn",this.f_width=this.form_field_jq.outerWidth()+$label,b=a("<div />",{id:this.container_id,"class":"chzn-container"+(this.is_rtl?" chzn-rtl":""),style:"width: "+this.f_width+"px;"}),this.is_multiple?b.html('<ul class="chzn-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chzn-drop bgc" style="left:-9000px;"><ul class="chzn-results"></ul></div>'):b.html('<a href="javascript:void(0)" class="chzn-single chzn-default"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chzn-drop bgc" style="left:-9000px;"><div class="chzn-search"><input type="text" autocomplete="off" /></div><ul class="chzn-results"></ul></div>'),this.form_field_jq.hide().after(b),this.container=a("#"+this.container_id),this.container.addClass("chzn-container-"+(this.is_multiple?"multi":"single")),this.dropdown=this.container.find("div.chzn-drop").first(),d=this.container.height(),e=this.f_width-c(this.dropdown),this.dropdown.css({width:e+"px",top:d+"px"}),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chzn-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chzn-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chzn-search").first(),this.selected_item=this.container.find(".chzn-single").first(),f=e-c(this.search_container)-c(this.search_field),this.search_field.css({width:f+"px"})),this.results_build(),this.set_tab_index(),this.form_field_jq.trigger("liszt:ready",{chosen:this})},e.prototype.register_observers=function(){var a=this;return this.container.mousedown(function(b){return a.container_mousedown(b)}),this.container.mouseup(function(b){return a.container_mouseup(b)}),this.container.mouseenter(function(b){return a.mouse_enter(b)}),this.container.mouseleave(function(b){return a.mouse_leave(b)}),this.search_results.mouseup(function(b){return a.search_results_mouseup(b)}),this.search_results.mouseover(function(b){return a.search_results_mouseover(b)}),this.search_results.mouseout(function(b){return a.search_results_mouseout(b)}),this.form_field_jq.bind("liszt:updated",function(b){return a.results_update_field(b)}),this.search_field.blur(function(b){return a.input_blur(b)}),this.search_field.keyup(function(b){return a.keyup_checker(b)}),this.search_field.keydown(function(b){return a.keydown_checker(b)}),this.is_multiple?(this.search_choices.click(function(b){return a.choices_click(b)}),this.search_field.focus(function(b){return a.input_focus(b)})):this.container.click(function(a){return a.preventDefault()})},e.prototype.search_field_disabled=function(){this.is_disabled=this.form_field_jq[0].disabled;if(this.is_disabled)return this.container.addClass("chzn-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus",this.activate_action),this.close_field();this.container.removeClass("chzn-disabled"),this.search_field[0].disabled=!1;if(!this.is_multiple)return this.selected_item.bind("focus",this.activate_action)},e.prototype.container_mousedown=function(b){var c;if(!this.is_disabled)return c=b!=null?a(b.target).hasClass("search-choice-close"):!1,b&&b.type==="mousedown"&&!this.results_showing&&b.stopPropagation(),!this.pending_destroy_click&&!c?(this.active_field?!this.is_multiple&&b&&(a(b.target)[0]===this.selected_item[0]||a(b.target).parents("a.chzn-single").length)&&(b.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),a(document).click(this.click_test_action),this.results_show()),this.activate_field()):this.pending_destroy_click=!1},e.prototype.container_mouseup=function(a){if(a.target.nodeName==="ABBR"&&!this.is_disabled)return this.results_reset(a)},e.prototype.blur_test=function(a){if(!this.active_field&&this.container.hasClass("chzn-container-active"))return this.close_field()},e.prototype.close_field=function(){return a(document).unbind("click",this.click_test_action),this.is_multiple||(this.selected_item.attr("tabindex",this.search_field.attr("tabindex")),this.search_field.attr("tabindex",-1)),this.active_field=!1,this.results_hide(),this.container.removeClass("chzn-container-active"),this.winnow_results_clear(),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},e.prototype.activate_field=function(){return!this.is_multiple&&!this.active_field&&(this.search_field.attr("tabindex",this.selected_item.attr("tabindex")),this.selected_item.attr("tabindex",-1)),this.container.addClass("chzn-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},e.prototype.test_active_click=function(b){return a(b.target).parents("#"+this.container_id).length?this.active_field=!0:this.close_field()},e.prototype.results_build=function(){var a,b,c,e,f;this.parsing=!0,this.results_data=d.SelectParser.select_to_array(this.form_field),this.is_multiple&&this.choices>0?(this.search_choices.find("li.search-choice").remove(),this.choices=0):this.is_multiple||(this.selected_item.addClass("chzn-default").find("span").text(this.default_text),this.form_field.options.length<=this.disable_search_threshold?this.container.addClass("chzn-container-single-nosearch"):this.container.removeClass("chzn-container-single-nosearch")),a="",f=this.results_data;for(c=0,e=f.length;c<e;c++)b=f[c],b.group?a+=this.result_add_group(b):b.empty||(a+=this.result_add_option(b),b.selected&&this.is_multiple?this.choice_build(b):b.selected&&!this.is_multiple&&(this.selected_item.removeClass("chzn-default").find("span").text(b.text),this.allow_single_deselect&&this.single_deselect_control_build()));return this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.search_results.html(a),this.parsing=!1},e.prototype.result_add_group=function(b){return b.disabled?"":(b.dom_id=this.container_id+"_g_"+b.array_index,'<li id="'+b.dom_id+'" class="group-result">'+a("<div />").text(b.label).html()+"</li>")},e.prototype.result_do_highlight=function(a){var b,c,d,e,f;if(a.length){this.result_clear_highlight(),this.result_highlight=a,this.result_highlight.addClass("highlighted"),d=parseInt(this.search_results.css("maxHeight"),10),f=this.search_results.scrollTop(),e=d+f,c=this.result_highlight.position().top+this.search_results.scrollTop(),b=c+this.result_highlight.outerHeight();if(b>=e)return this.search_results.scrollTop(b-d>0?b-d:0);if(c<f)return this.search_results.scrollTop(c)}},e.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},e.prototype.results_show=function(){var a;if(!this.is_multiple)this.selected_item.addClass("chzn-single-with-drop"),this.result_single_selected&&this.result_do_highlight(this.result_single_selected);else if(this.max_selected_options<=this.choices)return this.form_field_jq.trigger("liszt:maxselected",{chosen:this}),!1;return a=this.is_multiple?this.container.height():this.container.height()-1,this.form_field_jq.trigger("liszt:showing_dropdown",{chosen:this}),this.dropdown.css({top:a+"px",left:0}),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results()},e.prototype.results_hide=function(){return this.is_multiple||this.selected_item.removeClass("chzn-single-with-drop"),this.result_clear_highlight(),this.form_field_jq.trigger("liszt:hiding_dropdown",{chosen:this}),this.dropdown.css({left:"-9000px"}),this.results_showing=!1},e.prototype.set_tab_index=function(a){var b;if(this.form_field_jq.attr("tabindex"))return b=this.form_field_jq.attr("tabindex"),this.form_field_jq.attr("tabindex",-1),this.is_multiple?this.search_field.attr("tabindex",b):(this.selected_item.attr("tabindex",b),this.search_field.attr("tabindex",-1))},e.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},e.prototype.search_results_mouseup=function(b){var c;c=a(b.target).hasClass("active-result")?a(b.target):a(b.target).parents(".active-result").first();if(c.length)return this.result_highlight=c,this.result_select(b)},e.prototype.search_results_mouseover=function(b){var c;c=a(b.target).hasClass("active-result")?a(b.target):a(b.target).parents(".active-result").first();if(c)return this.result_do_highlight(c)},e.prototype.search_results_mouseout=function(b){if(a(b.target).hasClass("active-result"))return this.result_clear_highlight()},e.prototype.choices_click=function(b){b.preventDefault();if(this.active_field&&!a(b.target).hasClass("search-choice")&&!this.results_showing)return this.results_show()},e.prototype.choice_build=function(b){var c,d,e=this;return this.is_multiple&&this.max_selected_options<=this.choices?(this.form_field_jq.trigger("liszt:maxselected",{chosen:this}),!1):(c=this.container_id+"_c_"+b.array_index,this.choices+=1,this.search_container.before('<li class="search-choice" id="'+c+'"><span>'+b.html+'</span><a href="javascript:void(0)" class="search-choice-close" rel="'+b.array_index+'"></a></li>'),d=a("#"+c).find("a").first(),d.click(function(a){return e.choice_destroy_link_click(a)}))},e.prototype.choice_destroy_link_click=function(b){return b.preventDefault(),this.is_disabled?b.stopPropagation:(this.pending_destroy_click=!0,this.choice_destroy(a(b.target)))},e.prototype.choice_destroy=function(a){return this.choices-=1,this.show_search_field_default(),this.is_multiple&&this.choices>0&&this.search_field.val().length<1&&this.results_hide(),this.result_deselect(a.attr("rel")),a.parents("li").first().remove()},e.prototype.results_reset=function(){this.form_field.options[0].selected=!0,this.selected_item.find("span").text(this.default_text),this.is_multiple||this.selected_item.addClass("chzn-default"),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change");if(this.active_field)return this.results_hide()},e.prototype.results_reset_cleanup=function(){return this.selected_item.find("abbr").remove()},e.prototype.result_select=function(a){var b,c,d,e;if(this.result_highlight)return b=this.result_highlight,c=b.attr("id"),this.result_clear_highlight(),this.is_multiple?this.result_deactivate(b):(this.search_results.find(".result-selected").removeClass("result-selected"),this.result_single_selected=b,this.selected_item.removeClass("chzn-default")),b.addClass("result-selected"),e=c.substr(c.lastIndexOf("_")+1),d=this.results_data[e],d.selected=!0,this.form_field.options[d.options_index].selected=!0,this.is_multiple?this.choice_build(d):(this.selected_item.find("span").first().text(d.text),this.allow_single_deselect&&this.single_deselect_control_build()),(!a.metaKey||!this.is_multiple)&&this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field_jq.val()!==this.current_value)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[d.options_index].value}),this.current_value=this.form_field_jq.val(),this.search_field_scale()},e.prototype.result_activate=function(a){return a.addClass("active-result")},e.prototype.result_deactivate=function(a){return a.removeClass("active-result")},e.prototype.result_deselect=function(b){var c,d;return d=this.results_data[b],d.selected=!1,this.form_field.options[d.options_index].selected=!1,c=a("#"+this.container_id+"_o_"+b),c.removeClass("result-selected").addClass("active-result").show(),this.result_clear_highlight(),this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[d.options_index].value}),this.search_field_scale()},e.prototype.single_deselect_control_build=function(){if(this.allow_single_deselect&&this.selected_item.find("abbr").length<1)return this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>')},e.prototype.winnow_results=function(){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;this.no_results_clear(),j=0,k=this.search_field.val()===this.default_text?"":a("<div/>").text(a.trim(this.search_field.val())).html(),g=this.search_contains?"":"^",f=new RegExp(g+k.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i"),n=new RegExp(k.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"i"),s=this.results_data;for(o=0,q=s.length;o<q;o++){c=s[o];if(!c.disabled&&!c.empty)if(c.group)a("#"+c.dom_id).css("display","none");else if(!this.is_multiple||!c.selected){b=!1,i=c.dom_id,h=a("#"+i);if(f.test(c.html))b=!0,j+=1;else if(c.html.indexOf(" ")>=0||c.html.indexOf("[")===0){e=c.html.replace(/\[|\]/g,"").split(" ");if(e.length)for(p=0,r=e.length;p<r;p++)d=e[p],f.test(d)&&(b=!0,j+=1)}b?(k.length?(l=c.html.search(n),m=c.html.substr(0,l+k.length)+"</em>"+c.html.substr(l+k.length),m=m.substr(0,l)+"<em>"+m.substr(l)):m=c.html,h.html(m),this.result_activate(h),c.group_array_index!=null&&a("#"+this.results_data[c.group_array_index].dom_id).css("display","list-item")):(this.result_highlight&&i===this.result_highlight.attr("id")&&this.result_clear_highlight(),this.result_deactivate(h))}}return j<1&&k.length?this.no_results(k):this.winnow_results_set_highlight()},e.prototype.winnow_results_clear=function(){var b,c,d,e,f;this.search_field.val(""),c=this.search_results.find("li"),f=[];for(d=0,e=c.length;d<e;d++)b=c[d],b=a(b),b.hasClass("group-result")?f.push(b.css("display","auto")):!this.is_multiple||!b.hasClass("result-selected")?f.push(this.result_activate(b)):f.push(void 0);return f},e.prototype.winnow_results_set_highlight=function(){var a,b;if(!this.result_highlight){b=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),a=b.length?b.first():this.search_results.find(".active-result").first();if(a!=null)return this.result_do_highlight(a)}},e.prototype.no_results=function(b){var c;return c=a('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),c.find("span").first().html(b),this.search_results.append(c)},e.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},e.prototype.keydown_arrow=function(){var b,c;this.result_highlight?this.results_showing&&(c=this.result_highlight.nextAll("li.active-result").first(),c&&this.result_do_highlight(c)):(b=this.search_results.find("li.active-result").first(),b&&this.result_do_highlight(a(b)));if(!this.results_showing)return this.results_show()},e.prototype.keyup_arrow=function(){var a;if(!this.results_showing&&!this.is_multiple)return this.results_show();if(this.result_highlight)return a=this.result_highlight.prevAll("li.active-result"),a.length?this.result_do_highlight(a.first()):(this.choices>0&&this.results_hide(),this.result_clear_highlight())},e.prototype.keydown_backstroke=function(){return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(this.pending_backstroke=this.search_container.siblings("li.search-choice").last(),this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus"))},e.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},e.prototype.keydown_checker=function(a){var b,c;b=(c=a.which)!=null?c:a.keyCode,this.search_field_scale(),b!==8&&this.pending_backstroke&&this.clear_backstroke();switch(b){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(a),this.mouse_on_container=!1;break;case 13:a.preventDefault();break;case 38:a.preventDefault(),this.keyup_arrow();break;case 40:this.keydown_arrow()}},e.prototype.search_field_scale=function(){var b,c,d,e,f,g,h,i,j;if(this.is_multiple){d=0,h=0,f="position:absolute; left: -1000px; top: -1000px; display:none;",g=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"];for(i=0,j=g.length;i<j;i++)e=g[i],f+=e+":"+this.search_field.css(e)+";";return c=a("<div />",{style:f}),c.text(this.search_field.val()),a("body").append(c),h=c.width()+25,c.remove(),h>this.f_width-10&&(h=this.f_width-10),this.search_field.css({width:h+"px"}),b=this.container.height(),this.dropdown.css({top:b+"px"})}},e.prototype.generate_random_id=function(){var b;b="sel"+this.generate_random_char()+this.generate_random_char()+this.generate_random_char();while(a("#"+b).length>0)b+=this.generate_random_char();return b},e}(AbstractChosen),c=function(a){var b;return b=a.outerWidth()-a.width()},d.get_side_border_padding=c}.call(this),define("chosen",function(){}),define("views/modules/alert",["jquery","underscore","backbone","pubsub","app","easing"],function(a,b,c,d,e){var f=c.View.extend({el:"body",events:{},initialize:function(b){this.options=a.extend({templateID:"alert"},b||{}),this.render()},render:function(){this.$alert=a('<div class="ui-alert"><span class="text"></span><span class="close-btn">Close</span></div>').appendTo(this.$el),this.$alertText=this.$alert.find(".text"),this.$alert.on("click",".close-btn",b.bind(function(){this.hidePrompt()},this))},show:function(a){d.trigger("show:alert"),this.$alertText.html(a),this.$alert.addClass("active").removeClass("error")},hide:function(){d.trigger("hide:alert"),this.$alert.removeClass("active").removeClass("error")},showError:function(a){d.trigger("show:error:alert"),this.$alertText.html(a),this.$alert.addClass("active").addClass("error")},showPrompt:function(b,c,d){function e(a){a.preventDefault(),a.stopPropagation(),typeof c=="function"&&c()}function f(a){a.preventDefault(),a.stopPropagation(),typeof d=="function"&&d()}var g=a("<a/>",{html:"Okay"}),h=a("<a/>",{html:"Cancel"}),i=a("<div/>",{"class":"prompt",html:b});i.append(g).append(h),this.$alert.addClass("active").html(i),g.on("click",e),h.on("click",f)},hidePrompt:function(){this.$alert.removeClass("active")}});return new f}),define("state",["jquery","underscore","backbone","pubsub","app","views/modules/alert","trafficcop","requestmanager"],function($,_,Backbone,PubSub,App,Alert,TrafficCop,RequestManager){var StateManager=Backbone.View.extend({DEBUG:!0,DEBUG_TIMERS:!1,TYPE_OVERLAY:"overlay",TYPE_PRELOAD:"preload",TYPE_NORMAL:"normal",XHR_REMIND_TIME:3e4,SLOW_CONNECTION_MESSAGE:"Oops. Connection is taking a long time... (temporary loader)",initialize:function(a){this.activeView=null,this.activeViewType=null,this.preloadedView=null,this.$stylesheets=$([]),this.stylesheets=[],this.timeouts=[],this.intervals=[],this.DEBUG_TIMERS=this.DEBUG_TIMERS||App.get("DEBUG_TIMERS"),this.takeoverTimers(),this.fullscreenView=null,this.scrollEl=App.get("scrollEl"),this.nav=App.get("navEl"),this.body=App.get("body"),this.breaking=App.get("breakingEl"),this.headerSlideSpeed=App.get("headerSlideSpeed"),window.stateManager=this},navigateToPreloadedUrl:function(a){var b=this.preloadedView&&this.preloadedView.currentPath||a||App.get("currentCardPath");Modernizr.history?Backbone.history.navigate(b,{trigger:!0}):b?window.location="/"+b:window.history.back()},getActiveView:function(){return this.activeView},registerFullScreenView:function(a){this._setFixedPosition(this.activeView),this.fullscreenView=a,this.activeView.pause()},clearFullScreenView:function(){this._clearFixedPosition(this.activeView),this.fullscreenView&&(this.fullscreenView=null,this.activeView.transition(this.activeView.currentPath,this.activeView.currentPath))},loadView:function(a,b,c,d){if(this.fullscreenView){var e=this.fullscreenView;this.fullscreenView=null,e.close()}b=b||{};

var f=d?this.TYPE_OVERLAY:this.TYPE_NORMAL;if(!!this.activeView)return this._triggerTransitionEvents(this.activeView,a,b,f,c);this.DEBUG&&console.log("Router: Initializing: ",c),this.activeView=new a(b),this.activeViewType=f,this.stylesheets=this.activeView.getCustomStyleSheets(c)||[];if(!jQuery.isArray(this.stylesheets))this.stylesheets=[],console.error("ActiveView returned a non-array for custom stylesheets, ignored!");else{var g=this;_.each(this.stylesheets,function(a){$("link").each(function(b,c){$(c).data("identifier")===a&&g.$stylesheets.push(c)})})}this.activeView.revealView(null,c)},preloadView:function(a,b,c){return this.DEBUG&&console.log("Router: Preloading: ",c),this._triggerTransitionEvents(this.preloadedView,a,b,this.TYPE_PRELOAD,c)},_triggerTransitionEvents:function(a,b,c,d,e){var f=a&&a.currentPath,g=null,h=d===this.TYPE_PRELOAD,i=this._removeCurrentView(b,d,e),j;if(!i)j=this._fetchNextViewData(a,b,e,h),d===this.TYPE_OVERLAY&&this.activeViewType===this.TYPE_NORMAL?(a=new b(c),i=this._revealOverlay(a,f,e,j)):d===this.TYPE_PRELOAD&&!this.preloadedView?(this.preloadedView=a=new b(c),i=a.revealView(f,e,j,!0)):i=a.transition(f,e,j,h),g=this._getStyleSheets(a,d,e);else{d===this.TYPE_NORMAL&&this.preloadedView&&Object.getPrototypeOf(this.preloadedView)===b.prototype&&(a=this.activeView=this.preloadedView,this.activeViewType=d,this.preloadedView=null);var k=null;Object.getPrototypeOf(a)!==b.prototype||!a.viewReady?(k=this.buildNewView(b,c,d),g=this._getStyleSheets(k,d,e)):g=this._getStyleSheets(a,d,e),j=this._fetchNextViewData(a,b,e,h),i.done(_.bind(function(){this.scrollEl.scrollTop(0);if(!k){var b=a.transition(f,e,j,h);return b.done(_.bind(function(){this._transitionFromOverlayScroll(this.activeView)},this))}k.revealView(f,e,j,d===this.TYPE_PRELOAD)},this))}return g&&g.length>0&&i.done(function(){g.remove()}),i},buildNewView:function(a,b,c,d){var e=new a(b);return c===this.TYPE_PRELOAD?this.preloadedView=e:(this.activeView=e,this.activeViewType=c),e},_getStyleSheets:function(a,b,c){var d=a.getCustomStyleSheets(c)||[];jQuery.isArray(d)||(d=[],console.error("ActiveView returned a non-null, non-array for custom stylesheets, ignored!")),b!==this.TYPE_PRELOAD?this.preloadedView&&(d=_.union(d,this.preloadedView.getCustomStyleSheets(this.preloadedView.currentPath)||[])):this.activeView&&(d=_.union(d,this.activeView.getCustomStyleSheets(this.activeView.currentPath)||[]));var e=_.difference(d,this.stylesheets),f=_.difference(this.stylesheets,d),g=$(_.filter(this.$stylesheets,function(a){var b=$(a).data("identifier");return _.find(f,function(a){return b===a})})),h=$([]);return this.stylesheets=d,this.$stylesheets=$(_.filter(this.$stylesheets,function(a){return!_.include(g,a)})),e&&e.length>0&&(_.each(e,_.bind(function(a){var b=$('<link rel="stylesheet" data-identifier="'+a+'" href="/static/css/'+a+(window.use_minified_css?".min":"")+'.css">')[0];h.push(b),this.$stylesheets.push(b)},this)),$("head").append(h)),g},_revealOverlay:function(a,b,c,d){this.activeView.pause();var e=this.preloadedView=this.activeView;this.body.css("overflow-y","scroll"),this._transitionToOverlayScroll(e),this.activeView=a,this.activeViewType=this.TYPE_OVERLAY;var f=a.revealView(b,c,d,!1);return f.done(_.bind(function(){this.body.css("overflow-y","")},this)),f},_removeCurrentView:function(a,b,c){var d=null;if(b===this.TYPE_OVERLAY&&this.activeViewType===this.TYPE_OVERLAY||b===this.TYPE_NORMAL&&this.activeView)if(Object.getPrototypeOf(this.activeView)!==a.prototype){d=this.activeView.removeView(c);if(b===this.TYPE_NORMAL&&this.activeViewType===this.TYPE_OVERLAY&&this.preloadedView){var e=this.preloadedView;d.done(_.bind(function(){this._transitionFromOverlayScroll(e)},this))}}else this.activeView.viewReady||(d=this.activeView.removeView(c));else b===this.TYPE_PRELOAD&&this.preloadedView&&Object.getPrototypeOf(this.preloadedView)!==a.prototype&&(d=this.preloadedView.removeView(c));return d&&b===this.TYPE_NORMAL&&this.preloadedView&&(Object.getPrototypeOf(this.preloadedView)!==a.prototype?(d=$.when(d,this.preloadedView.removeView(c,!0)),this.preloadedView=null):this.preloadedView.viewReady||(d=$.when(d,this.preloadedView.removeView(c,!0)),this.preloadedView=null)),d},_fetchNextViewData:function(a,b,c,d){if(a&&Object.getPrototypeOf(a)===b.prototype&&!a.shouldFetchData(c)){this.DEBUG&&console.log("Router: fetching data skipped for path: ",c);return}this.DEBUG&&console.log("Router: Ajax Load Path: ",c);var e=this.fetchHtml(c,null,!d);return d||e.fail(_.bind(function(a){if(a){var b=this.generateRequestError(a);b&&Alert.showError(b),(a.status!==200&&a.status||a.statusText==="timeout")&&window.history.back()}},this)),e},generateRequestError:function(a){if(a){if(a.status===500)return"Connection Error... (INTERNAL SERVER ERROR)";if(a.status===404)return"Connection Error... (FILE NOT FOUND)";if(a.status!==200&&a.status)return"Connection Error... ("+(a.statusText||"Unknown Error")+")"}return null},_transitionFromOverlayScroll:function(a){a&&(a.isApple?a.show():this._clearFixedPosition(a))},_transitionToOverlayScroll:function(a){a&&(a.isApple?a.hide():this._setFixedPosition(a))},_clearFixedPosition:function(a){var b=this.getBreakingCountryOffset();a.clearFixedPosition(),this.scrollEl.scrollTop(Math.abs(this.scrollTop-b))},_setFixedPosition:function(a){this.scrollTop=this.getBreakingCountryOffset()-App.getScrollPosition(),a.setFixedPosition(this.scrollTop),this.scrollEl.scrollTop(0)},getBreakingCountryOffset:function(){return this.nav.outerHeight()+this.breaking.outerHeight()},registerAnimation:function(a,b,c,d){return TrafficCop.addAnimation(a,b,c,d)},fetchHtml:function(a,b,c,d){return RequestManager.fetchHtml(a,b,c,d,!0)},fetchData:function(a,b,c,d,e){return RequestManager.fetchData(a,b,c,d,e)},takeoverTimers:function(){var _this=this;window.setGlobalInterval=window.setInterval,window.clearGlobalInterval=window.clearInterval,window.setGlobalTimeout=window.setTimeout,window.clearGlobalTimeout=window.clearTimeout;if(!this.DEBUG_TIMERS)return;if(!window.setInterval.apply)return;window.setInterval=function(){var a=window.setGlobalInterval.apply(window,arguments);return _this.intervals.push({id:a,fn:arguments}),a},window.clearInterval=function(a){_this.intervals=_this.removeTimerId(_this.intervals,a),window.clearGlobalInterval.apply(window,arguments)},window.setTimeout=function(func){var id=null,wrappedFunction=function(){_this.timeouts=_this.removeTimerId(_this.timeouts,id),func instanceof Function?func.apply(window,arguments):eval(func)},newArgs=[wrappedFunction].concat(Array.prototype.slice.call(arguments,1));return id=window.setGlobalTimeout.apply(window,newArgs),_this.timeouts.push({id:id,fn:arguments}),id},window.clearTimeout=function(a){_this.timeouts=_this.removeTimerId(_this.timeouts,a),window.clearGlobalTimeout.apply(window,arguments)}},removeTimerId:function(a,b){return b?_.reject(a,function(a){return a.id===b}):a},clearTimers:function(){_.each(this.intervals,function(a){console.warn("Interval not properly shutdown after view destruction",a.fn),window.clearGlobalInterval(a.id)}),this.intervals=[],_.each(this.timeouts,function(a){console.warn("Timeout not properly shutdown after view destruction. ",a.fn),window.clearGlobalTimeout(a.id)}),this.timeouts=[]}});return new StateManager}),define("views/modules/autocomplete",["jquery","underscore","backbone","pubsub","state"],function(a,b,c,d,e){var f=c.View.extend({events:{"keyup .ui-autocomplete-input":"onTyping","focus .ui-autocomplete-input":"onFocus","blur .ui-autocomplete-input":"onBlur","mousedown .ui-autocomplete li":"onSelectResult","hover .ui-autocomplete li":"onHover"},initialize:function(c){this.url=c.url,this.minChars=c.min_chars||3,this.maxResults=c.max_results||8,this.$field=a(c.el).attr("tabindex","0"),this.$container=this.$field.parent().addClass("ui-autocomplete-container"),this.$autoCompleteContainer=a("<div>").addClass("ui-autocomplete-content"),this.$autoComplete=a("<ul>").addClass("ui-autocomplete"),this.$error=a("<div>").addClass("error"),this.keyPressTimer=null,this.isAutoCompleteOpen=!1,this.activeResultIndex=null,this.$field.hasClass("ui-autocomplete-input")||this.$field.addClass("ui-autocomplete-input"),this.setElement(this.$container),this.$el.append(this.$autoCompleteContainer.append(this.$autoComplete)).append(this.$error),b.bindAll(this),this.$autoComplete.empty()},destroy:function(){this.undelegateEvents()},onTyping:function(b){var c=b.keyCode?b.keyCode:b.which;this.isAutoCompleteOpen=this.$autoComplete.children("li").length!=0?!0:!1;if(!b.type=="keypress")return;if(!(c!=38&&c!=40||!this.isAutoCompleteOpen)){var d=this.$autoComplete.children("li"),e=d.length,f;d.removeClass("hover"),this.activeResultIndex!=null?c==38?f=Math.max(this.activeResultIndex-1,0):c==40&&(f=Math.min(this.activeResultIndex+1,e-1)):f=0,d.eq(f).addClass("hover"),this.$field.val(d.eq(f).text()),this.activeResultIndex=f;return}if(c==13){this.clearResults();return}this.$autoComplete.empty(),a(b.currentTarget).val().length>=this.minChars-1&&this.getResults()},getResults:function(){clearTimeout(this.keyPressTimer),this.keyPressTimer=b.delay(this.fetchData,500)},fetchData:function(){var c=this.$field.val(),d;this.clearResults(),this.$error.empty();var f=b.bind(function(c){c[0]!=null?(this.$autoComplete.show(),c=c.splice(0,this.maxResults),a.map(c,b.bind(function(b,c){var d=a("<li>").html(b.City+", "+b.State);this.$autoComplete.append(d)},this))):this.displayError(),d=c},this);this.fetch&&this.fetch.abort(),this.fetch=e.fetchData(this.url+c).done(f)},onHover:function(b){a(b.currentTarget).hasClass("hover")||(this.$autoComplete.find("li").removeClass("hover"),a(b.currentTarget).addClass("hover"))},onFocus:function(a){this.$error.empty()},onSelectResult:function(b){var c=a(b.currentTarget).text();this.$field.val(c),this.clearResults()},onBlur:function(a){this.clearResults()},clearResults:function(){this.activeResultIndex=null,this.$autoComplete.empty(),this.$error.empty()},displayError:function(a){a=a||"Data cannot be found.",this.$error.html(a)}});return f}),define("views/modules/about/about-autocomplete",["jquery","underscore","app","views/modules/autocomplete","state"],function(a,b,c,d,e){var f=d.extend({initialize:function(b){d.prototype.initialize.apply(this,arguments),this.defaultLocation=a.cookie("aboutLocation"),this.$field.data("placeholder",a.cookie("aboutLocation")),this.$field.val(this.defaultLocation)},fetchData:function(){this.clearResults(),this.$error.empty();var c=this.$field.val(),d=b.bind(function(d){this.fetch=null;if(d[0]!==null)this.$autoComplete.show(),d=d.splice(0,this.maxResults),a.map(d,b.bind(function(b,c){var d=a("<li>").html(b.City+", "+b.State);this.$autoComplete.append(d)},this));else if(/^\d{5}$/.test(c)){this.$field.val(c);return}},this);this.fetch&&this.fetch.abort(),this.fetch=e.fetchData(this.url+c).done(d)},onSelectResult:function(a){a.preventDefault(),d.prototype.onSelectResult.call(this,a),this.$field.closest("form").submit()}});return f}),define("views/modules/livevideo",["jquery","underscore","backbone","pubsub","state","app","views/modules/video"],function(a,b,c,d,e,f,g){var h=c.View.extend({events:{"click #close_modal_link":"close"},initialize:function(){this.m_uiModal={},this.m_uiModalBgrnd={},this.win=f.get("win")[0],this.body=f.get("body"),e.registerFullScreenView(this),this.win.gannett={};

var b=this;this.win.gannett.videoplayer_modal={openPopup:function(){var c="/livevideos/popout/",d=a("#videoplayer_modal .video-title").text(),e=a("#videoplayer_modal .sponsor-text").text(),g=a("#videoplayer_modal .video-logo").attr("src"),h=a("#videoplayer_modal").attr("data-assetid");c+="?videoid="+h+"&description="+d+"&sponsor="+e+"&sourcelogo="+g,h&&(f.openPopup(c,740,465),b.close())}}},loadLiveVideo:function(b){var c=this;e.fetchHtml("/services/livevideos/"+b).done(function(b){c.body.append(b),c.video=new g({el:a("#videoplayer_modal"),autostart:!0}),c.m_uiModal=a("#videoplayer_modal"),c.m_uiModalBgrnd=a("#lightbox"),c.m_uiModal.show(),c.m_uiModalBgrnd.fadeIn(300),c.setElement("#videoplayer_modal")})},close:function(){if(this.m_uiModal){e.clearFullScreenView();var a=this.m_uiModalBgrnd;this.destroy(!0),this.m_uiModalBgrnd.fadeOut(300,function(){a.remove()}),this.m_uiModal=null,this.m_uiModalBgrnd=null,this.win.gannett={}}},destroy:function(a){this.video&&this.video.destroy(!0),this.undelegateEvents(),a&&this.remove()}});return h}),define("views/modules/live-feed-view",["jquery","underscore","baseview","pubsub","state","app","views/modules/sidebar-scroll","models/modules/live-feed-model"],function(a,b,c,d,e,f,g,h){var i=c.extend({initialize:function(a){b.bindAll(this,"dataLoaded","updateLoaded","refreshScrollBar","onResizeWindow","onQueueUpdated","onMarkupUpdated","checkForUpdates"),a.section=this.$el.attr("data-livefeed"),this.win=f.get("win"),this.body=f.get("body"),this.updateDelay=30,this.removeNewHighlight=20,this.model=new h,this.newItemsArray=[];var d=b.throttle(this.onResizeWindow,500);this.win.on("resize."+this.cid,d),this.isNarrowScreen=!1,this.onResizeWindow(),this.pubSub={"showmore:headlines":this.onHeadlinesUpdated},this.endsWith(a.section,"/")&&(a.section=a.section.substring(0,a.section.length-1)),this.model.bind("change:queue-"+a.section,this.onQueueUpdated),c.prototype.initialize.call(this,a)},endsWith:function(a,b){return a.length>=b.length&&a.substring(a.length-b.length)===b},render:function(){this.sizeBar=this.$el.parents(".size-bar"),this.ul=this.$el.find("ul"),this.subviews.vscrollbar=new g({el:this.$(".live-feed-content"),color:this.options.color,padding:2,lockPageScroll:!1,delayScroll:!1,fadeout:!0}),this.subviews.vscrollbar.addHideClass();if(this.ul.find("li").length)this.$el.removeClass("shadow"),this.subviews.vscrollbar.position(0,!0),this.model.set("markup-"+this.options.section,a(this.ul.find("li"))),this.checkForUpdates(),this.startUpdateCheck();else{this.$el.addClass("loading"),this.fetchData("/feeds/live/"+this.options.section+"/?count=40",this.dataLoaded);var b=this.model.get("markup-"+this.options.section);b&&b.length?this.onMarkupUpdated(this.model,b):this.model.bind("change:markup-"+this.options.section,this.onMarkupUpdated)}},fetchUpdate:function(b){var c=this.model.get("queue-"+this.options.section),d;if(c&&c.length)d=a(c[0]).attr("data-timestamp");else{var e=this.model.get("markup-"+this.options.section);d=a(e).attr("data-timestamp")}var f="/feeds/live/"+b+"/?date="+d;this.fetchData(f,this.updateLoaded)},fetchData:function(a,c){e.fetchHtml(a).done(c).always(b.bind(function(){this.$el.removeClass("loading")},this))},updateLoaded:function(b){if(b.length===0)return;var c=this.model.get("queue-"+this.options.section);c===undefined&&(c=a());var d=a(b[b.length-1]),e;c.length?e=a(c[0]):e=a(this.model.get("markup-"+this.options.section)[0]);var f=b.length;e&&d.attr("data-timestamp")===e.attr("data-timestamp")&&d.find(".headline a strong").text()===e.find(".headline a strong").text()&&--f;if(f===0)return;c=a.makeArray(c);while(--f>-1)c.unshift(b[f]);this.model.set("queue-"+this.options.section,c)},dataLoaded:function(a){this.model.set("markup-"+this.options.section,a)},onMarkupUpdated:function(c,d){this.model.unbind("change:markup-"+this.options.section,this.onMarkupUpdated),this.ul.find("li").remove(),this.ul.append(d);var e,f=this.ul.find("li"),g=this.$el.height();f.each(function(b,c){c.className.indexOf("has-image")!==-1&&(e=a(c).find("img"),e.attr("data-src")&&c.offsetTop<g&&(e.attr("src",e.attr("data-src")),e.attr("data-src",null))),b===f.length-1&&(c.className+=" last-item")}),b.delay(b.bind(function(){this.subviews.vscrollbar.onScrollListen=function(){this.$el.find("img").each(function(b,c){e=a(c),e.attr("data-src")&&(e.attr("src",e.attr("data-src")),e.attr("data-src",null))}),this.onScrollListen=null}},this),500),this.refreshScrollBar(),this.startUpdateCheck()},onQueueUpdated:function(a,b){this.updateItemsToLoad(this.model.get("queue-"+this.options.section).length)},refreshScrollBar:function(){this.subviews&&this.subviews.vscrollbar&&this.subviews.vscrollbar.refresh()},onResizeWindow:function(){var a=this.win.width()<=1440;this.isNarrowScreen!==a&&(this.isNarrowScreen=a,this.refreshScrollBar())},onHeadlinesUpdated:function(){setTimeout(this.refreshScrollBar,1e3)},updateItemsToLoad:function(a){if(a===0)return;this.showNewItems()},showNewItems:function(c){c&&(c.stopPropagation(),c.preventDefault()),this.newcontent=a(this.model.get("queue-"+this.options.section));if(this.newcontent===undefined||this.newcontent.length===0)return;this.newcontent.addClass("newcontent");var d;this.newcontent.find("img").each(function(b,c){d=a(c),d.attr("data-src")&&(d.attr("src",d.attr("data-src")),d.attr("data-src",null))}),a(this.newcontent[0]).append('<div class="shadow"></div>').addClass("top"),this.ul.prepend(this.newcontent);var e=this.ul.find("li");e.length>60&&e.slice(60).remove(),this.model.merge(this.options.section);if(this.newBubble===undefined){var f=a("h6",this.el);f.append('<div class="new-bubble">'+this.newcontent.length+"</div>"),this.newBubble=f.find(".new-bubble"),this.newBubble.fadeOut(0)}else this.newBubble.html(this.newcontent.length);this.newBubble.fadeIn(300),setTimeout(b.bind(function(){this.newcontent.removeClass("newcontent"),this.newBubble.hide()},this),this.removeNewHighlight*1e3)},startUpdateCheck:function(){clearInterval(this.interval),this.interval=setInterval(this.checkForUpdates,this.updateDelay*1e3)},stopUpdateCheck:function(){clearInterval(this.interval)},checkForUpdates:function(){this.fetchUpdate(this.options.section)},destroy:function(a){this.win.off("."+this.cid),this.stopUpdateCheck(),this.model.unbind("change:markup-"+this.options.section,this.onMarkupUpdated),this.model.unbind("change:queue-"+this.options.section,this.onQueueUpdated),this.$el.removeClass("loading"),a&&this.ul.empty(),c.prototype.destroy.call(this,!1)}});return i}),define("views/modules/hero",["jquery","underscore","backbone","baseview","pubsub","state"],function(a,b,c,d,e,f){var g=d.extend({events:{"click .slide":"open","click .contents .hli":"openTile","click .hero-page-trigger,.hero-popular-page-trigger":"toggleFrontBack"},initialize:function(c){c=a.extend(!0,{animate:{duration:200},shadow:{opacity:".4",duration:200,delay:0}},c),d.prototype.initialize.call(this,c),this.flipAnimationStyle=this.transformCssHyphenName+" "+this.options.animate.duration+"ms linear",this.opacityDelayAnimationStyle="opacity "+this.options.shadow.duration+"ms linear "+this.options.shadow.delay+"ms",this.opacityAnimationStyle="opacity "+this.options.shadow.duration+"ms linear",this.visibleFace="front",this.mostPopularLoaded=!1,this.pubSub={},this.pubSub["hero:pageturn:show"]=this.setUpPartner,this.pubSub["hero:pageturn:hide"]=this.setUpPartner,e.attach(this.pubSub,this),this.cacheSelectors(),this.$(".popular").length&&f.fetchHtml("/services/most-popular/hero/home/7/").done(b.bind(function(a){this.$(".popular").html(a),this.mostPopularLoaded=!0,this.cacheSelectors()},this))},open:function(b){var c=a(b.currentTarget);c.find(".text.video").length===0&&!a(b.target).is("a")&&c.find(".story > h1 > a").trigger("click")},openTile:function(b){if(b.type==="click"&&b.hasOwnProperty("originalEvent")){var c=a(b.currentTarget).index();this.$(".slide:eq("+c+") .story > h1 > a").click()}},setUpPartner:function(){var b=a(".theatre .partner-placement .container"),c=a(".theatre .partner-placement"),d=a(".theatre").hasClass("flip");this.$el.append(c),c[0].style[this.perspectiveCssName]="1400px",b[0].style[this.transformStyleCssName]="preserve-3d",this.useCSSTransforms?d?this.visibleFace==="front"?this.adFlipHide(b,this.frontLeftPane,this.frontShadowRightPane):this.adFlipHide(b,this.backLeftPane,this.backShadowRightPane):this.visibleFace==="front"?this.adFlipShow(b,this.frontLeftPane,this.frontShadowRightPane):this.adFlipShow(b,this.backLeftPane,this.backShadowRightPane):d?(a(".theatre").removeClass("flip"),c.hide(),this.frontPanel.show(),this.backPanel.show()):(a(".theatre").addClass("flip"),c.show(),this.frontPanel.hide(),this.backPanel.hide())},adFlipHide:function(c,d,e){var f=c.parent(),g=f.clone(),h=a('<div class="partner-shadow"></div>');f.append(h),this.$el.prepend(g);var i=g.children(".container");f.css({width:360,overflow:"hidden"});var j=a.Deferred();this._setupInitialFlipPosition(i,d,e,h,!0),b.delay(b.bind(function(){this._triggerFrontPageHide(i,e,!1,j)},this),20),j.done(b.bind(function(){g.css({"z-index":59}),f.css({"z-index":59}),this._triggerBackPageReveal(d,h).done(b.bind(function(){g.remove(),h.remove(),f.css({width:"",overflow:"",display:"none"}),e.css({display:"none"}),a(".theatre").removeClass("flip"),this.clearAllTransition(),this.clearTransition(c,f)},this))},this))},_setupAdDom:function(b){var c=b.clone(),d=a('<div class="partner-shadow"></div>');return c.append(d),{clone:c,shadow:d}},adFlipShow:function(c,d,e){var f=c.parent(),g=f.clone(),h=a('<div class="partner-shadow"></div>');g.append(h),this.$el.append(g),g.css({display:"block",opacity:1,"z-index":59,width:360,overflow:"hidden"});var i=a.Deferred();this._setupInitialFlipPosition(d,c,h,e,!1),f.css({"z-index":61,display:"block"}),b.delay(b.bind(function(){this._triggerFrontPageHide(d,h,!0,i)},this),20),i.done(b.bind(function(){g.css({"z-index":61}),a(".theatre").addClass("flip"),this._triggerBackPageReveal(c,e).done(b.bind(function(){g.remove(),this.clearAllTransition(),this.clearTransition(c,f)},this))},this))},toggleFrontBack:function(c){var d=a(c.currentTarget),f=d.attr("data-side");if(!this.mostPopularLoaded)return;if(this.useCSSTransforms){var g=this.$(".hero-page-back"),h=a.Deferred();this.registerAnimation(h),f==="front"?(this.visibleFace="back",this.pageFlipStage1(!0).done(b.bind(function(){this.pageFlipStage2(!0).done(function(){h.resolve()})},this))):(this.visibleFace="front",this.pageFlipStage1(!1).done(b.bind(function(){this.pageFlipStage2(!1).done(function(){h.resolve()})},this)))}else f==="front"?(this.registerAnimation(this.frontPanel.fadeOut().promise()),e.trigger("uotrack","hfmostpopularopen")):f==="back"&&(this.registerAnimation(this.frontPanel.fadeIn().promise()),e.trigger("uotrack","hfmostpopularclose"))},setupPageFlip:function(a,b){if(this.frontPanel.length){this.frontPanel[0].style[this.perspectiveCssName]="1400px",this.frontPanel[0].style[this.transformStyleCssName]="preserve-3d",this.frontPanel[0].style[this.perspectiveOriginCssName]="360px 50%";if(a[0]===this.frontLeftPane[0]||b[0]===this.frontLeftPane[0])this.frontLeftPane[0].style[this.transformOriginCssName]="360px";else if(a[0]===this.frontRightPane[0]||b[0]===this.frontRightPane[0])this.frontRightPane[0].style[this.transformOriginCssName]="0px"}a[0].style[this.backfaceVisibilityCssName]="hidden",a[0].style[this.transformStyleCssName]="preserve-3d",b[0].style[this.backfaceVisibilityCssName]="hidden",b[0].style[this.transformStyleCssName]="preserve-3d";if(this.mostPopularLoaded){this.backPanel[0].style[this.perspectiveCssName]="1400px",this.backPanel[0].style[this.transformStyleCssName]="preserve-3d";if(a[0]===this.backLeftPane[0]||b[0]===this.backLeftPane[0])this.backLeftPane[0].style[this.transformOriginCssName]="360px",this.backLeftPane.css("z-index","5");else if(a[0]===this.backRightPane[0]||b[0]===this.backRightPane[0])this.backRightPane[0].style[this.transformOriginCssName]="0px"}},pageFlipStage1:function(c){var d=a.Deferred();return c?this._setupInitialFlipPosition(this.frontRightPane,this.backLeftPane,this.backShadowRightPane,this.frontShadowLeftPane,!0):this._setupInitialFlipPosition(this.backLeftPane,this.frontRightPane,this.frontShadowLeftPane,this.backShadowRightPane,!1),b.delay(b.bind(function(){c?this._triggerFrontPageHide(this.frontRightPane,this.backShadowRightPane,!1,d):this._triggerFrontPageHide(this.backLeftPane,this.frontShadowLeftPane,!0,d)},this),20),d},cacheSelectors:function(){this.frontPanel=this.$(".hero-page-front"),this.frontRightPane=this.frontPanel.children(".hero-right-pane"),this.frontLeftPane=this.frontPanel.children(".hero-left-pane"),this.frontShadowLeftPane=this.frontLeftPane.find(".hero-shadow"),this.frontShadowRightPane=this.frontRightPane.find(".hero-shadow"),this.mostPopularLoaded&&(this.backPanel=this.$(".hero-page-back"),this.backLeftPane=this.backPanel.children(".hero-left-pane"),this.backRightPane=this.backPanel.children(".hero-right-pane"),this.backShadowRightPane=this.backRightPane.find(".hero-shadow"),this.backShadowLeftPane=this.backLeftPane.find(".hero-shadow"))},pageFlipStage2:function(a){var c;return a?(this.backShadowRightPane.css({display:"none"}),this.frontPanel.css("z-index",58),this.backPanel.css("z-index",60),c=this._triggerBackPageReveal(this.backLeftPane,this.frontShadowLeftPane)):(this.frontShadowLeftPane.css({display:"none"}),this.frontPanel.css("z-index",60),this.backPanel.css("z-index",58),c=this._triggerBackPageReveal(this.frontRightPane,this.backShadowRightPane)),c.done(b.bind(function(){this.clearAllTransition()},this)),c},clearAllTransition:function(){this.clearTransition(this.frontPanel,this.backPanel,this.backLeftPane,this.backRightPane,this.frontLeftPane,this.frontRightPane,this.frontShadowLeftPane,this.frontShadowRightPane,this.backShadowLeftPane,this.backShadowRightPane)},_setupInitialFlipPosition:function(a,b,c,d,e){this.setupPageFlip(a,b),c.css({opacity:this.options.shadow.opacity,display:"block"}),d.css({opacity:0,display:"block"}),a[0].style[this.transformCssName]="rotateY(0deg)",a[0].style[this.transitionCssName]=this.flipAnimationStyle,b[0].style[this.transformCssName]=this._getCssTransformRotation(e)},_getCssTransformRotation:function(a){return a?"rotateY(90deg)":"rotateY(-90deg)"},_triggerFrontPageHide:function(a,b,c,d){this.registerTransitionEndListener(a,d),a[0].style[this.transformCssName]=this._getCssTransformRotation(c),b[0].style[this.transitionCssName]=this.opacityAnimationStyle,b[0].style.opacity=0},_triggerBackPageReveal:function(a,b){var c=this.registerTransitionEndListener(a);return a[0].style[this.transitionCssName]=this.flipAnimationStyle,a[0].style[this.transformCssName]="rotateY(0deg)",b[0].style[this.transitionCssName]=this.opacityDelayAnimationStyle,b.css({opacity:this.options.shadow.opacity,display:"block"}),c}});return g}),define("views/modules/taboola",["jquery","underscore","backbone","app","state"],function(a,b,c,d,e){var f=c.View.extend({initialize:function(c){this.options=a.extend({},c||{}),this.options.widget&&d.loadScript("#","_taboola",b.bind(this.getWidget,this))},destroy:function(){this.remove()},getRelated:function(b,c,e,f,g,h){if(!b)return;c||(c="video"),e||(e="video"),f||(f=4),g||(g=window.location.href),h||(h=0);var i="#";i+="?output.callback=define&app.type=desktop&app.apikey=90393b522c6937bd3b1e815ead8d189cea03650",i+="&source.id="+h+"&source.url="+encodeURIComponent(g)+"&source.type="+c+"&rec.type="+e+"&count="+f,require([i],function(c){d.set("taboolaResponseID",c.id),delete require.s.contexts._.defined[i],a('script[data-requiremodule="'+i+'"]').remove(),c.list||(c.list={}),b(c)})},getWidget:function(){console.log("TABOOLA more stories"),_taboola.push({notify:"newPageLoad"}),_taboola.push({article:"auto",target_type:"mix",url:window.location.href}),_taboola.push({mode:this.options.mode,container:this.options.container})}});return f}),define("views/modules/headline",["jquery","underscore","backbone","state","pubsub"],function(a,b,c,d,e){var f=c.View.extend({events:{"click .button-add-content":"showMore",'click .toggle .btn:not(".active")':"toggleGridListView"},initialize:function(a){this.itemsPerPage=this.$el.data("itemsPerPage"),this.$button=this.$(".button-add-content"),this.section=a.section+"front",b.bindAll(this,"transitionMore")},destroy:function(a){this.undelegateEvents(),a&&this.remove()},getMoreHeadlines:function(a,c){d.fetchHtml(window.location.pathname+a+"/").done(b.bind(function(a){var b=a.find(".page").removeClass("active").addClass("inactive"),d=a.find(".button-add-content");this.$(".collection").append(b),d.length>0?this.$(".show-more").html(d):this.$(".button-add-content").addClass("inactive"),c(b)},this)).fail(b.bind(function(){this.$button.removeClass("loading").addClass("inactive")},this))},showMore:function(b){if(a(b.target).hasClass("inactive"))return!1;this.$button=a(".button-add-content",this.el),this.$button.addClass("loading").text(this.$button.attr("data-loading"));var c;if(this.$el.hasClass("stag")){var d=parseInt(a(b.target).data("next"),10);this.getMoreHeadlines(d,this.transitionMore)}else{c=this.$(".page.active:last").next();var f=c.attr("data-itemnum"),g=c.attr("data-items-per-page"),h=Math.round(f/g);a("img",c).each(function(){var b=a(this);b.attr("src",b.attr("data-src"))}),e.trigger("uotrack",this.section+"morestories"+h),this.transitionMore(c)}return!1},toggleGridListView:function(b){var c=a(b.currentTarget),d=a(".toggle .btn",this.el),f=a(".collection",this.el),g=c.hasClass("grid")?"grid":"list";return d.removeClass("active"),c.addClass("active"),g=="list"?(f.addClass("listview"),e.trigger("uotrack","listview")):(f.removeClass("listview"),e.trigger("uotrack","gridview")),!1},transitionMore:function(b){Modernizr.csstransitions?b.removeClass("inactive").addClass("active"):b.animate({"max-height":"5000px"},200,function(){a(this).removeClass("inactive").addClass("active").css("max-height","")}),this.$(".page.inactive").length<=0&&this.$button.addClass("inactive"),this.$button.removeClass("loading").text(this.$button.attr("data-default")),e.trigger("showmore:headlines")}});return f}),define("views/modules/partner/overlay",["jquery","underscore","backbone","pubsub","baseview","admanager","state"],function(a,b,c,d,e,f,g){var h=e.extend({events:{"click a.close-partner":"onClickCloseButton","click .film":"onClickCloseButton"},pubSub:null,destroy:function(a){this.$arrows.removeClass("aboveFilm"),e.prototype.destroy.call(this,!0)},findSizeForAd:function(){var a={adSizeClass:"size-s",adTop:"50%"},b=450,c=App.get("headerEl").outerHeight(),d=document.documentElement.clientHeight-c-80,e=document.documentElement.clientWidth-160;return e>1080&&d>810?(a.adSizeClass="size-xl",b=810):e>936&&d>700?(a.adSizeClass="size-l",b=700):e>768&&d>576&&(a.adSizeClass="size-m",b=576),a.adTop=(document.documentElement.clientHeight-c-b)/2+c+"px",a},initialize:function(c){this.config=a.extend({},c||{}),a("article.asset",document).length>0?(this.$arrows=a(".overlay-arrows .next-wrap, .overlay-arrows .previous-wrap"),this.$el.addClass("withAsset")):this.$arrows=a("#cards #nextSection, #cards #prevSection"),b.bindAll(this),e.prototype.initialize.call(this,c),this.listen(),this.onResize(),f.logDebug("Partner Overlay initialized",this)},listen:function(){if(this.pubSub!=null)return;this.pubSub={},this.pubSub["partner:"+this.config.dfp.ecid+":ready"]=this.onReady,this.pubSub["partner:"+this.config.dfp.ecid+":close"]=this.onClose,this.pubSub["partner:"+this.config.dfp.ecid+":leavebehind:clicked"]=this.showOverlay,this.pubSub["open:overlay"]=this.onClose,this.pubSub["resize:app"]=this.onResize,this.pubSub["breakingbar:after:open"]=this.onResize,this.pubSub["breakingbar:after:close"]=this.onResize,d.attach(this.pubSub,this)},onClickCloseButton:function(){this.onClose()},onClose:function(){this.$arrows.removeClass("aboveFilm"),d.trigger("overlay:close:show"),d.trigger("partner:"+this.config.dfp.ecid+":stopToClose"),this.hide(!0,b.bind(function(){this.$el.removeAttr("style")},this))},onFinish:function(){},onReady:function(){this.config.startVisible?(this.showOverlay(),d.trigger("partner:"+this.config.dfp.ecid+":creative:defaultshow")):d.trigger("partner:"+this.config.dfp.ecid+":leavebehind:defaultshow")},onResize:function(){var a=this.findSizeForAd();this.config.$adEl.removeClass("size-s").removeClass("size-m").removeClass("size-l").removeClass("size-xl").addClass(a.adSizeClass).css({top:a.adTop})},showOverlay:function(){this.$arrows.addClass("aboveFilm"),this.show(!0),d.trigger("overlay:close:hide"),d.trigger("partner:"+this.config.dfp.ecid+":play")}});return h}),define("views/modules/partner/pushdown",["jquery","underscore","backbone","app","pubsub","baseview","admanager","state"],function(a,b,c,d,e,f,g,h){var i=f.extend({events:{"click a.close-partner":"onClickCloseButton"},pubSub:null,changeBackground:function(){if(this.config.backgroundSolidColor=="transparent")return;var a=d.get("body");a.addClass("partner-background"),this.animate(a,"background-color",this.config.backgroundSolidColor,200,"ease-in").done(b.bind(function(){this.config.backgroundRepeatingImage!=null&&this.config.backgroundRepeatingImage!=""&&a.css({"background-image":"url('"+this.config.backgroundRepeatingImage+"')","background-repeat":"repeat"})},this))},clearBackground:function(){var a=d.get("body");a.css({"background-image":"","background-repeat":""}),this.animate(a,"background-color","rgb(246,246,246)",200,"ease-in").done(b.bind(function(){a.removeClass("partner-background")},this))},destroy:function(a){this.onClose(),e.off("complete:adjsttopmargin:cards",this.onCardsPushdownComplete,this),this.$el.empty(),f.prototype.destroy.call(this,a)},initialize:function(c){this.config=a.extend({},c||{}),b.bindAll(this),this.listen(),f.prototype.initialize.call(this,c),g.logDebug("Pushdown Advertisment initialized",this)},listen:function(){if(this.pubSub!=null)return;this.pubSub={},this.pubSub["partner:"+this.config.dfp.ecid+":ready"]=this.onReady,this.pubSub["partner:"+this.config.dfp.ecid+":close"]=this.onClose,this.pubSub["partner:"+this.config.dfp.ecid+":leavebehind:clicked"]=this.showPushdownAd,this.pubSub["open:overlay"]=this.onClose},onCardsPushdownComplete:function(){this.$el.addClass("open"),e.trigger("partner:"+this.config.dfp.ecid+":play"),e.off("complete:adjsttopmargin:cards",this.onCardsPushdownComplete,this)},onClickCloseButton:function(){this.onClose()},onClose:function(){e.trigger("partner:"+this.config.dfp.ecid+":stopToClose"),this.$el.removeClass("open"),e.trigger("pullup:cards"),this.clearBackground()},onFinish:function(){},onReady:function(){this.config.startVisible?(this.showPushdownAd(),e.trigger("partner:"+this.config.dfp.ecid+":creative:defaultshow")):e.trigger("partner:"+this.config.dfp.ecid+":leavebehind:defaultshow")},showPushdownAd:function(){e.on("complete:adjsttopmargin:cards",this.onCardsPushdownComplete,this),e.trigger("pushdown:cards"),this.changeBackground()}});return i}),define("views/modules/partner/flip",["jquery","underscore","backbone","pubsub","baseview","admanager","state"],function(a,b,c,d,e,f,g){var h=e.extend({events:{"click a.close-partner":"onClickCloseButton"},destroy:function(a){this.$theatre.removeClass("flip"),this.config.$adEl.removeClass("show"),this.config.$adEl.hide(),this.clearTransform(),d.unattach(this.pubSub,this),e.prototype.destroy.call(this,a),f.logDebug("Partner Flip destroyed")},initialize:function(c){this.config=a.extend({},c||{}),b.bindAll(this),e.prototype.initialize.call(this,c),this.listen(),f.logDebug("Partner Flip initialized",this)},listen:function(){this.pubSub={},this.pubSub["partner:"+this.config.dfp.ecid+":ready"]=this.onReady,this.pubSub["partner:"+this.config.dfp.ecid+":close"]=this.onUnflip,this.pubSub["partner:"+this.config.dfp.ecid+":leavebehind:clicked"]=this.onFlip,d.attach(this.pubSub,this)},onClickCloseButton:function(){this.onUnflip()},onFinish:function(){},onFlip:function(){d.trigger("carousel:stoptimer"),d.trigger("sidebar:button:hide",!0),this.$theatre.addClass("flip"),this.useCSSTransforms?(this.initializeTransform("0deg","-180deg"),this.resetTransitionOnCompletion(this.$hero),b.defer(b.bind(function(){this.triggerFlipCss("180deg","0deg")},this))):this.config.$adEl.addClass("show"),d.trigger("partner:"+this.config.dfp.ecid+":play")},onReady:function(){this.$theatre=this.$(".theatre"),this.$hero=a(".hero",this.$theatre),this.config.startVisible?b.delay(b.bind(function(){this.onFlip(),d.trigger("partner:"+this.config.dfp.ecid+":creative:defaultshow")},this),600):d.trigger("partner:"+this.config.dfp.ecid+":leavebehind:defaultshow")},onUnflip:function(){d.trigger("carousel:starttimer"),d.trigger("sidebar:button:show",!0),d.trigger("partner:"+this.config.dfp.ecid+":stopToClose"),this.useCSSTransforms?(this.initializeTransform("180deg","0deg"),this.resetTransitionOnCompletion(this.$hero).done(b.bind(function(){this.config.$adEl.hide()},this)),b.defer(b.bind(function(){this.triggerFlipCss("0deg","-180deg")},this))):this.config.$adEl.removeClass("show"),this.$theatre.removeClass("flip")},triggerFlipCss:function(a,b){var c=this.transformCssHyphenName+" 0.6s ease-in-out";this.$hero[0].style[this.transitionCssName]=c,this.config.$adEl[0].style[this.transitionCssName]=c,this.$hero[0].style[this.transformCssName]="rotateX("+a+")",this.config.$adEl[0].style[this.transformCssName]="rotateX("+b+")"},resetTransitionOnCompletion:function(a){return this.registerTransitionEndListener(a).done(b.bind(function(){this.clearTransform()},this))},initializeTransform:function(a,b){this.$theatre[0].style[this.perspectiveCssName]="900px",this.$hero[0].style[this.backfaceVisibilityCssName]="hidden",this.$hero[0].style[this.transformStyleCssName]="preserve-3d",this.config.$adEl.show(),this.config.$adEl[0].style[this.backfaceVisibilityCssName]="hidden",this.config.$adEl[0].style[this.transformStyleCssName]="preserve-3d",this.$hero[0].style[this.transformCssName]="rotateX("+a+")",this.config.$adEl[0].style[this.transformCssName]="rotateX("+b+")"},clearTransform:function(){this.clearTransition(this.$theatre,this.$hero,this.config.$adEl)}});return h}),define("views/modules/partner/page-turn",["jquery","underscore","backbone","pubsub","baseview","admanager","state"],function(a,b,c,d,e,f,g){var h=e.extend({events:{"click a.close-partner":"onClickCloseButton"},destroy:function(a){d.unattach(this.pubSub,this),e.prototype.destroy.call(this,a)},initialize:function(c){this.config=a.extend({},c||{}),b.bindAll(this),e.prototype.initialize.call(this,c),this.listen(),f.logDebug("Partner Page Turn initialized",this)},listen:function(){this.pubSub={},this.pubSub["partner:"+this.config.dfp.ecid+":ready"]=this.onReady,this.pubSub["partner:"+this.config.dfp.ecid+":close"]=this.onUnflip,this.pubSub["partner:"+this.config.dfp.ecid+":leavebehind:clicked"]=this.onFlip,d.attach(this.pubSub,this)},onClickCloseButton:function(){this.onUnflip()},onFinish:function(){},onFlip:function(){d.trigger("sidebar:button:hide",!0),d.trigger("hero:pageturn:show"),d.trigger("partner:"+this.config.dfp.ecid+":play")},onReady:function(){this.$theatre=this.$(".theatre"),this.$hero=a(".hero",this.$theatre),this.config.startVisible?b.delay(b.bind(function(){this.onFlip(),d.trigger("partner:"+this.config.dfp.ecid+":creative:defaultshow")},this),600):d.trigger("partner:"+this.config.dfp.ecid+":leavebehind:defaultshow")},onUnflip:function(){d.trigger("sidebar:button:show",!0),d.trigger("partner:"+this.config.dfp.ecid+":stopToClose"),d.trigger("hero:pageturn:hide")}});return h}),define("advertisement",["jquery","underscore","backbone","pubsub","app","baseview","state","admanager","views/modules/partner/leavebehind","views/modules/partner/slider","views/modules/partner/overlay","views/modules/partner/pushdown","views/modules/partner/flip","views/modules/partner/page-turn","views/modules/partner/leaderboard","views/modules/partner/asset-sponsorship"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=f.extend({destroy:function(b){this.destroyed=!0,a('.partner-slot[data-slot-type="in"]',this.$el).unbind(),this.$adEl!=null&&this.$adEl.empty(),f.prototype.destroy.call(this,b)},initialize:function(b){if(h.noAds){h.logWarn("Advertisement not initialized due to ads turned off");return}this.$adEl=this.adEl=null,this.config=a.extend({},b||{}),f.prototype.initialize.call(this,{});var c=this.config.aws.split("/").join("_");this.autoCreateSlot(c),this.config.masterPageType=="card"&&(this.subviews.slider=new j({awsId:c,el:".partner.slider"})),h.logDebug("Advertisement initialized",this),this.render(c)},listenForSliderPoster:function(a){h.logDebug("Listening for slider, "+a.attr("id"),a),this.subviews.slider&&this.subviews.slider.listenForAd()},autoCreateSlot:function(c){if(this.config.autoCreateSlot&&a("#partner_high_impact_"+c,".partner.slider").length<1){var d={section_name:c},e='<div id="partner_high_impact_<%= section_name %>" class="partner-slot partner-placement high-impact" data-slot-position="high_impact" data-slot-id="partner_high_impact_<%= section_name %>" data-slot-type="in" data-sizes="mediumrectangle,halfpage,elastic,videotakeover" data-section-path="<%= section_name %>"></div>',f=b.template(e,d);a(f).appendTo(".partner.slider"),h.logDebug("Slot autocreated for "+c)}},render:function(b){var c=this,d={pageType:null,series:this.config.series,sitepage:this.config.sitePage,title:this.config.title,topic:this.config.topic},e=this.config.aws;a('.partner-slot[data-slot-type="in"]',this.$el).each(function(){var f=a(this);h.logInfo("Found Slot: "+f.attr("id"),f);if(c.config.autoCreateSlot&&f.attr("data-section-path")!=b)return h.logInfo("Ignored Slot: "+f.attr("id"),f),!0;var g=e,i=f.attr("data-cst");typeof i!="undefined"&&(g=i);var j=f.attr("data-slot-position")+"/"+g,k=f.attr("id"),l=[],m=[],n='.partner-placement[data-slot-id="'+k+'"]';c.config.autoCreateSlot&&k!="partner_high_impact_"+c.config.sectionPath&&(n+=',.partner-placement[data-slot-id="partner_high_impact_'+c.config.sectionPath+'"][data-shared-placement]'),a(n,c.$el).each(function(){var b=a(this);l=h.getSizes(l,b.attr("data-sizes")),m=m.concat(h._split(b.attr("data-sizes"),",")),h.logInfo("Found Placement: "+b.attr("id"),b)});var o=h.defineSlot(j,k,l,d);f.attr("data-slot-position")=="high_impact"&&(h._containsValue(m,"mediumrectangle")>0||h._containsValue(m,"halfpage")>0)&&(f.removeAttr("style"),a("iframe",f).attr("width","0").attr("height","0"),c.listenForSliderPoster(f)),f.bind("partnersetup",function(a,b){var d=null;if(typeof b!="undefined"&&typeof b.data!="undefined")d=b.data;else if(typeof a.originalEvent!="undefined"&&typeof a.originalEvent.data!="undefined")d=a.originalEvent.data;else{h.logError("Found a high impact ad, can't find the data object from the iFrame",arguments);return}c.setupHighImpact(d)});var p=!0;typeof f.attr("data-defer")!="undefined"&&f.attr("data-defer")=="true"&&(p=!1),p&&(h.loadAd(o),a('.partner-placement[data-slot-id="'+k+'"][data-default-text]',c.$el).each(function(){var b=a(this),c=b.attr("data-default-text");a("<span>"+c+"</span>").prependTo(b)}))})},setupAssetSponsorship:function(b){h.logDebug("Found Asset Sponsorship",b);var c=a.extend(this.config,{});c.data=b,c.el=this.$el.closest(".asset"),this.subviews.sponsorship=new p(c)},setupSports728x90:function(b){h.logDebug("Found Sports' 728x90",b);var c=a(".partner-placement.leaderboard",this.$el);this.subviews.leaderboard=new o({data:b,el:c}),b.trackVCE=="Yes"&&this.trackVCE(b,"leaderboard",c)},setupHighImpact:function(c){var d=this;this.stopListenForSliderPoster();if(c.adType.indexOf("728x90")>-1){this.setupSports728x90(c);return}if(c.adType=="sponsorship"){this.setupAssetSponsorship(c);return}var e=h.getCreativeState(c.dfp.ecid),f=h.convertAdTypeToAdUnit(c.adType),g=null,j=null,o=null;if(f=="elastic"){g="elastic_"+c.dfp.ecid;var p={id:g,position:"elastic"},q=b.template(a("#partner_overlay_template").html(),p);o=a(q).appendTo("body"),j=a("#"+g)}else j=a(".partner-placement."+f,this.$el),g=j.attr("id");this.adEl=g,this.$adEl=j;var r=a(".partner-placement-leavebehind",this.$el);this.subviews.leavebehind=new i({el:r,dfp:c.dfp,leaveBehindImage:c.leaveBehindImage,leaveBehindText:c.leaveBehindText,startVisible:!e.isOpen,$adEl:j}),h._createStyleSheet(j.attr("id")+"_stylesheet",c.stylesheet,j);var s=c.html;if(f!="livefeed"){var p={html:c.html};

s=b.template(a("#partner_container_template").html(),p)}a(s).appendTo(j);if(f=="elastic"){var t=a.extend({$adEl:d.$adEl,adEl:d.adEl,el:o,startVisible:e.isOpen},c||{});this.subviews.overlay=new k(t)}else if(f=="pushdown"){var u=a.extend({el:d.$adEl,startVisible:e.isOpen},c||{});this.subviews.pushdown=new l(u)}else if(f=="heroflip"){var v=a.extend({$adEl:j,el:d.$el,startVisible:e.isOpen},c||{}),w=j.closest(".theatre").find(".hero");w.hasClass("headline_pack")?this.subviews.heroturn=new n(v):this.subviews.flip=new m(v)}require([c.script],function(b){if(d.destroyed)return;var e=a.extend({el:d.$adEl},c||{});d.subviews.partner=new b(e)}),c.trackVCE=="Yes"&&(e.isOpen?d.trackVCE(c,f,j):d.trackVCE(c,f,r)),e.isOpen=!1,h.registerCreativeState(e.ecid,e)},stopListenForSliderPoster:function(){h.logDebug("Stop listening for slider."),this.subviews.slider&&this.subviews.slider.stopListenForAd()},trackVCE:function(a,b,c){var d="../js/rs.js#c1=3&amp;c3="+a.dfp.ebuy+"&amp;c4="+a.dfp.ecid+"&amp;c5="+a.dfp.epid+"&amp;c6=&amp;c10=1&amp;c11="+a.dfp.esid+"&amp;c13="+h.getVCESize(b)+";&amp;c16=dfp&amp;ax_n="+c.attr("id");h._createScript(c.attr("id")+"_vce",d,c),h.logDebug("Tracked vCE",d,c[0])}});return q}),define("views/modules/ajax-widget",["jquery","underscore","backbone","state"],function(a,b,c,d){var e=c.View.extend({initialize:function(c){var d=a(this.options.contents).length>0;this.loadData(this.options.url,d),this.options.refresh&&this.options.contents&&(this.refresh=setInterval(b.bind(function(){this.loadData(this.options.url,!0)},this),this.options.refresh))},loadData:function(c,e){if(a(this.options.contents).hasClass("paused")){clearInterval(this.refresh);return}this.ajax=d.fetchHtml(c).done(b.bind(function(a){this.ajax=null,this.$el.html(a)},this)).always(b.bind(function(){this.$el.removeClass("loading")},this))},destroy:function(a){this.undelegateEvents(),this.ajax&&this.ajax.abort(),clearInterval(this.refresh),a&&this.remove()}});return e}),define("views/modules/markets",["jquery","underscore","backbone","views/modules/ajax-widget","pubsub"],function(a,b,c,d,e){var f=c.View.extend({el:"#CList-Markets",events:{"click .market":"changeMarketFocus"},initialize:function(a){this.subviews={},this.subviews.markets=new d({el:".load-markets",url:"/services/markets/home-widget/",refresh:6e4,contents:"#market-suspender-widget"})},changeMarketFocus:function(b){var c=a(".market",this.el),d=a(b.currentTarget);c.removeClass("active"),d.addClass("active")},destroy:function(a){this.undelegateEvents(),a&&this.remove()}});return f}),define("views/modules/snapshots",["jquery","underscore","backbone","pubsub","app","state","cookie"],function(a,b,c,d,e,f){var g=c.View.extend({el:".front-galleries",events:{"click a.vote":"revealQuickQuestion","click .snap-vote a.cancel":"revealSnapshotTeaser","click a.snap-vote-btn":"registerVote"},initialize:function(){this.subviews={},this.render()},render:function(){if(a("#snapshots").length<=0){var b=a("#CList-galleries ul li:first-child");b.after('<li data-id="gallery" id="snapshots" data-href="/services/snapshots/gallery/"><a href="/services/snapshots/gallery/" data-href="/services/snapshots/gallery/">Snapshots</a></li>')}},revealQuickQuestion:function(b){var c=a(b.currentTarget).closest(".snapshot-card");a(".snapshot",c).hide(),a(".snap-vote",c).not(".results").fadeIn()},revealSnapshotTeaser:function(b){var c=a(b.currentTarget).closest(".snapshot-card");a(".snap-vote",c).hide(),a(".snapshot",c).fadeIn()},revealResults:function(b,c){var d=a(b.currentTarget).closest(".snapshot-card");d.find(".snap-vote.results").length?d.find(".snap-vote.results").replaceWith(c):d.append(c),a(".snap-vote",d).hide(),a(".snap-vote.results",d).fadeIn()},registerVote:function(c){var d=a(c.currentTarget).closest(".snapshot-card"),e=a(c.currentTarget).attr("data-answer-id"),g="/services/snapshots/vote/"+e+"/";a(c.currentTarget).addClass("loading");var h=a(".slide.active[data-qqid]",this.el).attr("data-qqid");a.cookie(h)&&(g="/services/snapshots/get/"+h+"/"),this.ajax=f.fetchData(g).done(b.bind(function(d){var e=b.pluck(d.question[0].location[0].answer,"answerCount"),f=b.reduce(e,function(a,b){return a+parseFloat(b)},0),g=d.question[0].location[0].answer.length-1,i=0;b.each(d.question[0].location[0].answer,function(a,b){var c=Math.round(parseFloat(a.answerCount)/f*100);b==g?c=100-i:i+=c,a.answerPercent=c});var j=a("#snapshot-results"),k=b.template(j.html(),{data:d.question[0]});this.revealResults(c,k),a(c.currentTarget).removeClass("loading"),a.cookie(h,!0)},this))},destroy:function(a){this.undelegateEvents(),b.each(this.subviews,function(b){typeof b.destroy!="undefined"&&b.destroy(a)}),a&&this.remove()}});return g}),define("views/modules/markets-autocomplete",["jquery","underscore","app","views/modules/autocomplete","state"],function(a,b,c,d,e){var f=d.extend({initialize:function(a){d.prototype.initialize.apply(this,arguments),this.$form=this.$field.closest("form"),this.$form.on("submit",this.disableSubmit())},fetchData:function(){this.$error.empty();var c=this.$field.val();this.clearResults(),this.$error.empty();var d=b.bind(function(c){this.fetch=null,c.Results.length?(this.$form.off("submit"),this.$autoComplete.show(),c=c.Results,c=c.splice(0,this.maxResults),a.map(c,b.bind(function(b,c){var d=a("<li>").html(b.Symbol+" - "+b.Name);this.$autoComplete.append(d)},this))):(this.$error.append('<b class="message">No results found</b>'),this.$form.on("submit",this.disableSubmit()))},this);this.fetch&&this.fetch.abort(),this.fetch=e.fetchData(this.url+c).done(d)},disableSubmit:function(){return!1},onSelectResult:function(a){d.prototype.onSelectResult.call(this,a),this.$error.html()!=""&&this.$form.submit()},destroy:function(){this.$form.off("submit")}});return f}),define("views/modules/about/forecast-sidebar",["jquery","underscore","backbone","pubsub","baseview","views/modules/form","views/modules/about/about-autocomplete","views/modules/sidebar-scroll","state"],function(a,b,c,d,e,f,g,h,i){var j=e.extend({el:"#about-forecast-sidebar",events:{"click .sub.top":"toggleForecastData","submit #current-location-form":"onAutoCompleteSubmit"},destroy:function(a){this.scrollbar.destroy(),this.Autocomplete.destroy(),e.prototype.destroy.call(this,a)},initialize:function(b){this.currentLocationForm=new f({el:this.$el.find("#current-location-form")}),this.WeatherAutoComplete=new g({el:this.$(".location-autocomplete"),min_chars:4,url:"/services/city/autocomplete/json/",max_results:8}),this.parseLocation(b),this.addScrollbar(),e.prototype.initialize.call(this),this.defaultLocation=a.cookie("aboutLocation")},toggleForecastData:function(b){b.preventDefault(),b.stopPropagation();var c=a(b.currentTarget).closest(".sub"),d=c.children("div").first(),e=c.hasClass("active"),f=this;e?(c.removeClass("active"),a.when(this.animate(d,"height","0px",150,"linear",0)).done(function(){f.refreshScrollbar()})):(a("#about-forecast-sidebar .sub").removeClass("active").children("div").css("height","0px"),c.addClass("active"),a.when(this.animate(d,"height",d[0].scrollHeight+"px",150,"linear",0)).done(function(){f.refreshScrollbar()}))},loadLocation:function(a){var c=b.bind(function(a){if(a[0]!==null)this.parseLocation(a);else{var b="Sorry. No forecast data is available in this area.";this.WeatherAutoComplete.displayError(b)}},this);a=a.replace(",",""),i.fetchData("/services/about/forecast/json/"+a+"/").done(c)},parseLocation:function(c){var e=a("script.forecast-current-tmpl").html(),f=a("script.forecast-hourext-tmpl").html(),g=b.template(e,{loc:c}),h=b.template(f,{loc:c}),i=c[0].local.city+", "+c[0].local.adminArea.code;this.$el.children(".forecast-content").children("#forecast-current").children(".current-conditions").html(g),this.$el.children(".forecast-content").children("#forecast-scroll-content").children(".scrollable-content").html(h),d.trigger("about:newMapLocation",c),this.WeatherAutoComplete.$field.val(i),this.WeatherAutoComplete.$field.data("placeholder",i)},onAutoCompleteSubmit:function(b){b.preventDefault();var c=a(b.currentTarget).find(".location-autocomplete"),d=c.val();c.data("placeholder",d),this.loadLocation(c.val())},addScrollbar:function(){this.scrollbar=new h({el:"#forecast-scroll-content",padding:2,color:"light",lockPageScroll:!1,fadeout:!0}),this.scrollbar.addHideClass()},refreshScrollbar:function(){this.scrollbar.refresh()}});return j}),define("advertisementpreload",["jquery","underscore","backbone","pubsub","app","baseview","state","admanager","views/modules/partner/overlay"],function(a,b,c,d,e,f,g,h,i){var j=f.extend({destroy:function(b){this.destroyed=!0,a('.partner-slot[data-slot-type="out"]',this.$el).unbind(),f.prototype.destroy.call(this,b)},initialize:function(c){if(h.noAds){h.logWarn("Advertisement not initialized due to ads turned off");return}b.bindAll(this),this.config=a.extend({},c||{}),f.prototype.initialize.call(this,{}),h.logDebug("Preloaded Advertisement initialized",this),this.config.isRateMetered&&h.checkMeter(this.config.rateMeter)&&this.render()},render:function(){var b=this,c={series:this.config.series,sitepage:this.config.sitePage,title:this.config.title,topic:this.config.topic},d=this.config.aws;a('.partner-slot[data-slot-type="out"]',this.$el).each(function(){var e=a(this);h.logInfo("Found Preload Slot: "+e.attr("id"),e);var f=d,g=e.attr("data-cst");typeof g!="undefined"&&(f=g);var i=e.attr("data-slot-position")+"/"+f,j=e.attr("id"),k=h.defineOutOfPageSlot(i,j,c);e.bind("partnersetup",function(a,c){var d=null;if(typeof c!="undefined"&&typeof c.data!="undefined")d=c.data;else if(typeof a.originalEvent!="undefined"&&typeof a.originalEvent.data!="undefined")d=a.originalEvent.data;else{h.logError("Found a high impact ad, can't find the data object from the iFrame",arguments);return}b.setupHighImpact(d)}),h.loadAd(k)})},setupHighImpact:function(c){var e=this;this.data=c;var f=h.convertAdTypeToAdUnit(c.adType),g="elastic_"+c.dfp.ecid,j={id:g,position:"elastic"},k=b.template(a("#partner_overlay_template").html(),j);this.$overlayEl=a(k).appendTo("body"),this.overlayEl=this.$overlayEl.attr("id");var l=a("#"+g);this.adEl=g,this.$adEl=l,this.pubSub={},this.pubSub["partner:"+c.dfp.ecid+":play"]=this.trackView,d.attach(this.pubSub,this),h._createStyleSheet(l.attr("id")+"_stylesheet",c.stylesheet,l);var m={html:c.html};

a(b.template(a("#partner_container_template").html(),m)).appendTo(l);var n=!1;this.config.isRateMetered&&(n=!0);var o=a.extend({$adEl:e.$adEl,adEl:e.adEl,el:e.$overlayEl,startVisible:n},c||{});this.subviews.overlay=new i(o),require([c.script],function(b){if(e.destroyed)return;var d=a.extend({el:e.$adEl},c||{});e.subviews.partner=new b(d)}),c.trackVCE=="Yes"&&this.trackVCE(c,f,l)},trackVCE:function(a,b,c){var d=""+a.dfp.ebuy+"&amp;c4="+a.dfp.ecid+"&amp;c5="+a.dfp.epid+"&amp;c6=&amp;c10=1&amp;c11="+a.dfp.esid+"&amp;c13="+h.getVCESize(b)+";&amp;c16=dfp";h._createScript(c.attr("id")+"_vce",d,c)},trackView:function(){if(this.data.viewUrl==null||this.data.viewUrl=="")return;var a='<img src="'+this.data.viewUrl+'" class="hide">';this.$adEl.append(a),h.logInfo("Tracked view for "+this.data.dfp.ecid,this.data)}});return j}),define("advertisementpreroll",["jquery","underscore","backbone","pubsub","app","baseview","state","admanager","libs/swfobject/swfobject"],function(a,b,c,d,e,f,g,h){var i=f.extend({destroy:function(a){window.onPrerollPlayerEvent=null,a=!0,f.prototype.destroy.call(this,a)},initialize:function(c){if(h.noAds){h.logWarn("Advertisement not initialized due to ads turned off");return}b.bindAll(this),this.config=a.extend({},c||{}),f.prototype.initialize.call(this,{}),window.onPrerollPlayerEvent=this.onEvent,h.logDebug("Preroll Advertisement initialized",this),this.render()},onEvent:function(a){switch(a.type){case"ended":this.hide(!0);break;case"started":this.showPlayerAndText()}},render:function(){var a=""+site_config.ADS.DFP.ACCOUNTID+"/"+site_config.ADS.DFP.ACCOUNTNAME+"/preroll_video/"+this.config.aws+"&sz=920x508&unviewed_position_start=1&url="+escape(this.config.url)+"&c="+Math.floor(Math.random()*10000000001);h.logDebug("AdUrl to Puzzle Player",a);var b={adURL:escape(a),eventHandler:"onPrerollPlayerEvent"};

swfobject.embedSWF("#","prerollOverlayPlayerContainer","920","508","10.0.0","/static/swf/expressInstall.swf",b,{allowFullScreen:"true",allowScriptAccess:"always",bgcolor:"#000000",wmode:"direct"},{allowFullScreen:"true"})},showPlayerAndText:function(){}});return i}),define("baseappview",["jquery","underscore","baseview","state","trafficcop","app"],
function(a,b,c,d,e,f){var g=c.extend({currentPath:"",initialize:function(a){this._animId=0,this.$top=f.get("scrollEl"),this.viewReady=!1,c.prototype.initialize.call(this,a)},destroy:function(a){c.prototype.destroy.call(this,a)},getCustomStyleSheets:function(a){return[]},render:function(a,b){a&&(this.$el.length===0?(this.setElement(a),this.$el.insertAfter("#header")):this.$el[0]!==a[0]&&(this.$el.remove(),this.setElement(a),this.$el.insertAfter("#header")),b&&this.setFixedPosition(d.getBreakingCountryOffset()))},animateNewContent:function(a,b,c,d){return this.$top.scrollTop(0),this.render(c,d)},transition:function(c,e,f,g){this.destroyModules(),d.clearTimers();var h=++this._animId;this._setupBeforeReveal(f,c,e,g);var i=null;return c!==e&&(i=this.getTransitionAnimation(c,e,f)),this.currentPath=e,i?(b.isString(i)&&(i=this._handleNamedTransition(e,i,f)),f?(i.done(b.bind(function(){this._triggerLoader(f)},this)),this._finishTransition(a.when(f,i),c,e,g,h)):this._finishTransition(i,c,e,g,h)):f?(this._triggerLoader(f),this._finishTransition(f,c,e,g,h)):(this._triggerAfterReveal(c,e,g),a.Deferred().resolve())},_triggerLoader:function(a){a.state()==="pending"&&(this.activateLoader(),a.always(b.bind(function(){this.deactivateLoader()},this)))},_finishTransition:function(a,c,e,f,g){return a.done(b.bind(function(a){if(g===this._animId){var h;this.viewReady?h=this.animateNewContent(c,e,a,f):h=this._animateNewViewContent(a,f),f&&this.setFixedPosition(d.getBreakingCountryOffset()),h?(this.undelegateEvents(),h.done(b.bind(function(){this.delegateEvents(),g===this._animId&&this._triggerAfterReveal(c,e,f)},this))):this._triggerAfterReveal(c,e,f)}},this))},_animateNewViewContent:function(a,b){if(b)this.render(a,b);else{var c=this.swapContent(this.$el,a,null,b);return this.setElement(a),c}},_handleNamedTransition:function(c,d,e){var f=a.Deferred();return d==="left"||d==="right"?(e.done(b.bind(function(a){this.slide(a,d,this.options.animations.slide.duration,this.options.animations.slide.easing).done(function(){f.resolve()})},this)),f.promise()):(a.when(e,this.hide(!0)).done(b.bind(function(a){this.render(a),this.show(!0).done(function(){f.resolve()})})),f.promise())},swapContent:function(b,c,d,e){if(this.isSafari5||this.isApple||d)return c.insertAfter(b),b.remove(),a.Deferred().resolve();var g=b.css("top")||0;return e||(g-=f.getScrollPosition(),this.$top.scrollTop(0)),c.css({"z-index":50}),b.css({position:"absolute","z-index":51,opacity:1,top:g}),c.insertAfter(b),this.animate(b,"opacity",0,this.options.animations.fadeIn.duration).always(function(){c.css({"z-index":""}),b.remove()})},activateLoader:function(){},deactivateLoader:function(){},pause:function(){this.destroyModules(!1,!0)},revealView:function(c,d,f,g){var h=++this._animId;this.currentPath=d;if(!f)return this.beforeReveal(c,d,this.$el,g),this._triggerAfterReveal(c,d,g),a.Deferred().resolve();if(f.state()==="rejected")return f;var i=null;this._setupBeforeReveal(f,c,d,g);if(f.state()==="resolved")f.done(b.bind(function(a){this.render(a,g),this.undelegateEvents(),this.hide(),i=this.animateRevealView(c,d,g),e.addAnimation(i),i.done(b.bind(function(){this.delegateEvents(),h===this._animId&&this._triggerAfterReveal(c,d,g)},this))},this));else{i=a.Deferred();var j=this.getTemporaryLoader(d);if(j){this.render(j,g),this.undelegateEvents(),this.hide();var k=this.animateRevealView(c,d,g);e.addAnimation(k),k.done(b.bind(function(){this.delegateEvents(),this._finishTransition(f,c,d,g,h),i.resolve()},this))}else f.state()==="pending"&&(this.activateLoader(),f.always(b.bind(function(){this.deactivateLoader()},this))),f.done(b.bind(function(a){if(h===this._animId){this.render(a,g),this.undelegateEvents(),this.hide();var f=this.animateRevealView(c,d,g);e.addAnimation(f),f.done(b.bind(function(){this.delegateEvents(),h===this._animId&&this._triggerAfterReveal(c,d,g),i.resolve()},this))}},this)).fail(function(){i.reject()})}return i.promise()},_triggerAfterReveal:function(a,b,c){this.viewReady=!0,this.afterReveal(a,b,c)},setFixedPosition:function(a){this.isSafari5||this.isApple?this.$el.hide():this.$el.css({position:"fixed",top:a})},clearFixedPosition:function(){this.isSafari5||this.isApple?this.$el.show():this.$el.css({position:"",top:""})},_setupBeforeReveal:function(a,c,d,e){a?a.done(b.bind(function(a){this.beforeReveal(c,d,a,e)},this)):this.beforeReveal(c,d,this.$el,e)},animateRevealView:function(b,c,d){return this.isApple&&d?a.Deferred().resolve():this.show(!0)},removeView:function(c,f){try{this._animId++,this.beforeViewRemove(this.currentPath,c),f||d.clearTimers(),this.destroyModules(!1);var g=this.animateRemoveView(c);return g=e.addAnimation(g),g.always(b.bind(function(){try{this.afterViewRemove(this.currentPath,c)}catch(a){console.error("View threw an exception on afterViewRemove event: ",a.stack||a.stacktrace||a.message)}this._safeDestroy()},this)),g}catch(h){return console.error("View threw an exception trying to removeView: ",h.stack||h.stacktrace||h.message),this._safeDestroy(),a.Deferred().resolve()}},_safeDestroy:function(){try{this.destroy(!0)}catch(a){console.error("View threw an exception on destroy: ",a.stack||a.stacktrace||a.message),this.remove()}},animateRemoveView:function(a){return this.hide(!0)},shouldFetchData:function(a){return this.currentPath!==a},prefetchData:function(a){},getTransitionAnimation:function(a,b,c){},beforeViewRemove:function(a,b){},afterViewRemove:function(a,b){},beforeReveal:function(a,b,c,d){},afterReveal:function(a,b,c){},getTemporaryLoader:function(a){}});return g}),define("views/modules/coverview",["jquery","underscore","backbone","pubsub","app","baseappview"],function(a,b,c,d,e,f){var g=f.extend({el:"#cover-view",events:{"click .prev":"prevSlide","click .page":"palmSlide","click .next":"nextSlide"},initialize:function(b){b=a.extend(!0,{animation:{slideDuration:350}},b),this.$body=e.get("body"),this.$top=e.get("scrollEl"),this.$doc=e.get("doc"),this.$window=e.get("win"),this.flipTransformStyle=this.transformCssHyphenName+" "+b.animation.slideDuration+"ms linear",f.prototype.initialize.call(this,b)},palmSlide:function(b){if(a(b.target).hasClass("load-story"))return;var c=b.screenX,d=this.$window.width()>>1;c>d?this.nextSlide(b):this.prevSlide(b)},prevSlide:function(a){var b=this.$activePage.prev(".page");if(!b.length)return;b.prev(".page").length?this.$next.show():this.$prev.hide();if(this.busy)return;this.busy=!0,a&&a.preventDefault(),this.useCSSTransforms?this.prevSlideTransform(b):this.slideTransition(b,!1)},slideTransition:function(a,c){a.addClass("active"),c?a.css("left","100%"):a.css("left","-100%"),this.animate(a,"left",0,this.options.animation.slideDuration,"linear").done(b.bind(function(){this.$activePage=a,this.busy=!1},this)),this.$activePage.css("left","0%"),this.animate(this.$activePage,"left",c?"-100%":"100%",this.options.animation.slideDuration,"linear")},prevSlideTransform:function(c){this.$activePage.removeClass("active");var e=this.$activePage.prev(".page");if(e.hasClass("first"))return;e.prev(".page").length===0?this.$prev.hide():this.$next.show();var f=this.$activePage,g=this.$activePage.clone(),h=c.clone();this.$el.append(g),this.$el.append(h),g.addClass("left"),f.addClass("right"),c.addClass("left"),h.addClass("right").hide(),g[0].style[this.transitionCssName]=this.flipTransformStyle,this.setupTransition(g,h,!0);var i=a.Deferred();this.registerAnimation(i.promise()),this.registerTransitionEndListener(g).done(b.bind(function(){this.registerTransitionEnd(h,i).done(b.bind(function(){h.remove(),g.remove(),c.removeClass("left").addClass("active"),f.removeClass("right"),this.$activePage=c},this)),g.hide(),h.show(),b.delay(b.bind(function(){h[0].style[this.transitionCssName]=this.flipTransformStyle,h[0].style[this.transformCssName]="rotateY(0deg)"},this))},this)),b.delay(b.bind(function(){g[0].style[this.transformCssName]="rotateY(90deg)"},this),20),d.trigger("heattrack","coverviewleft"),this.trackPageChange(e)},setupTransition:function(a,b,c){this.$el[0].style[this.perspectiveCssName]="2200px",b[0].style[this.transformStyleCssName]="preserve-3d",b[0].style[this.transformOriginCssName]="left center",c?b[0].style[this.transformCssName]="rotateY(-90deg)":b[0].style[this.transformCssName]="rotateY(0deg)",a[0].style[this.transformStyleCssName]="preserve-3d",a[0].style[this.transformOriginCssName]="right center",c?a[0].style[this.transformCssName]="rotateY(0deg)":a[0].style[this.transformCssName]="rotateY(90deg)"},registerTransitionEnd:function(a,c){return this.registerTransitionEndListener(a,c).done(b.bind(function(){this.clearTransition(this.$el),this.busy=!1},this))},setFixedPosition:function(a){f.prototype.setFixedPosition.call(this,0)},nextSlide:function(a){var b=this.$activePage.next(".page");if(!b.length)return;b.next(".page").length?this.$prev.show():this.$next.hide();if(this.busy)return;this.busy=!0,a&&a.preventDefault(),this.useCSSTransforms?this.nextSlideTransform(b):this.slideTransition(b,!0)},nextSlideTransform:function(c){this.$activePage.removeClass("active");var e=this.$activePage,f=this.$activePage.clone(),g=c.clone();this.$el.append(f),this.$el.append(g),e.addClass("left"),f.addClass("right"),g.addClass("left").hide(),c.addClass("right"),f[0].style[this.transitionCssName]=this.flipTransformStyle,this.setupTransition(g,f,!1);var h=a.Deferred();this.registerAnimation(h.promise()),this.registerTransitionEndListener(f).done(b.bind(function(){this.registerTransitionEnd(g,h).done(b.bind(function(){g.remove(),f.remove(),c.removeClass("right").addClass("active"),e.removeClass("left")},this)),f.hide(),g.show(),b.delay(b.bind(function(){g[0].style[this.transitionCssName]=this.flipTransformStyle,g[0].style[this.transformCssName]="rotateY(0deg)"},this)),this.$activePage=c},this)),b.delay(b.bind(function(){f[0].style[this.transformCssName]="rotateY(-90deg)"},this),20),d.trigger("heattrack","coverviewright"),this.trackPageChange(c)},keyboardShortcuts:function(a){a.which===37?this.prevSlide(a):a.which===39&&this.nextSlide()},afterReveal:function(a,c,d){b.bindAll(this,"keyboardShortcuts"),this.$prev=this.$(".prev"),this.$next=this.$(".next"),this.$activePage=this.$(".page.active"),this.$doc.on("keyup."+this.cid,this.keyboardShortcuts),this.trackPageChange(this.$activePage)},trackPageChange:function(b){var f=b.find("span.coverInfo").text()||{},g=a.parseJSON(f);e.set("pagename",g.pagename),e.set("seotitle",g.seotitle),e.set("ssts",g.ssts),e.set("aws",g.aws),e.set("url",""+c.history.fragment),e.set("contenttype",g.contenttype);var h={pagename:e.get("pagename"),seotitle:e.get("seotitle"),ssts:e.get("ssts"),aws:e.get("aws"),url:e.get("url"),contenttype:e.get("contenttype")};

d.trigger("page:load",h)},getTemporaryLoader:function(){return'<section id="cover-view" class="ui-loading dark-medium"></section>'},activateLoader:function(){},destroy:function(){this.$doc.off("."+this.cid),f.prototype.destroy.apply(this,arguments)}});return g}),define("views/pages/search",["jquery","underscore","backbone","pubsub","app","baseappview","state"],function(a,b,c,d,e,f,g){var h=f.extend({el:".search-results",events:{"click .grid":"gridView","click .list":"listView","click .cancel":"close"},initialize:function(c){c=a.extend(!0,{delay:{playlistAutoClose:250},animations:{open:{duration:250,easing:"ease-in-out"},close:{duration:250,easing:"ease-in-out"}}},c),this.win=e.get("win"),this.body=e.get("body"),this.scrollEl=e.get("scrollEl"),this.body.removeClass("show-search"),d.trigger("masthead:expand"),b.bindAll(this,"lazyload"),this.currentView="view-grid",this.init=!1,this.requestInProgress=!1,this.win.on("scroll."+this.cid,b.throttle(this.lazyload,200)),f.prototype.initialize.call(this,c)},getTemporaryLoader:function(){return'<article class="search-results ui-loading dark-medium"></article>'},animateRevealView:function(c,e){if(c==null)return a.Deferred().resolve();this.$("#search-form").css("height",""),this.$el.css({opacity:1,display:"block",top:"-100%",height:"100%"});var f=this.animate(this.$el,"top","0%",this.options.animations.open.duration,this.options.animations.open.easing);return f.done(b.bind(function(){this.$el.css("height",""),d.trigger("open:searchResults")},this)),f},setFixedPosition:function(a){d.trigger("masthead:collapse"),f.prototype.setFixedPosition.apply(this,arguments)},clearFixedPosition:function(){d.trigger("masthead:expand"),f.prototype.clearFixedPosition.apply(this,arguments)},animateRemoveView:function(a){var b=e.getScrollPosition();return this.$el.css({marginTop:-1*b,height:this.win.height()+b}),this.$(".summary").css("position","absolute"),this.scrollEl.scrollTop(0),this.animate(this.$el,"top","-100%",this.options.animations.close.duration,this.options.animations.close.easing)},afterViewRemove:function(a,b){d.trigger("close:searchResults"),d.trigger("uotrack","searchResultsclose")},beforeReveal:function(a,b,c){d.trigger("open:searchResults")},afterReveal:function(a,c){this.init||(this.init=!0,this.originalPath=a),this.moreResultsPlacer=this.$(".more-results"),this.lazyload(),this.searchWrap=this.$("#search-form"),this.searchTextInput=this.searchWrap.find(".text-input"),this.setup(),this.setupTextAd(),b.defer(this.setPage)},getMoreResults:function(a){return this.requestInProgress=!0,g.fetchHtml(a).done(b.bind(function(a){this.moreResultsPlacer.parent().append(a),this.moreResultsPlacer.remove(),this.moreResultsPlacer=this.$(".more-results")},this)).fail(b.bind(function(){this.moreResultsPlacer.remove(),this.moreResultsPlacer=null},this)).always(b.bind(function(){this.requestInProgress=!1},this)),!1},getTerm:function(){return a(".search-term .term",this.$el).attr("data-term")},setup:function(){this.results=this.$(".results"),this.summary=this.$(".summary"),this.sidebar=this.$(".sidebar"),this.viewGrid=this.$(".grid"),this.viewList=this.$(".list"),this.currentView==="view-list"&&this.listView()},setupTextAd:function(){var b=this.getTerm(),c="partner_search_text_ads"+(new Date).getTime();a(".tile.ad",this.$el).attr("id",c);var d={pubId:"partner-gannett",query:b,hl:"en"},e={container:c,lines:"3",fontFamily:"arial",fontSizeTitle:"13px",fontSizeDescription:"12px",fontSizeDomainLink:"12px",colorTitleLink:"1EA3FF",colorText:"FFFFFF",colorDomainLink:"00C641",colorBackground:"2C2C2C"};

this.loadGoogleSearchAds(d,e)},gridView:function(){return this.viewGrid.addClass("active"),this.viewList.removeClass("active"),this.summary.removeClass("list").addClass("grid"),this.results.removeClass("view-list").addClass("view-grid"),this.currentView="view-grid",a(".ad").appendTo(".sidebar"),!1},listView:function(){return this.viewList.addClass("active"),this.viewGrid.removeClass("active"),this.summary.removeClass("grid").addClass("list"),this.results.removeClass("view-grid").addClass("view-list"),this.currentView="view-list",a(".ad").prependTo(".list-content"),!1},lazyload:function(){if(!this.init||!this.moreResultsPlacer||!this.moreResultsPlacer.length||this.requestInProgress)return;var a=e.getScrollPosition(),b=this.body.height();this.moreResultsPlacer.offset().top<=a+b&&this.getMoreResults(this.moreResultsPlacer.data("href"))},close:function(){g.navigateToPreloadedUrl(this.originalPath)},setPage:function(){var a=e.getPageInfo(this.$el),b={aws:"search",contenttype:"search",pathName:"/search",searchkeywords:a.keywords,ssts:"search",templatetype:this.currentView||"view-grid",url:e.getPageUrl()};

d.trigger("page:load",b)},loadGoogleSearchAds:function(b,c){var d=!1,e=function(){if(d){document.write.delOnWrite("searchads"),document.write.delOnScript("searchads");return}if(!self.google)return!1;if(!google.ads)return!1;if(!google.ads.search)return!1;if(!google.ads.search.Ads)return!1;d=new google.ads.search.Ads(b,c),document.write.delOnWrite("searchads"),document.write.delOnScript("searchads")};

e()||(document.write.addOnWrite("searchads",e),document.write.addOnScript("searchads",e),a.getScript("",function(){e()}))},destroy:function(){document.write.delOnWrite("searchads"),document.write.delOnScript("searchads"),this.win.off("."+this.cid),f.prototype.destroy.apply(this,arguments)}});return h}),define("views/modules/sports/scores",["jquery","underscore","backbone","pubsub","state","app"],function(a,b,c,d,e,f){var g=c.View.extend({el:"#scores",events:{"click .uparrowbutton":"slideDown","click .downarrowbutton":"slideUp",change:"onChangeLeague"},scoreType:"schedule",initialize:function(c){if(this.$el.length===0)return;b.bindAll(this,"onScoresLoaded"),this.$pairings=a("#pairings"),this.$noScores=this.$pairings.find(".league.none"),this.padding=parseInt(this.$pairings.css("paddingTop"),10),this.canSlideUp=!0,this.yp=0,this.leagues={};

var d=a(".magicscroll").outerHeight(),e=a(".bottom-wrapper").outerHeight()+23,f=a(".top-wrapper").outerHeight();this.viewport=d-(e+f),this.onChangeLeague("initialize")},fetchData:function(a,c){this.$el.addClass("loading"),e.fetchHtml(a).done(c).fail(b.bind(function(){this.$noScores.show()},this)).always(b.bind(function(){this.$el.removeClass("loading")},this))},onChangeLeague:function(a){this.$(".league").hide(),this.league=this.$(".filter").val(),this.league===undefined&&(this.league=this.options.section);if(this.league===undefined){this.$noScores.show();return}this.$el.find(".all-scores-link").attr("href","/sports/"+this.league+"/scores/");if(this.leagues[this.league])this.updateDisplay(this.leagues[this.league]);else{var b="sports/"+this.league+"/scores/sidebar/";this.fetchData(b,this.onScoresLoaded)}a!="initialize"&&d.trigger("uotrack",this.scoreType+this.league)},onScoresLoaded:function(b){var c=this.leagues[this.league]=a(b);this.$pairings.append(c),this.scoreType="scores",this.updateDisplay(c)},updateDisplay:function(a){this.$games=a.find(".game"),this.index=0,this.total=this.$games.length,this.total?(a.show(),this.position()):this.$noScores.show()},showLeague:function(a){this.$(".league").hide();var b=this.$(".filter").val(),c=this.$("."+b);c.show(),this.$games=c.find(".game"),this.index=0,this.total=this.$games.length,this.position()},slideDown:function(a){return a.preventDefault(),a.stopPropagation(),this.index>0&&(this.index=this.getPrevIndex(),this.position()),!1},slideUp:function(a){return a.preventDefault(),a.stopPropagation(),this.canSlideUp&&this.index<this.total-1&&(this.index=this.getNextIndex(),this.position(!0)),!1},getPrevIndex:function(){var b,c=this.index;while(--c>-1){b=a(this.$games[c]);var d=b.position().top+this.yp;if(this.viewport+d<0)return c+2}return 0},getNextIndex:function(){var b,c=this.index+1;for(c;c<this.total-1;++c){b=a(this.$games[c]);var d=b.position().top+b.outerHeight()+this.yp;if(d>this.viewport)return c}return++this.index},position:function(b){var c=a(this.$games[this.index]);if(c.length===0)return;this.yp=-(c.position().top-this.padding),c=a(this.$games[this.total-1]);var d=c.position().top+c.outerHeight()+this.yp;this.canSlideUp=d>this.viewport,b&&!this.canSlideUp&&(this.yp=-(this.$pairings.outerHeight()-this.viewport)),this.$pairings.css({"margin-top":this.yp+"px"})},destroy:function(){this.undelegateEvents()}});return g}),define("views/modules/sports/golf",["jquery","underscore","backbone","pubsub","app","state"],function(a,b,c,d,e,f){var g=c.View.extend({el:"#section_sports",events:{"click #golf-tour ul li a":"select"},initialize:function(b){this.$content=this.$el.find("article.golf"),this.$tour=this.$el.find("#golf-tour");var c=this.$tour;this.tour=function(){for(var b=0,d;d=c.find("a")[b];b++)if(e.attributes.currentCardPath.match(a(d).attr("data-value")))return a(d).attr("data-value")}()},destroy:function(a){this.undelegateEvents(),a&&this.remove()},select:function(b){var f=this,g=a(b.currentTarget),h=e.attributes.currentCardPath,i=g.attr("data-ht"),j=g.attr("data-value"),k=h.replace(h.match(this.tour),j);return heattrack&&d.trigger("heattrack",heattrack),Modernizr.history?c.history.navigate(k,{trigger:!0}):window.location=k,!1}});return g}),define("views/pages/sports-overlay",["jquery","underscore","backbone","pubsub","app","baseappview","state"],function(a,b,c,d,e,f,g){var h=f.extend({el:"#overlay",events:{"click .film":"close","click .close-wrap":"close"},initialize:function(b){b=a.extend(!0,{delay:{playlistAutoClose:250},animations:{open:{duration:250,easing:"ease-in-out"},close:{duration:250,easing:"ease-in-out"}}},b),this.win=e.get("win"),this.body=e.get("body"),this.scrollEl=e.get("scrollEl"),this.init=!1,f.prototype.initialize.call(this,b)},afterViewRemove:function(a,b){},beforeReveal:function(a,b,c){},afterReveal:function(a,b){this.init||(this.init=!0)},close:function(){g.navigateToPreloadedUrl()}});return h}),define("views/modules/about/about-map",["jquery","underscore","backbone","app","pubsub","baseview","views/modules/loader","state","views/modules/alert"],function(a,b,c,d,e,f,g,h,i){var j=f.extend({el:"#about-maps-wrapper",events:{'click #about-maps-wrapper a[data-ht|="about"]':"setTrack"},initialize:function(a,b){var c=this.createSwitchControls(a,b);return this.data=b,this.aboutMap=this.createMap(c,b),this.pubSub={"about:newMapLocation":function(a){this.data=a,this.aboutMap.setLocationDetails(a)}},e.attach(this.pubSub,this),this.aboutMap},setTrack:function(b){if(b.type==="click"&&b.hasOwnProperty("originalEvent")){var c=a(b.currentTarget).find("a");d.setTrack(c)}},destroy:function(a){this.undelegateEvents(),e.unattach(this.pubSub,this),this.destroyMap(),this.switchControls&&this.destroySwitchControls(this.switchControls),a&&this.remove()},destroySwitchControls:function(b){var c=this;a.each(b,function(a,b){b.$element.unbind("click").parent("li").removeClass("selected")})},createSwitchControls:function(b,c){var d=this,f;return a.each(b,function(b,c){typeof c.active!="undefined"&&c.active===!0&&(c.$element.parent("li").addClass("selected"),f=c.params),c.$element.bind("click",function(b){b.preventDefault(),e.trigger("uotrack",a(b.target).attr("data-ht"));var f=a(this);f.parent("li").parent("ul").children().removeClass("selected"),f.parent("li").addClass("selected"),d.destroyMap(),a("#about-maps").removeClass().addClass("map-"+f.text().toLowerCase()),d.aboutMap=d.createMap(c.params,d.data)})}),f},destroyMap:function(b){var c=this;a("#about-maps-wrapper").empty().append(a("<div>").attr("id","about-maps")),c.aboutMap.destroy(),c.aboutMap=null,delete c.aboutMap},createMap:function(a,b){var c=new this.wMap;return c.init(a,b)},wMap:function(){var b=this;this.debug=!1,this.popups=[],this.overlays={radarLayer:{text:"Radar",type:"l2radary",maxZoom:11,maps:[],data:{interval:2,max:19},init:!0},satLayer:{text:"Satellite",type:"satconus",maxZoom:9,maps:[],data:{interval:1,max:15}}},this.options=null,this.type=null,this.location={},this.setType=function(b){var c=a(this.options.target);this.type=b,b=b==="l2radary"?"radar":b,b=b==="satconus"?"satellite":b;var d=c[0].className.replace(/(type-.[a-zA-Z0-9]*)/g,"");c.removeClass().addClass(d).addClass("type-"+b)},this.icon=L.Icon.extend({options:{iconUrl:"/static/images/modules/maps/map-sprite.png",iconSize:new L.Point(26,23),iconAnchor:new L.Point(7,22)}}),this.loader={queue:{},loaded:{},xhr:[],create:function(b){return this.$loader=new g({el:b,msg:"Loading"}),this.$target=a(b),this},addToQ:function(c){var d=0;return this.queue[c]=!0,a.each(this.queue,function(a,b){b===!0&&(d+=1)}),d===1&&(this.show(),b.player.disable(!0)),b.debug&&console.log(this.queue),this},reset:function(){return this.queue={},this},removeFromQ:function(c){var d=this,e=!1;return d.queue[c]!==undefined&&(d.queue[c]=!1,a.each(d.queue,function(a,b){b===!0&&(e=!0)}),e||(d.hide(),b.player.disable(!1)),b.debug&&console.log(d.queue)),d},hide:function(){var a=this;clearTimeout(this.loaderTimer),a.$target.removeClass("loading").addClass("loaded"),a.$loader.hide()},show:function(){var a=this;clearTimeout(this.loaderTimer),this.loaderTimer=setTimeout(function(){a.$target.removeClass("loaded").addClass("loading"),a.$loader.show()},300)}},this.destroy=function(){var b=this;a.each(b.maps,function(a,c){b.removeOverlays(c),c.removeEventListener("zoomend"),c.removeEventListener("dragend")}),b.player.$container.unbind("slidechange slide")},this.createMaps=function(b,c,d){var e=this,g=[],h,j,k=L.TileLayer.extend({initialize:function(a){a=a||{},a.minZoom=a.minzoom||0,a.maxZoom=a.maxzoom||22,L.TileLayer.prototype.initialize.call(this,a.tiles[0],a)}});return a.each(c,function(c,l){a(b).append(a("<div>").attr("id",l.id).addClass("about-map"));var m={zoomControl:!1,dragging:!1,doubleClickZoom:!1,scrollWheelZoom:!1,maxZoom:11,attributionControl:""};

typeof l.options.lat=="undefined"&&typeof l.options.lon=="undefined"?(h=d[0].local.lat,j=d[0].local.lon):(h=l.options.lat,j=l.options.lon),a.extend(m,l.options,{center:new L.LatLng(String(h),String(j))});var n=new L.Map(l.id,m),o=function(){this.removeEventListener("load",o,!1),this.addEventListener("loading",function(){e.loader.addToQ("map")}),this.addEventListener("load",function(){e.loader.removeFromQ("map")}),n.on("zoomend",function(a){e.loader.addToQ("zoom"),e.reloadOverlay(this)}),n.on("dragend",function(a){e.loader.addToQ("drag"),this.bounds.checkBounds(),e.reloadOverlay(this)}),n.hasLoaded=!0},p;l.bounds&&(p=a("<span>").addClass("no-data").text("No map data is available for this location"),a(n._container).append(p),n.bounds=new L.Bounds(new L.Point(l.bounds.top,l.bounds.left),new L.Point(l.bounds.bottom,l.bounds.right)),n.bounds.checkBounds=function(){n.bounds.contains(new L.Point(n.getCenter().lat,n.getCenter().lng))?f.prototype.animate(p,"opacity",0,400):f.prototype.animate(p,"opacity",1,400)}),n.hasLoaded=!1,n.scrollTo=l.scrollTo,n.hasZoomControls=l.zoom,a.jsonp({url:l.url+"?callback=grid",callback:"grid",success:function(a){var b=new k(a);n.addLayer(b),b.addEventListener("load",o)},error:function(){i.showError("Unable to load map"),console.warn("ERROR: unable to load mapbox tiles")}}),n.id=l.id,n.overlays={},l.data.radar&&(e.overlays.radarLayer.maps.push(n),n.overlays[e.overlays.radarLayer.type]={layers:[],urls:[],maxZoom:e.overlays.radarLayer.maxZoom}),l.data.satellite&&(e.overlays.satLayer.maps.push(n),n.overlays[e.overlays.satLayer.type]={layers:[],urls:[],maxZoom:e.overlays.satLayer.maxZoom}),g.push(n),typeof l.data.temp=="object"?e.getTempData(l.data.temp,n):n.setZoom(e.overlays.radarLayer.maxZoom)}),g},this.addOverlay=function(b,c,d){Date.now||(Date.now=function(){return(new Date).valueOf()});var e=this,f=[],g=0,h=0,i=new Date(Date.now()),j=[];e.player.wait(),d.frames=d.frames.reverse();for(h=0;h<d.frames.length;h+=b.data.interval){f.push(d.frames[h]),g+=1;if(g===b.data.max)break}a.each(f,function(a,f){if(c===e.maps[0]){e.player.labels[b.type]===undefined&&(e.player.labels[b.type]={dateTimes:[],hours:!0,shortHours:!1,dates:!0,days:!1,interval:2});var g=new Date(Date.UTC(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate(),f.substring(0,f.length/2),f.substring(f.length/2,f.length),0,0));if(a>0&&g.getTime()>j[a-1].getTime())while(g.getTime()>j[a-1].getTime())g.setDate(i.getDate()-1);j.push(g)}var h=d.url+"/"+f+"/{z}/{x}_{y}.png";c.overlays[b.type].urls.push(h)}),e.player.labels[b.type].dateTimes=j.reverse(),c.overlays[b.type].urls.reverse(),e.player.setMax(j.length-1),e.player.createLabels(b.type),e.player.setVal(e.player.getMax(),!0),c.overlays[b.type].status=2,e.loadOverlay(c)},this.reloadOverlay=function(a){this.removeOverlays(a),this.loadOverlay(a)},this.removeOverlays=function(b){a.each(b.overlays,function(c,d){a.each(d.layers,function(a,c){c.removeEventListener("load"),c.removeEventListener("loading"),(c.hasEventListeners("load")||c.hasEventListeners("loading"))&&console.warn("ERROR: event was not removed!"),c._container!==null&&b.removeLayer(c)}),d.layers=[]})},this.loadOverlay=function(b){var c=this,d=c.type,e=0,f=c.player.getVal(),g=new Date,h=g.getTime(),i=function(){c.debug&&console.info("starting "+h),c.player.wait(),this.removeEventListener("loading",i,!1),this.addEventListener("load",j)},j=function(){this.removeEventListener("load",j,!1),c.loader.removeFromQ(d).removeFromQ("zoom").removeFromQ("drag"),c.debug&&console.info("loaded first layer "+h),a.each(b.overlays[d].urls,function(a,b){a!==c.player.getVal()&&m(a,b,!1)})},k=function(){e+=1,this.removeEventListener("loading",k,!1),this.addEventListener("load",l)},l=function(){e-=1,e===0&&(c.player.loaded(),c.debug&&console.info("loaded "+h),this.removeEventListener("load",l,!1))},m=function(e,g,h){var j=new L.TileLayer(g);return j.url=g,h?(j.addEventListener("loading",i),b.overlays[d].firstLayer={elem:j,pos:f}):j.addEventListener("loading",k),b.overlays[d].layers.push(j),j._url!==undefined&&(b.addLayer(j),e!==c.player.getVal()&&a(j._container).hide(),c.opacity.setCSS(a(j._container))),j};

m(f,b.overlays[d].urls[f],!0),b.scrollTo&&b.getZoom()>b.overlays[d].maxZoom&&b.setZoom(b.overlays[d].maxZoom),b.overlays[d].status=0},this.getOverlayData=function(a,b){var c=this;h.fetchData("/services/about/overlay/"+a.type).done(function(d){c.addOverlay(a,b,d)}).fail(function(a){i.showError(h.generateRequestError(a))})},this.getTempData=function(b,c){var d=this,e=!0;d.setType("hourly"),c.popupLayer=new L.LayerGroup,d.loader.xhr.push(h.fetchData("/services/about/forecast/json/"+b.join(",")+"/").done(function(f){f[0]!==null?a.each(f,function(a,e){e!==null?c.popupLayer.addLayer(d.createTempPopup(e,c)):console.warn("WMAP ERROR: Unable to find data for "+b[a])}):console.warn("WMAP ERROR: Unable to find data for "+b.join(",")),a.each(d.loader.xhr,function(a,b){b.state()!=="resolved"&&(e=!1)});if(e){d.loader.xhr=[],d.loader.removeFromQ("temp"),d.debug&&console.log("Loaded temp"),d.loader.loaded.temp=!0;if(d.type==="hourly"||d.type==="extended")d.addTempPopups(d.popups),d.player.loaded(),d.tempClick(d.type)}}).fail(function(a){i.showError(h.generateRequestError(a))}))},this.addTempPopups=function(b){var c,d;a.each(b,function(b,c){var d=c.map,e=c.popup,f=c.$div;d.removeLayer(e),d.addLayer(e),a(e._tipContainer).remove(),a(e._wrapper).remove(),a(e._container).append(f)})},this.createTempPopup=function(b,c){var d=this,e=new L.Popup({className:" abouttile-map",closeButton:!1}),f=b.forecast.hourly[0].temperature,g=d.getTempClass(f);e._close=function(){},e.setLatLng(new L.LatLng(String(b.local.lat),String(b.local.lon))),e.options.autoPan=!1;var h=function(){a("body").unbind("click.wmap-clicked"),a.each(d.popups,function(a,b){b.$div.parent().css("opacity","1")})},i=a("<div>").addClass("abouttile abouttile-sm "+g+" city-"+b.local.cityId).append(a("<span>").addClass("city").text(b.local.city)).append(a("<span>").addClass("condition wicon wicon-"+b.forecast.hourly[0].abouticon).text(b.forecast.hourly[0].txtshort)).append(a("<span>").addClass("temp").html(f+"&deg;")).click(function(c){c.preventDefault();var e=a(this),f=e.parent(),g=function(){f.removeClass("clicked").removeClass("bottom"),h()};

f.hasClass("clicked")?g():(a.each(d.maps,function(b,c){a(c._container).find(".clicked").removeClass("clicked")}),a.each(d.popups,function(a,b){e[0]!==b.$div[0]?b.$div.parent().css("opacity","0.6"):f.css("opacity","1")}),parseInt(f.css("bottom"),10)>-70&&f.addClass("bottom"),d.debug&&console.log(b),f.addClass("clicked"),a("body").bind("click.wmap-clicked",function(b){a(b.target).closest(".clicked").length||g()}))}),j={$div:i,data:b,map:c,popup:e};

return d.popups.push(j),e},this.overlayClick=function(b){var c=this,d=function(b,c){var d=b.overlays[c.type].layers.slice(),e=[];return d.length?(d.splice(b.overlays[c.type].firstLayer.pos+1,0,d[0]),d.splice(0,1),a.each(d,function(a,b){b._container!==undefined&&e.push(b._container)}),e):!1};

c.loader.reset(),c.loader.addToQ(b.type),a(c.options.target+" .leaflet-popup-pane").addClass("hidden"),c.player.$container.unbind("slidechange slide.local"),c.player.removeLabels(),c.opacity.show(),c.opacity.setVal(1),c.setType(b.type),c.player.playSpeed=300;for(var e=1;e<c.maps.length;e+=1)a(c.maps[e]._container).hide();a.each(b.maps,function(a,d){d.scrollTo&&(d.options.maxZoom=b.maxZoom),d.overlays[b.type].status===0?(c.player.setMax(c.player.labels[b.type].dateTimes.length-1),c.player.createLabels(b.type),c.player.setVal(c.player.getMax(),!0),c.reloadOverlay(d)):(d.overlays[b.type].status=1,c.removeOverlays(d),c.getOverlayData(b,d))}),c.player.$container.bind("slide.local slidechange",function(c,e){a.each(b.maps,function(c,f){var g=d(f,b);g.length&&(a(g).hide(),a(g[e.value]).show())})})},this.tempClick=function(b){var c=this,d=function(b,d,e){var f=null,g=null,h=function(a,b,c){a.$div.children(".wicon").removeClass().addClass("condition wicon wicon-"+b).text(c)};

d==="hourly"&&b.data.forecast.hourly[e]!==undefined?(f=b.data.forecast.hourly[e].temperature+"&deg;",h(b,b.data.forecast.hourly[e].abouticon,b.data.forecast.hourly[e].txtshort)):d==="extended"&&b.data.forecast.day[e]!==undefined&&(f=b.data.forecast.day[e].daytime.hightemperature+"&deg;",g=a("<span>").addClass("low").html(" / "+b.data.forecast.day[e].daytime.lowtemperature+"&deg;"),h(b,b.data.forecast.day[e].daytime.abouticon,b.data.forecast.day[e].daytime.txtshort));var i=c.getTempClass(f),j=b.$div[0].className.replace(/\btemp.*?\b/g,"");b.$div.removeClass().addClass(j+" "+i),b.$div.children(".temp").html(f).append(g)};

c.setType(b),c.player.reset(),c.loader.reset(),c.player.$container.unbind("slide.local slidechange"),c.removeOverlays(c.maps[0]);for(var e=1;e<c.maps.length;e+=1)a(c.maps[e]._container).show();a(c.options.target+" .leaflet-popup-pane").removeClass("hidden"),b==="hourly"?(c.player.setMax(c.player.labels.hourly.dateTimes.length-1),c.player.createLabels(b)):b==="extended"&&(c.player.setMax(c.player.labels.extended.dateTimes.length-1),c.player.createLabels(b)),c.player.setVal(0,!0),c.opacity.hide(),c.player.playSpeed=750,c.loader.loaded.temp?(a(".leaflet-popup-pane").children().length===0&&c.addTempPopups(c.popups),a.each(c.popups,function(a,c){d(c,b,0)}),c.player.$container.bind("slide.local slidechange",function(e,f){a.each(c.popups,function(a,c){d(c,b,f.value)})})):(c.loader.addToQ("temp"),c.player.wait())},this.createControls=function(b,c,d){var f=this,g,h,i=a("<div>").attr("id").addClass("clearfix ui-light"),j=a("<ul>").addClass("map-control mapview-control ui-tabgroup"),k=function(c){var d=this,e=0,f={$wrapper:a("<div>").addClass("map-control opacity-control opacity-slider ui-slider ui-light"),$value:a("<span>").addClass("ui-label ui-label-right opacity-control-value"),$container:a("<div>").addClass("opacity-slider-bar ui-slider-bar").slider({min:0,max:1,step:.1,animate:!0,value:1,slide:function(a,b){f.setOpacity(a,b)},create:function(){a(this).removeClass("ui-slider")}}),disable:function(a){return f.$container.slider("option","disabled",a)},show:function(){f.$wrapper.show()},hide:function(){f.$wrapper.hide()},getVal:function(){return f.$container.slider("value")},setVal:function(a){return f.$value.text(a*100+"%"),f.$container.slider("value",a)},setCSS:function(a){var b=a.attr("class").replace(/opacity-\w+/gi,"").replace(/\s{2,}/g," ").replace(/^\s+|\s+$/g,"");a.removeClass().addClass(b+" opacity-"+f.getVal()*100)},setOpacity:function(c,d){e=d.value,setTimeout(function(){if(e===d.value){var c=[];a(b[0]._container).find(".leaflet-tile-pane > .leaflet-layer").each(function(b,d){var e=a(d);e.children().length&&e.children().eq(0).attr("src").indexOf("accuabout")!==-1&&c.push(e)}),a.each(c,function(a,b){f.setCSS(b,d.value)}),f.$value.text(d.value*100+"%")}},25)},init:function(b){return f.$wrapper.append(a("<span>").addClass("map-control-label opacity-label ui-label ui-label-left").text("Opacity")).append(f.$container).append(f.$value.text("100%")),f.$container.children("a").addClass("opacity-slider-handle ui-btn"),a(b).append(f.$wrapper.hide()),f}};

return f.init(c)},l=function(b){return a(b).hasClass("active")?!1:(f.player.stop(),j.children("li").children("a").removeClass("active"),a(b).addClass("active"),!0)},m=function(a,b,c){a.preventDefault(),l(c)&&(e.trigger("uotrack","about"+b.text.toLowerCase()),f.overlayClick(b))},n=function(a,b,c){a.preventDefault(),l(c)&&(e.trigger("uotrack","about"+b),f.tempClick(b))};

return f.hasTempControls=!1,a.each(d,function(a,b){if(typeof b.data.temp=="object")return f.hasTempControls=!0,!1}),f.hasTempControls&&(f.loader.addToQ("temp"),f.player.wait(),j.prepend(a("<li>").addClass("ui-tab-item").append(a("<a>").addClass("ui-btn").attr("href","#").text("Extended").click(function(a){n(a,"extended",this)}))),j.prepend(a("<li>").addClass("ui-tab-item").append(a("<a>").addClass("ui-btn active").attr("href","#").text("Hourly").click(function(a){n(a,"hourly",this)})))),b[0].hasZoomControls&&(g=a("<div>").addClass("map-control zoom-control").append(a("<span>").addClass("map-control-label zoom-label ui-label ui-label-left").text("Zoom")).append(a("<div>").addClass("ui-zoom").append(a("<a>").attr("href","#").addClass("ui-btn minus-icon").text("Zoom Out").click(function(a){a.preventDefault(),b[0].zoomOut()})).append(a("<a>").attr("href","#").addClass("ui-btn plus-icon").text("Zoom In").click(function(a){a.preventDefault(),b[0].zoomIn()})))),a.each(f.overlays,function(b,c){if(c.maps.length){var d=a("<a>").addClass("ui-btn").attr("href","#").text(c.text).click(function(a){m(a,c,this)});j.append(a("<li>").addClass("ui-tab-item").append(d)),c.init&&!f.hasTempControls&&(h={overlay:c,link:d})}}),f.opacity=k(i),a(c).append(i.append(j).append(g)),f.hasTempControls||(h.link.addClass("active"),f.overlayClick(h.overlay)),j},this.createSlider=function(b){var c=this,d={labels:{},playSpeed:750,isPlaying:!1,isWaiting:!1,createLabels:function(b){var c=d.getMax(),e;d.removeLabels();for(var f=0;f<=c;f+=1){var g=f/c*100,h=a("<span>").addClass("marker marker-top").css("left",g+"%"),i=a("<span>").addClass("marker marker-bottom").css("left",g+"%");e=d.getPrintLabel(d.labels[b].dateTimes[f],d.labels[b].days,d.labels[b].hours,d.labels[b].shortHours,d.labels[b].dates),e.css("left",g+"%"),f%d.labels[b].interval!==0&&(e=null),d.$container.append(e).append(h).append(i),d.setActiveLabel(d.getVal())}return d.$container},removeLabels:function(){d.$container.children(".marker").remove(),d.$container.children(".label").remove(),d.$activeLabel.empty()},getPrintLabel:function(b,c,d,e,f){var g={weekday:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],month:["January","February","March","April","May","June","July","August","September","October","November","December"],getWeekday:function(a){return this.weekday[a]},getMonth:function(a){return this.month[a]},getShortWeekday:function(a){return this.getWeekday(a).substring(0,3)},getShortMonth:function(a){return this.getMonth(a).substring(0,3)}},h=a("<div>").addClass("label"),i="",j="",k=0;c&&(k+=1,j=g.getShortWeekday(b.getDay()),h.append(a("<span>").addClass("day").text(j)));if(d){k+=1;var l=(b.getMinutes()<10?"0":"")+b.getMinutes();b.getHours()>=12?(i=b.getHours()-12===0?"12":b.getHours()-12,i=i+":"+l+" PM"):b.getHours()===0?i="12:"+l+" AM":i=b.getHours()+":"+l+" AM",h.append(a("<span>").addClass("hour").text(i))}var m="";return e&&(k+=1,b.getHours()>=12?(i=b.getHours()-12===0?"12":b.getHours()-12,i+=" PM"):b.getHours()===0?i="12 AM":i=b.getHours()+" AM",h.append(a("<span>").addClass("hour").text(i))),f&&(k+=1,m=g.getShortMonth(b.getMonth())+" "+b.getDate(),h.append(a("<span>").addClass("date").text(m))),h.addClass("label-"+k+"up"),h},$container:a("<div>").addClass("timeline-belt time").slider({min:0,max:0,step:1,animate:!1}).bind("slidestart",function(a,b){e.trigger("uotrack","aboutslide")}).bind("slide.global",function(a,b){d.setActiveLabel(b.value),d.isPlaying&&d.stop()}),$activeLabel:a("<div>").addClass("inner"),$play:a("<a>").addClass("timeline-play-btn").attr("href","#").click(function(a){a.preventDefault(),e.trigger("uotrack","aboutslideplay"),d.toggle()}).append(a("<span>").addClass("play").text("Play")),setActiveLabel:function(a){if(d.labels[c.type]!==undefined){var b=d.getPrintLabel(d.labels[c.type].dateTimes[a],d.labels[c.type].days,d.labels[c.type].hours,d.labels[c.type].shortHours,d.labels[c.type].dates);d.$activeLabel.empty().append(b)}},animate:function(a){return d.$container.slider("option","animate",a)},disable:function(a){return d.$container.slider("option","disabled",a)},moveUp:function(){d.isPlaying&&!d.isWaiting&&(d.setVal(d.getVal()+1),d.getVal()===d.getMax()?d.stop():setTimeout(function(){d.moveUp()},d.playSpeed))},wait:function(){d.stop(),d.isWaiting=!0},reset:function(){c.loader.removeFromQ("player"),d.isWaiting=!1},loaded:function(){c.loader.removeFromQ("player"),d.isWaiting=!1,d.isPlaying&&d.moveUp()},stop:function(){d.$play.empty().append(a("<span>").addClass("play").text("Play")),d.isPlaying=!1,c.loader.removeFromQ("player")},play:function(){d.$play.empty().append(a("<span>").addClass("pause").text("Pause")),d.isPlaying=!0,d.getVal()===d.getMax()&&d.setVal(0),d.isWaiting?c.loader.addToQ("player"):d.moveUp()},toggle:function(){d.isPlaying?d.stop():d.play()},getMax:function(){var a=d.$container.slider("option","max");return typeof a!="number"&&(a=0),a},setMax:function(a){return d.$container.slider("option","max",a)},getVal:function(){return d.$container.slider("value")},setVal:function(a,b){return b===undefined&&(b=!1),b&&d.animate(!1),d.$container.slider("value",a),b&&d.animate(!0),d.setActiveLabel(a),d},init:function(b){return d.$container.children("a").addClass("timeline-buckle").append(d.$activeLabel),a(b).before(a("<div>").attr("id","aboutmap-timeline").addClass("clearfix").append(d.$play).append(d.$container)),d}};

return d.init(b)},this.getTempClass=function(a){return a=Math.floor(parseInt(a,10)/10)*10,a>100&&(a=100),a<0&&(a=0),"temp"+a+"s"},this.setLocationDetails=function(b,c){var d=this;c===undefined&&(c=d.maps),b=b[0];var e=function(a){typeof d.location.marker!="undefined"&&d.location.map.removeLayer(d.location.marker);var b=new d.icon;d.location.map=a,d.location.marker=new L.Marker(new L.LatLng(d.location.latitude,d.location.longitude),{icon:b}),a.addLayer(d.location.marker)},f=function(b,c){var d;return a.each(b,function(a,b){if(b.id===c)return d=b,!1}),d},g=function(a,b,c){var e=a.getZoom();a.hasZoomControls&&(e=a.overlays[d.type].maxZoom),a.setView(new L.LatLng(b,c),e,!1),a.bounds!==undefined&&a.bounds.checkBounds()},h=function(){d.player.labels.extended={dateTimes:[],hours:!1,shortHours:!1,dates:!0,days:!0,interval:1},d.player.labels.hourly={dateTimes:[],hours:!1,shortHours:!0,dates:!1,days:!1,interval:1},a.each(b.forecast.day,function(a,b){var c=new Date(b.obsdate);d.player.labels.extended.dateTimes.push(c)}),a.each(b.forecast.hourly,function(a,b){var c=b.time.toString(),e=b.time;c.indexOf("AM")!==-1&&e===12&&(e+=12),c.indexOf("PM")!==-1&&e!==12&&(e+=12);var f=new Date,g=new Date(f.getFullYear(),f.getMonth()+1,f.getDate(),e,0,0,0);d.player.labels.hourly.dateTimes.push(g)}),d.player.setMax(d.player.labels[d.type].dateTimes.length-1),d.player.createLabels(d.type)},j=function(){d.location.data=b,d.location.latitude=b.local.lat,d.location.longitude=b.local.lon,d.location.city=b.local.city,d.location.state=b.local.adminArea;var a;if(c.length>1){var h=b.local.adminArea.Text[0].toLowerCase();h==="hawaii"?a=f(c,"hawaii"):h==="alaska"?a=f(c,"alaska"):a=f(c,"continental")}else a=c[0];e(a),a.scrollTo&&a.hasLoaded&&(g(a,b.local.lat,b.local.lon),d.reloadOverlay(a))},k=function(){d.hasTempControls&&h(),j()};

b!==null&&b.failure===undefined?d.location.data!==undefined?d.location.latitude!==b.local.lat&&d.location.longitude!==b.local.lon&&k():k():d.debug&&(i.showError("Unable to find about for "+location.name),console.warn("WMAP ERROR: Unable to find about for "+location.name))},this.createLegends=function(b){var c=a("<ul>"),d="";for(var e=0;e<=100;e+=10)d=e===0?"-"+e:e+"s",c.append(a("<li>").addClass("temp"+e+"s").text(d));a(b).append(a("<div>").addClass("key key-forecast").append(c)).append(a("<div>").addClass("key key-radar")).append(a("<div>").addClass("key key-satilite")).append(a("<div>").addClass("aboutmap-credits").append(a("<span>").addClass("credit").html('<a href="#" target="_blank" class="logo">Accuabout</a>')))},this.init=function(b,c){var d=this;if(a(b.target).children().length)throw new Error(b.target+" is already initialized.");return d.options=b,d.player=d.createSlider(b.target),d.loader.create(b.target),d.maps=d.createMaps(b.target,b.maps,c),d.createControls(d.maps,b.target,b.maps),d.createLegends(b.target),d.setLocationDetails(c,d.maps),d}}});return j}),define("fwinfo",["jquery","underscore","backbone","pubsub"],function(a,b,c,d){function o(){if(h)return;h={};

if(!document.cookie.match(/\bfwutil=([^\;]*)/))return;var a=RegExp.$1.split(f),b,c,d=a.length,e;for(b=0;b<d;b++)c=a[b].split(g),e=c.length,2==e&&(h[c[0]]=decodeURIComponent(c[1]))}function p(){var a="fwutil=",b="",c;for(c in h)h.hasOwnProperty(c)&&(a+=b+c+g+encodeURIComponent(h[c]),b=f);document.cookie=a+";path=/"}function q(a,b,c){if(a.t<=++a.n){var e=++a.j,f=a.thresholds[e];0>f&&(e=a.j+=f,f=a.thresholds[e]),a.t+=a.thresholds[e],a.isTransition=1,d.trigger(b,c,k)}}var e={},f="~",g=":",h=null,i="undefined",j=[],k=new Date,l=function(){k=new Date},n={isTransition:0,here:"none",gallery_id:"none",slide_id:"none"},r=new(c.Model.extend({initialize:function(){d.on("page:load",this.page_changed),d.on("slide:change",this.slide_changed),d.on("heattrack",l),d.on("uotrack",l)},page_changed:function(a){var b=document.location.href;if(b==m.here){console.log("ignoring duplicate page:load event in fwinfo (PLEASE FIX)");return}i=(a.aws+"").replace(/\/\/*$/,""),"card"==a.contentParentId?m={isTransition:0,n:0,j:0,t:site_config.ADS.THRESHOLDS.ASSET[0],thresholds:site_config.ADS.THRESHOLDS.ASSET}:"asset"==a.contentParentId&&q(m,"asset:needtransition",a),m.here=b},assetTransition:function(){var a=m.isTransition;return m.isTransition=0,a},slide_changed:function(a){if(a.slide_id==n.slide_id&&a.contenttype!="snapshot"){console.log("ignoring duplicate slide:change event in fwinfo (PLEASE FIX)");return}var b=document.location.href,c,d;a.gallery_id!=n.gallery_id||b!=n.here?n={isTransition:0,here:b,n:0,gallery_id:a.gallery_id,j:0,t:site_config.ADS.THRESHOLDS.SLIDE[0],thresholds:site_config.ADS.THRESHOLDS.SLIDE}:q(n,"slide:needtransition",a),n.slide_id=a.slide_id},slideTransition:function(){var a=n.isTransition;return n.isTransition=0,a},adprovider:function(){return site_config.ADS.PROVIDER},admodel:function(a){return"fw/models/"+r.adprovider().toLowerCase()+"-"+a},adconfig:function(a){var b=site_config.ADS.PROVIDER;return site_config.ADS[b][a.toUpperCase()]},analyticsconfig:function(){return site_config.ANALYTICS},setcurrentpage:function(a){e=a},getcurrentpage:function(){return e},getuseruniqueid:function(){var a=r.getsessionvalue("uniqueid");return a!=null&&a!=""?a:""},setfmUserInfo:function(a){var b,c;b=a.statuses.length>0?a.statuses.join():"",c=a.session_token!=""?a.session_token:null,r.setsessionvalue("userstatus",b),r.setsessionvalue("usersessiontoken",c)},getUserStatus:function(){return r.getsessionvalue("userstatus")},getUserSessionToken:function(){return r.getsessionvalue("usersessiontoken")},getadcst:function(){return i},getcsid:function(){return"J06575"},getrevscisegements:function(){var b="";return r._localsegs==undefined?(b=a.cookie("rsi_segs"),b==null?"":(r.segmentsrecieved(b.split("|")),r._localsegs)):r._localsegs},setrevscisegements:function(a){r._localsegs=a},segmentsrecieved:function(a){var b=new RegExp("^"+r.getcsid()+"_","i"),c=[],e,f=a.length,g;for(e=0;e<f;e++)g=a[e],c.push(g.replace(b,""));d.trigger("revsegmentsreceived",c),r.setrevscisegements(c)},setsessionvalue:function(a,b){h||o(),h[a]=b,p()},getsessionvalue:function(a){return h||o(),h[a]},getandclearsessionvalue:function(a){var b=r.getsessionvalue(a);return b?(r.setsessionvalue(a,""),b):null}}));return r}),define("views/modules/carousel",["jquery","underscore","backbone","baseview","pubsub","app","fwinfo","views/modules/gallery-thumb-scroll","views/modules/taboola"],function(a,b,c,d,e,f,g,h,i){var j=d.extend({events:{"click .fullscreen":"launchFullscreen","click .prev":"prevSlide","click .next":"nextSlide","click .gallery-photo":"nextSlide","click .contents li":"switchSlide","click .thumbs li":"switchSlide","click .replay":"nextSlide","click .autoplay":"autoplay","click .captions":"captionsToggle","click .thumbnails":"thumbsToggle","mouseenter #media-view .viewport":"thumbsToggle","mouseenter #media-view .thumbs":"checkThumbs","mouseleave #media-view .thumbs":"thumbsToggle","mouseleave #media-view .viewport":"thumbsToggle",mouseenter:"stoptimer","mouseenter .viewport, .slide-nav, .videoObject, .hero .media":"mouseover","mouseleave .viewport, .slide-nav, .videoObject, .hero .media":"mouseout","mouseenter .contents li":"thumbMouseover","mouseleave .contents li":"thumbMouseout"},initialize:function(c){c=a.extend({hoverTransition:0,lookAheadAmount:2,scrollerColor:"light"},c||{}),this.index=this.$(".slide.active").index(),this.endSlateBuilt=!1,this.cacheSelectors(),this.hasFullScreen=c.fullScreen?c.fullScreen:!1,this.linkPath=c.linkPath?c.linkPath:"",this.isRotator=this.$el.hasClass("rotator"),this.timer=null;if(typeof c.transition!="undefined"){var e=c.transition;this.interval=e.interval?e.interval:!1,b.bindAll(this,"automate","starttimer","stoptimer","showEndslate"),this.interval&&this.starttimer()}this.showThumbs=!1,this.showNav(),this.setTicker(),this.pubSub={"carousel:stoptimer":this.stoptimer,"carousel:starttimer":this.starttimer},d.prototype.initialize.call(this,c),this.subviews.hscrollbar=new h({el:this.$(".thumbs"),color:this.options.scrollerColor,padding:2})},automate:function(){var b=a(".slide.active",this.el),c=b.index(),d=this.$slides.length-1;a(".gallery").hasClass("fullscreen")?c<d-1?this.$thumbs.eq(c+1).click():(c===d-1&&this.$(".pause").click(),this.$(".next").click()):c<d?this.$thumbs.eq(c+1).click():(c===d&&this.$(".pause").click(),this.$(".next").click())},buildEndslate:function(){this.endSlateBuilt=!0;var a=window.location.href;this.$el.hasClass("hasendslate")&&this.$el.data("gallery-id")&&(a=window.location.protocol+"//"+window.location.host+"/picture-gallery/"+this.$el.data("gallery-id")+"/");var c=new i;this.$endslate.addClass("loading"),c.getRelated(b.bind(this.showEndslate,this),"photo","photo",4,a,this.$el.data("gallery-id"))},showEndslate:function(a){this.$endslate.removeClass("loading");var c=this.$(".slide-endslate-template");if(c.length===1){var d=b.template(c.html(),{data:a.list});this.$endslate.find(".related").html(d)}},cacheSelectors:function(){this.$thumbs=this.$(".contents li, .thumbs li"),this.$slides=this.$(".slide"),this.currentSlide=this.$slides.eq(this.index),this.$endslate=this.$(".endslate"),this.$captions=this.$(".photo-border .meta")},destroy:function(a){this.stoptimer(),clearTimeout(this.uxTimeout1),clearTimeout(this.uxTimeout2),d.prototype.destroy.call(this,a)},launchFullscreen:function(){return require(["views/modules/fullscreen"],b.bind(function(a){new a({carousel:this,fullScreen:!0,parent:this.$el})},this)),!1},prevSlide:function(a){return this.switchSlide(a,-1),this.subviews.hscrollbar.updateThumbsPosition(),!1},mouseover:function(b){a(this).hasClass("slide-nav")||this.$(".viewport").addClass("hover"),this.$el.addClass("hover")},mouseout:function(b){a(this).hasClass("slide-nav")||this.$(".viewport").removeClass("hover"),this.$el.removeClass("hover")},nextSlide:function(a){return this.switchSlide(a,1),this.subviews.hscrollbar.updateThumbsPosition(),!1},setTicker:function(){var a=this.$(".slide.active"),b=a.index(),c;this.$endslate?c=this.$slides.length-1:c=this.$slides.length,this.$(".ticker:first-child").html("<b>"+(b+1)+"</b> of <b>"+c+"</b>")},showNav:function(){var a=this;this.uxTimeout1=setTimeout(function(){a.$(".slide-nav").trigger("mouseover")},600),this.uxTimeout2=setTimeout(function(){a.$(".slide-nav").trigger("mouseout")},3600)},starttimer:function(){this.interval&&(this.timer=setInterval(this.automate,this.interval))},stoptimer:function(){clearInterval(this.timer)},switchSlide:function(c,d){var f=a(c.currentTarget).index(),g=a(".contents",this.el),h;d&&(h=this.index+d,f=h>0&&h<this.$slides.length?h:0);if(this.index===f)return;this.currentSlide=this.$slides.eq(f),this.loadImage(this.currentSlide,this.index>f);var i=this.$slides.eq(this.index);this.$thumbs.eq(this.index).removeClass("active"),this.$(".slide-nav.prev").show(),this.$(".slide-nav.next").show(),this.$(".ticker").show(),this.$thumbs.eq(f).addClass("active");var j=this.$slides.eq(f);return i.css({opacity:1}),this.animate(i,"opacity",0,this.options.hoverTransition,"ease-in-out").done(b.bind(function(){i.removeClass("active"),this.fadeInSlide(j).done(function(){i.css({visibility:"hidden",opacity:0})})},this)),this.hasFullScreen&&this.setTicker(),this.isRotator&&g.removeClass("position-1").removeClass("position-2").removeClass("position-3").removeClass("position-4").removeClass("position-5").removeClass("position-6").addClass("position-"+(f+1)),this.interval&&e.trigger("carousel:switchSlide"),this.index=f,j.index()===0?this.$(".slide-nav.prev").hide():j.hasClass("endslate")?(this.$(".ticker, .slide-nav.next").hide(),this.$endslate.length===1&&!this.endSlateBuilt&&this.buildEndslate()):this.$(".ticker, .slide-nav").show(),c.type=="click"&&c.hasOwnProperty("originalEvent")&&this.trackSlideChange(this.currentSlide),!1},loadImage:function(a,b){var c=this.options.lookAheadAmount;while(c>=0&&a.length>0)this._fetchImage(a.find("img")),c--,b?a=a.prev():a=a.next()},_fetchImage:function(a){if(a.length>0){var b=this._getImageDataSrcName(),c=a.attr(b);c&&(a.hide(),a.removeAttr(b),a.parent().addClass("loading"),a.attr("src",c),a.load(function(){a.parent().removeClass("loading"),a.show()}))}},_getImageDataSrcName:function(){return"data-src"},fadeInSlide:function(a){return a.css({visibility:"visible","z-index":1}),a.addClass("active"),this.animate(a,"opacity",1,this.options.hoverTransition,"ease-in-out")},trackSlideChange:function(a){var b=this.$el.attr("data-gallery-id"),c={gallery_id:b,gallery_title:this.$el.attr("data-title"),gallery_index:this.index+1,slide_id:a.find("img, div.media img").attr("data-id"),ssts:this.$el.attr("data-ssts"),cst:(this.$el.attr("data-cst")||"bugpages").replace(/\/+$/,""),contenttype:"snapshot"==b?"snapshot":"galleries",fullscreen:this._isFullScreen(),pathName:this.linkPath};

e.trigger("slide:change",c)},_isFullScreen:function(){return!1},thumbMouseover:function(c){this.options.hoverTransition&&(this.hoverTimeout=setTimeout(b.bind(function(){this.hoverTimeout=null,a(c.target).closest("li").click()},this),this.options.hoverTransition));if(this.isRotator){var d=a(c.currentTarget),e=a(".active-indicator",this.el);a("li:eq("+d.index()+")",e).addClass("hover")}},thumbMouseout:function(b){this.options.hoverTransition&&this.hoverTimeout&&clearTimeout(this.hoverTimeout);if(this.isRotator){var c=a(b.currentTarget),d=a(".active-indicator",this.el);a("li:eq("+c.index()+")",d).removeClass("hover")}},autoplay:function(a){var c=this.$(".playbtn");if(c.hasClass("pause"))c.removeClass("pause").html("Autoplay"),this.autostop();else{var d=b.bind(this.automate,this);this.timer=setInterval(d,3e3),c.addClass("pause").html("Pause")}return!1},autostop:function(a){return this.timer&&clearInterval(this.timer),!1},captionsToggle:function(a){var b=this.$(".meta"),c=this.$(".captionLabel"),d=this.$(".thumbs");return b.hasClass("on")?(b.removeClass("on"),c.html("Show Captions"),d.hasClass("on")&&b.removeClass("thumbsoff")):(b.addClass("on"),c.html("Hide Captions"),d.hasClass("on")?b.removeClass("thumbsoff"):b.addClass("thumbsoff")),!1},checkThumbs:function(a){var b=this.$(".thumbs");b.addClass("on")},thumbsToggle:function(a){var b=this.$(".meta"),c=this.$(".thumbs"),d=this.$(".thumbLabel");return c.hasClass("on")||a.type==="mouseleave"?(c.removeClass("on"),d.html("Show Thumbnails"),this.showThumbs=!1,this.onThumbnailToggle(!1),b.hasClass("on")&&b.addClass("thumbsoff")):(c.addClass("on"),d.html("Hide Thumbnails"),this.showThumbs=!0,this.onThumbnailToggle(!0),b.hasClass("on")&&b.removeClass("thumbsoff")),!1},onThumbnailToggle:function(a){}});return j}),define("views/modules/gallery-carousel",["jquery","underscore","backbone","pubsub","baseview","app","views/modules/carousel","views/modules/loader","state"],function(a,b,c,d,e,f,g,h,i){var j=e.extend({empty:!0,events:{"click #CList-galleries li":"select"},initialize:function(a){this.$galleries=this.$(".front-gallery"),this.$navItems=this.$(".galleries li"),b.bindAll(this,"switchGallery"),this.loader=new h({el:this.$galleries.parent()}),e.prototype.initialize.call(this,{});var c=this;if(this.$galleries.find(".slide.active").length){var d=this.$(".front-gallery.selected"),f=d.index();this.subviews["gallery"+f]=new g({ads:!0,el:d.find(".mod.galleries"),fullScreen:!0}),this.empty=!1}else{var i=this.$navItems.first().find("a").attr("href");typeof i!="undefined"&&i.length>1&&this.fetchData(i,0,this.switchGallery)}},destroy:function(a){this.loader.destroy(a),e.prototype.destroy.call(this,a)},fetchData:function(a,b,c){var d=this,e=!0,f=this.$(".front-gallery.selected");f.length&&(f.css({opacity:1}),this.animate(f,"opacity",0,200).done(function(){e&&d.loading(!0)})),i.fetchHtml(a,{data:{type:"front"}}).done(function(d){c(d,b,a)}).always(function(){e=!1,d.loading(!1)})},loading:function(a){a?this.loader.show():this.loader.hide()},select:function(b){var c=a(b.currentTarget),d=c.index(),e=this.$galleries.eq(d),g=c.find("a"),h=g.attr("href");return f.setTrack(g),e.find(".galleries").length>0?this.switchGallery(null,d,h):this.fetchData(h,d,this.switchGallery),this.$navItems.removeClass("selected"),c.addClass("selected"),!1},switchGallery:function(a,b,c){var d=this.$navItems.eq(b),e=this.$galleries.eq(b);this.$galleries.removeClass("selected"),e.addClass("selected"),a&&e.html(a);if(!this.subviews["gallery"+b]){var f=this;setTimeout(function(){var a=f.subviews["gallery"+b]=new g({ads:!0,el:e.find(".mod.galleries"),fullScreen:!0,linkPath:c});f.empty||f.trackGalleryChange(a),f.empty=!1},100)}else this.trackGalleryChange(this.subviews["gallery"+b]);e.css({opacity:0}),this.animate(e,"opacity",1,200)},trackGalleryChange:function(a){var b=a.$el.find(".slide").filter(":first");a.trackSlideChange(b)}});return j}),define("views/pages/base-page",["jquery","underscore","backbone","app","pubsub","baseview","views/modules/live-feed-view","views/modules/footer","views/modules/hero","views/modules/video","views/modules/carousel","views/modules/gallery-carousel","views/modules/tooltip","views/modules/headline","advertisement"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p=f.extend({el:"body",initialize:function(a,c,d){this.setElement(d),a.substr(-1)=="/"&&(a=a.substr(0,a.length-1)),this.path=a,this.sectionPath=c,this.pubSub={"open:overlay":this.destroy},b.bindAll(this,"setPage"),this.expandedviews={},this.liveFeedColor="light",f.prototype.initialize.call(this,{})},render:function(){var b=this.sectionPath,c=this;this.subviews.hero=new i({el:this.$(".hero:first")}),a(this.subviews.hero.el).hasClass("carousel")&&(this.subviews.heroCarousel=new k({el:this.subviews.hero.el,hoverTransition:200,transition:{interval:4e3}})),this.subviews.video=[],this.$(".video").each(function(){var b=new j({el:a(this).parent().get(0)});c.subviews.video.push(b)}),this.subviews.galleryList=new l({el:this.$(".front-galleries")}),this.subviews.tooltip=new m({el:this.$(".add-tooltip"),offset:{x:-3,y:3}}),this.subviews.headline=new n({el:this.$(".mod.headlines"),section:b}),

this.subviews.footer=new h;
try
{
	var e=this.setPage()||{},
	f="usat/"+e.ssts;e.templatename=="fronts/default"&&b!="home"&&(f+="/front");
	var g=this.$el.closest(".card-wrap"),
	p=g.add(".partner.slider");
	this.subviews.ads=new o({autoCreateSlot:!0,aws:e.aws,el:p,masterPageType:"card",title:e.seotitletag,refresh:!0,sectionPath:b,sliderFunctionality:!0,sitePage:f,url:d.getPageUrl(),series:null,topic:null})}catch(q){console.error("setPage or advertisement threw exception:",q.stack||q.stacktrace||q.message)}},renderExpanded:function(){this.$(".mod.live-feed").length&&(this.expandedviews.livefeed=new g({el:this.$(".mod.live-feed"),section:this.path,color:this.liveFeedColor}),this.expandedviews.livefeed.render())},destroy:function(a){this.destroyExpanded(a),f.prototype.destroy.apply(this,arguments)},destroyExpanded:function(a){this._destroyCollection(this.expandedviews,a),this.expandedviews={}},setPage:function(){var a=d.getPageInfo(this.$el),c={asset_collection:a.asset_collection,aws:a.aws,contentParentId:"card",contenttype:a.contenttype,sectionPath:this.sectionPath,ssts:this.path.replace(/\/\/*$/,""),subviews:this.subviews,templatetype:this.$el.attr("data-template"),url:d.getPageUrl(),videoincluded:a.videoincluded};

return b.defer(b.bind(function(){e.trigger("page:load",c)},this)),a.seotitletag!="None"?document.title=a.seotitletag:document.title="www.global.com",a}});return p}),define("views/pages/home",["jquery","underscore","backbone","pubsub","app","views/pages/base-page","views/modules/ajax-widget","views/modules/snapshots","views/modules/markets","views/modules/set-homepage","state"],function(a,b,c,d,e,f,g,h,i,j,k){var l=f.extend({el:"body",initialize:function(a,b){f.prototype.initialize.apply(this,arguments)},render:function(){this.subviews.snapshots=new h,f.prototype.render.apply(this,arguments),a(".load-markets").length&&(this.subviews.markets=new i),this.subviews.set_homepage=new j}});return l}),define("views/pages/generic-section",["jquery","underscore","backbone","app","pubsub","views/pages/base-page","views/modules/twitter","views/modules/featured-content","views/modules/blogs","views/modules/form","views/modules/markets-autocomplete","views/modules/ajax-widget"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=f.extend({el:"body",events:{"submit #money-tools-form":"onMoneyToolsFormSubmit"},initialize:function(a,b,c){f.prototype.initialize.apply(this,arguments),this.renderGeneric(a,b,c)},renderGeneric:function(c,d,e){this.subviews.twitter=new g({el:e,num_tweets:4,columns:2}),a(".mod.lottery").length&&require(["views/modules/lottery"],b.bind(function(a){this.subviews.lottery=new a},this)),a(".mod.dcdeals").length&&require(["views/modules/dcdeals"],b.bind(function(a){this.subviews.dcdeals=new a},this)),a(".mod.shermansdeals").length&&require(["views/modules/shermansdeals"],b.bind(function(a){this.subviews.shermans=new a},this)),a(".idc-market-tools").length&&(this.moneyToolsForm=new j({el:this.$el.find("#money-tools-form")}),this.subviews.markets_autocomplete||(this.subviews.markets_autocomplete=new k({el:this.$(".idc-market-tools .query"),url:"/services/markets/autocomplete/json/",max_results:4})),this.subviews.markets=new l({el:".load-markets",url:"/services/markets/interior-widget/",refresh:6e4,contents:"#default-market-quotes"})),this.subviews.featured=new h({el:e,transition:{interval:15e3}}),this.subviews.blogs=new i({el:e.find(".mod.blogs")})},onMoneyToolsFormSubmit:function(b){b.preventDefault(),this.subviews.markets_autocomplete.clearResults();var d=a(b.currentTarget).find(".query"),e=d.val();e=e.split(" - ")[0],d.val(e),d.attr("data-symbol",e);var f="/money/tools/"+d.attr("data-symbol")+"/";Modernizr.history?c.history.navigate(f,{trigger:!0}):window.location=f}});return m}),define("views/pages/sitemap",["jquery","underscore","backbone","pubsub","app","views/pages/base-page","views/modules/ajax-widget","baseappview"],function(a,b,c,d,e,f,g,h){var i=h.extend({el:".sitemap",initialize:function(a){h.prototype.initialize.call(this,a)}});return i}),define("views/pages/sports",["jquery","underscore","backbone","app","pubsub","views/pages/base-page","views/modules/sports/nav-header","views/modules/sports/back-to-top","views/modules/sports/scores","views/modules/sports/leagues","views/modules/sports/filterSeason","views/modules/sports/team-chooser","views/modules/sports/golf","views/modules/twitter","views/modules/blogs","views/modules/featured-content","chosen"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=f.extend({el:"#section_sports",initialize:function(a,b,c){f.prototype.initialize.apply(this,arguments)},render:function(){this.renderSports(),f.prototype.render.apply(this,arguments)},renderSports:function(){this.subviews.navheader=new g,this.subviews.backtotop=new h,this.subviews.scores=new i({section:this.$el.attr("data-subsection-id")}),this.subviews.leagues=new j,this.subviews.filterSeason=new k,this.$(".sp-team-picker-btn").length&&(this.subviews.teamChooser=new l),this.subviews.golf=new m,this.divSportsSelect=this.$el.find("#page_type fieldset select, #scores select"),this.divSportsSelect.chosen({disable_search_threshold:30}),require(["libs/jquery/plugins/jquery.dataTables"],b.bind(function(){this.$(".sort").dataTable({bFilter:!1,bDestroy:!0,bPaginate:!1,bInfo:!1,aaSorting:[]})}),this),this.subviews.featured=new p({el:this.el,transition:{interval:15e3}}),this.subviews.twitter=new n({el:'section[data-section-id="sports"]',num_tweets:4,default_account:"#",columns:2}),this.subviews.blogs=new o({el:this.$el.find(".mod.blogs")})},destroy:function(){this.undelegateEvents(),f.prototype.destroy.apply(this,arguments)}});return q}),define("views/pages/about",["jquery","underscore","backbone","app","pubsub","baseview","state","views/modules/alert","views/modules/about/about-map","views/modules/about/national-settings","views/modules/about/local-settings","views/modules/about/forecast-sidebar","views/modules/footer","views/modules/carousel","views/modules/gallery-carousel","views/modules/tooltip","views/modules/twitter","views/modules/blogs","cookie"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){var s=f.extend({el:"#section_about",initialize:function(a,c,e){this.win=d.get("win"),this.body=d.get("body"),this.setElement(e),this.sizeBar=this.$(".size-bar"),this.isOpen=!1,this.buttonFadeIn=200,this.buttonFadeOut=200,this.viewAnimateIn=250,this.viewAnimateOut=250,this.updateDelay=30,this.subviews={},this.path=a,this.sectionPath=c,this.pubSub={"open:overlay":this.destroy,"about:newLocation":function(a){this.updateForecastSidebar(a)}},b.bindAll(this,"setPage","onClickFullForecast"),f.prototype.initialize.call(this,{}),this.body.find(".about .dropdown .full-forecast a").on("click",this.onClickFullForecast)},destroy:function(a){},render:function(){var a=this;this.subviews.gallery=new n({ads:!0,el:this.$(".mod.galleries"),fullScreen:!0}),this.subviews.galleryList=new o({el:this.$(".front-galleries")}),this.subviews.tooltip=new p({el:this.$(".add-tooltip"),offset:{x:-3,y:3}}),this.subviews.twitter=new q({el:this.$(".size-bar .mod.twitter"),num_tweets:10,columns:1,sidebar:!0}),this.subviews.blogs=new r({el:this.$(".mod.blogs")}),

this.subviews.footer=new m,
require(["leafletabout","jqueryjsonp","libs/jquery/plugins/jquery-ui-1.8.21.custom.min"],function(){a.setup()}),b.defer(this.setPage)},setup:function(){var a=this;a.hadError=!1,a.getLocationData()},getLocationData:function(b){var c=this;b=b||a.cookie("aboutLocation"),g.fetchData("/services/about/forecast/json/"+b.replace(/,/g,"")+"/").done(function(a){a[0]!==undefined&&a[0]!==null?(c.subviews.aboutMaps?c.updateWeatherMap(a):c.setupWeatherMap(a),c.subviews.forecast?c.updateForecastSidebar(a):c.setupForecastSidebar(a)):c.hadError?console.warn("ERROR: Experienced issue with data service"):(console.warn("ERROR: Unable to find data for "+b.name),c.hadError=!0,c.getLocationData("22102"))}).fail(function(a){h.showError(g.generateRequestError(a))})},setupWeatherMap:function(b){this.subviews.aboutMaps=new i([{$element:a(".wmap-local"),params:k,active:!0},{$element:a(".wmap-national"),params:j}],b)},updateWeatherMap:function(a){this.subviews.aboutMaps.aboutMap.setLocationDetails(a)},setupForecastSidebar:function(a){this.subviews.forecast=new l(a)},updateForecastSidebar:function(a){this.subviews.forecast.parseLocation(a)},onClickFullForecast:function(){var a=this.body.find("#current-location-form").find("input.location-autocomplete").val(),b=this.body.find("#about-dropdown-form").find("input.query").val();a!==b&&this.getLocationData(b)},setPage:function(){var a=d.getPageInfo(this.$el),b={aws:a.aws,contentParentId:"card",contenttype:"section",sectionPath:this.sectionPath,ssts:this.path.replace(/\/\/*$/,""),subviews:this.subviews,templatetype:this.$el.attr("data-template"),url:d.getPageUrl()};

e.trigger("page:load",b)}});return s}),define("views/modules/cards2",["jquery","underscore","backbone","pubsub","app","baseappview","views/pages/home","views/pages/generic-section","views/pages/about","views/pages/sports","views/modules/alert","state","libs/onlineopinion/oo_engine"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=f.extend({el:"#cards",events:{"click .open-sidebar":"openSidebar","click .close-sidebar":"closeSidebar","click .feedback":"openFeedback"},cards:["home","country","sports","train","money","tech","teac","case","about"],initialize:function(c){c=a.extend(!0,{animations:{horizontal:{duration:350,easing:"cubic-bezier(0.645, 0.045, 0.355, 1.000)"},vertical:{duration:400,easing:"cubic-bezier(0.645, 0.045, 0.355, 1.000)"},fadeIn:{duration:200},sidebar:{button:{fadeIn:200,fadeOut:200},slide:250}},UPDATE_FREQUENCY:9e5,keyboard:!1,peekWidth:40,minCardWrapWidth:904,template:''},c),b.bindAll(this),this.$top=e.get("scrollEl"),this.$doc=e.get("doc"),this.$body=e.get("body"),this.$window=e.get("win"),this.$fixedHeader=e.get("headerEl").children(".fixed-wrap"),this.template=b.template(c.template),this.containerOffset=0,this.pubSub={"pushdown:cards":b.bind(this.adjustTopMargin,this,"615px"),"pullup:cards":b.bind(this.adjustTopMargin,this,"0"),"sidebar:button:hide":this.hideSidebarOpenButton,"sidebar:button:show":this.delayShowSidebarOpenButton,"sidebar:hide":this.closeSidebar,"sidebar:show":this.openSidebar};

var d=b.throttle(this.handleResizeWindow,50);this.$window.on("resize."+this.cid,d),this.options.keyboard&&this.$doc.on("keydown."+this.cid,this.keyNavigation),this.topAdjusted=!1,this.domInitialized=!1,f.prototype.initialize.call(this,c),this.calculateCardDimensions(),this.cardWidth===840?this.isNarrowScreen=!0:this.isNarrowScreen=!1,this.isSidebarOpen=!this.isNarrowScreen},openFeedback:function(){(new m.Ocode({})).show()},destroy:function(a){this.$window.off("."+this.cid),this.$doc.off("."+this.cid),f.prototype.destroy.call(this,a)},getCustomStyleSheets:function(a){if(a.indexOf("sports")===0)return["sports","sports-logos"];if(a.indexOf("about")===0)return["about"]},destroyModules:function(){this.topAdjusted&&this.adjustTopMargin(0),f.prototype.destroyModules.apply(this,arguments)},getTransitionAnimation:function(a,b,c){var d=this._getSectionPath(b);this.updateNavigation(d);var e=this.goTo(d);if(!e&&this.currentPath!==b){var f=this.createAndInitializeEmptyCard(d);f=f.children(".card"),e=this.swapContent(this.$currentCard,f)}return e},animateRevealView:function(a,b){var c=this._getSectionPath(b);return this.updateNavigation(c),f.prototype.animateRevealView.apply(this,arguments)},beforeReveal:function(a,b,c,d){var f=this._getSectionPath(b);if(d){var g=c.find("section#section_"+f);e.setCollection(g)}e.set("currentCardPath",b)},afterReveal:function(a,b,c){if(!this.domInitialized){var e=this._getSectionPath(b);this.updateNavigation(e),this.initializeDom()}else this.$currentCard=this.$cards.filter("[data-order=0]").children(".card");this.addSidebar(),c||(this.subviews.view=this._getViewMethod(b),this.subviews.view.render(),!this.isNarrowScreen&&this.subviews.view.renderExpanded&&this.subviews.view.renderExpanded()),d.trigger("cards:loaded"),this.resetSidebar()},beforeViewRemove:function(b,c){a("#nav > ul .text").removeClass("active")},animateNewContent:function(a,b,c,d){var e=this.$cards.eq(this.currentIndex);if(e.children(".ad_container1").length===0){var f=c.find(".ad_container1");e.prepend(f)}return e.css({height:"",overflow:""}),c=c.find("section.card-wrap").children(".card"),this.swapContent(e.children(".card"),c)},getTemporaryLoader:function(b){var c=this._getSectionPath(b);this.updateNavigation(c);var d=a(this.template({section:c}));return d=a('').append(d),d=a('').append(d),d},activateLoader:function(){},initializeDom:function(){this.$container=this.$(""),this.$currentCard=this.$container.find(".card"),this.$prevBtn=this.$("#prevSection"),this.$nextBtn=this.$("#nextSection"),this.currentId=this.$currentCard.attr("data-section-id")||"home",this.currentIndex=a.inArray(this.currentId,this.cards),this.createCards(),this.domInitialized=!0},handleResizeWindow:function(){this.domInitialized&&this.calculateCardDimensions()&&(this.$cards.each(b.bind(function(b,c){var d=a(c);this._positionCard(d,d.attr("data-order"))},this)),this.resetSidebar())},calculateCardDimensions:function(){var a=this.$window.width();return this.windowWidth===a?!1:(a<980&&(a=980),this.windowWidth=a,(window.matchMedia||Modernizr.mq("only all"))&&!this.$top.hasClass("lt-ie9")?Modernizr.mq("only screen and (min-width: 1440px)")?this.cardWidth=1200:Modernizr.mq("only screen and (min-width: 1240px)")?this.cardWidth=1080:this.cardWidth=840:a>=1440?this.cardWidth=1200:a>=1240?this.cardWidth=1080:this.cardWidth=840,this.cardWrapWidth=this.cardWidth+((a-2*this.options.peekWidth-this.cardWidth)/2+.5)>>0,this.cardWrapWidth<this.options.minCardWrapWidth&&(this.cardWrapWidth=this.options.minCardWrapWidth),this.leftMargin=(a-this.cardWidth-2*this.options.peekWidth)/2+this.options.peekWidth+.5>>0,!0)},createCards:function(){var b=this.cards.length,c=b/2>>0;this.$cards=a([]);for(var d=0,e=this.cards.length;d<e;d++){var f;d===this.currentIndex?(f=this.$currentCard.parent(),f.css({margin:0}),f.attr("data-order",0),this.$cards.push(f[0])):(f=this.createAndInitializeEmptyCard(this.cards[d]),f.css({margin:0}),this.$cards.push(f[0]),this.$container.append(f));var g=d-this.currentIndex;Math.abs(g)>c&&(g>0?g-=b:g+=b),f.attr("data-order",g),this._positionCard(f,g),g===-1?(f.hide().fadeIn(500),this.updateNavLinks(this.$prevBtn,this.cards[d])):g===1&&(f.show().fadeIn(500),this.updateNavLinks(this.$nextBtn,this.cards[d]))}},compareTime:function(a,b){var c=(new Date).getTime(),d=parseInt(a,10)*1e3;return c-d>b},promptPageReload:function(b,c){k.showPrompt("Hello. There is new content available. Would you like to load it? ",a.proxy(function(){k.hidePrompt(),this.destroyModules(),this.render(b,c),this.afterReveal(null,b)},this),a.proxy(function(){k.hidePrompt()},this))},updateNavigation:function(b){var c=a("nav.quick ul li"),d=a("#nav > ul .text");b===""&&(b="home"),c.removeClass("active"),c.filter("."+b).addClass("active"),d.removeClass("active"),d.filter("."+b).addClass("active")},_getViewMethod:function(a){var b=this._getSectionPath(a);switch(b){case"":case"home":return new g("home","home",this.$currentCard);case"about":return new i(a,b,this.$currentCard);case"sports":return new j(a,b,this.$currentCard);default:return new h(a,b,this.$currentCard)}},updateNavLinks:function(a,b){b=b==="home"?"/":"/"+b+"/",a.attr("href",b)},reorder:function(){var a=this.$cards.length,b=a/2>>0;for(var c=0;c<a;c++){var d=this.$cards.eq(c),e=c-this.currentIndex;Math.abs(e)>b&&(e>0?e-=a:e+=a),d.attr("data-order",e),c===this.currentIndex?d.css({position:"relative",margin:0}):(d.css({position:"absolute",bottom:0,margin:0}),e===-1?this.updateNavLinks(this.$prevBtn,this.cards[c]):e===1?this.updateNavLinks(this.$nextBtn,this.cards[c]):d.hide())}},keyNavigation:function(a){switch(a.keyCode){case 37:this.previous();break;case 39:this.next();break;default:}},inBounds:function(a,b){return!isNaN(parseFloat(a,10))&&isFinite(a)&&a>=0&&a<=b-1},goTo:function(c){var d=a.inArray(c,this.cards);if(!this.inBounds(d,this.cards.length))return;if(d===this.currentIndex)return;var f=e.getScrollPosition();if(this.isApple&&f>0){var g=a.Deferred();return this.$top.animate({scrollTop:0},200).promise().done(b.bind(function(){this._animateCards(d,f).done(function(){g.resolve()})},this)),g.promise()}return this._animateCards(d,f)},_animateCards:function(b,c){var d=this.$window.height(),e=this.prepareOffscreenCardsForAnimation(b);this.$currentCard.parent().css({height:d,overflow:"hidden","min-height":500,"-webkit-backface-visibility":"hidden"}),this.isApple?this.$fixedHeader.css({position:"absolute"}):c>0&&(this.$top.scrollTop(0),this.$currentCard.css({top:-1*c})),this.$cards.eq(b).css({height:d,overflow:"hidden","min-height":500});var f=this.currentIndex;this.currentIndex=b;var g=this.options.animations.horizontal.duration,h=this.options.animations.horizontal.easing;this.containerOffset-=e*this.cardWrapWidth;var i=this.animate(this.$container,"left",this.containerOffset+"px",g,h);return i.done(a.proxy(function(){this.isApple&&this.$fixedHeader.css({position:""});var a=this.createAndInitializeEmptyCard(this.cards[f]);a=a.children(".card");var c=this.$cards.eq(f);c.css({"-webkit-backface-visibility":"",height:""});var d=c.children(".card");Math.abs(f-b)>1?this.swapContent(d,a,!0):this.swapContent(d,a),this.reorder()},this)),i},createAndInitializeEmptyCard:function(b){var c=a(this.template({section:b}));return c.css({margin:0,position:"absolute",bottom:0}),c},prepareOffscreenCardsForAnimation:function(a){var b=this.$cards.eq(a).show(),c=parseInt(b.attr("data-order"),10),d,e;if(c>0){d=this._getNextCard(c).show();if(c>3){this._positionCard(d,4),this._positionCard(b,3);var e=this._getPreviousCard(c).show();this._positionCard(e,2);var f=c-1;do e=this._getPreviousCard(f).hide(),f--;while(f>2);c=3}else this._positionCard(d,c+1),c>1&&(e=this._getPreviousCard(c).show(),this._positionCard(e,c-1))}else{e=this._getPreviousCard(c).show();if(c<-3){this._positionCard(e,-4),this._positionCard(b,-3),d=this._getNextCard(c).show(),this._positionCard(d,-2);var f=c+1;do d=this._getNextCard(f).hide(),f++;while(f<-2);c=-3}else this._positionCard(e,c-1),c<-1&&(d=this._getNextCard(c).show(),this._positionCard(d,c+1))}return this._positionCard(b,c),c},_getNextCard:function(a){var b=this.$cards.filter("[data-order="+(a+1)+"]");return b.length||(b=this.$cards.filter("[data-order="+a*-1+"]")),b},_getPreviousCard:function(a){var b=this.$cards.filter("[data-order="+(a-1)+"]");return b.length||(b=this.$cards.filter("[data-order="+a*-1+"]")),b},_positionCard:function(a,b){a.css({left:this.leftMargin-this.containerOffset+b*this.cardWrapWidth})},adjustTopMargin:function(a,b){b=b||this.options.animations.vertical.duration,a?this.topAdjusted=!0:this.topAdjusted=!1,this.animate(this.$currentCard,"margin-top",a,b).done(function(){d.trigger("complete:adjsttopmargin:cards")})},_getSectionPath:function(a){if(a){var b=a.indexOf("/");return b===-1?a:a.substring(0,b)}return"home"},addSidebar:function(){this.sidebar=this.$currentCard.find(".size-bar"),this.sidebarOpenButton=this.$currentCard.find(".open-sidebar"),this.sidebarCloseButton=this.$currentCard.find(".close-sidebar")},openSidebar:function(a,b){a&&(a.preventDefault(),a.stopPropagation()),this.subviews.view.renderExpanded&&this.subviews.view.renderExpanded(),this.isSidebarOpen=!0,this._slideSidebar(this.sidebarOpenButton,!0,b)},closeSidebar:function(a,c){a&&(a.preventDefault(),a.stopPropagation()),this.isSidebarOpen=!1;var d=this._slideSidebar(this.sidebarCloseButton,!1,c);this.subviews.view.destroyExpanded&&d.done(b.bind(function(){this.subviews.view.destroyExpanded(!0)},this))},_slideSidebar:function(b,c,d){var e=this.options.animations.sidebar.slide,f=this.options.animations.sidebar.button.fadeOut;d&&(e=0,f=0);var g=b.fadeOut(f,"easeInOutCubic").promise();this.registerAnimation(g);var h=parseInt(this.sidebar.css("width"),10),i=null;if(this.isNarrowScreen&&!d)i=this.animate(this.sidebar,"right",-h+"px",e,"ease-in-out");else{var j=c?this.cardWidth:840;this.sidebar.removeClass("top"),i=this.animate(this.$currentCard,"width",j,e,"ease-in-out")}var k=a.Deferred();return i.done(a.proxy(function(){var a=this.animate(this.sidebar,"right",0,e,"ease-in-out");c?this.isNarrowScreen?(this.sidebar.addClass("top"),a.done(this.showSidebarCloseButton)):(this.sidebar.removeClass("top"),this.$currentCard.css("width","")):(a.done(this.showSidebarOpenButton),this.sidebar.removeClass("top")),a.done(function(){k.resolve()})},this)),k.promise()},resetSidebar:function(){var a=this.cardWidth===840;a!==this.isNarrowScreen&&(this.isNarrowScreen=a,this.isNarrowScreen?this.closeSidebar(null,!0):this.openSidebar(null,!0))},showSidebarOpenButton:function(a){if(this.adVisible&&!a)return!1;this.sidebarOpenButton.css({visibility:"visible",display:"none"}),this.sidebarOpenButton.fadeIn(this.options.animations.sidebar.button.fadeIn,"easeInOutCubic"),a&&(this.adVisible=!1)},showSidebarCloseButton:function(){this.sidebarCloseButton.fadeIn(this.options.animations.sidebar.button.fadeIn,"easeInOutCubic")},delayShowSidebarOpenButton:function(a){b.delay(b.bind(function(){this.isNarrowScreen&&this.showSidebarOpenButton(a)},this),1e3)},hideSidebarOpenButton:function(a){a&&(this.adVisible=!0),this.sidebarOpenButton.fadeOut(this.options.animations.sidebar.button.fadeOut,"easeInOutCubic")}});return n}),define("views/pages/404",["jquery","underscore","backbone","baseappview","state","pubsub","views/modules/footer","views/modules/cards2"],
function(a,b,c,d,e,f,g,h){var i=d.extend({el:"#overlay",events:{"click .close":"close"},initialize:
function(a)
{
	d.prototype.initialize.call(this,a),this.options.ajax?(this.render(this.options.htmlFrag),
	e.registerFullScreenView(this),this.afterReveal()):e.preloadView(h,null,""),

this.$("#footer").removeClass("size-9")
.find("nav").show()
},

afterReveal:function(a,b,c)
{
	this.subviews.footer=new g
},
close:function()
{
	return this.options.ajax?(e.clearFullScreenView(this),this.destroy(!0)):e.navigateToPreloadedUrl(),!1}});return i}),define("simpleoverlay",["jquery","underscore","backbone","baseappview","state","app","views/modules/cards2","pubsub"],
	function(a,b,c,d,e,f,g,h)
	{
		var i=d.extend({el:"#overlay",originalEvents:{"click .transition-wrap":"close","click .close-overlay":"close"},additionalEvents:{},events:function(){return b.extend({},this.originalEvents,this.additionalEvents)},initialize:function(a){this.header=f.get("headerEl").children(".fixed-wrap"),this.preloadUrl=a.preloadedUrl||"",d.prototype.initialize.call(this,a)},beforeViewRemove:function(a,b){this.setCloseFixed(f.getScrollPosition())},
		getTransitionAnimation:function()
		{
			this.setCloseFixed(0)
		},
		afterReveal:function(a,c,d)
		{
			a===null&&e.preloadView(g,null,this.preloadUrl),
			this.setCloseFixed(0,this.$(".close-wrap")),
			b.defer(this.setPage)
		},
		setCloseFixed:function(a,b){b?(this.closeWrap=b,this.closeAppender=b.parent(),this.closeWrap.on("click."+this.cid,".close-overlay",this.close),this.header.append(b)):(this.closeAppender.append(this.closeWrap),this.closeWrap.css("top",a+10),this.closeWrap.off("."+this.cid),this.closeAppender=this.closeWrap=null)},close:function(a){if(a&&a.target!==a.currentTarget)return;return e.navigateToPreloadedUrl(),!1},setPage:function(){var a={aws:"",contenttype:"",sectionPath:"",ssts:"",templatetype:"",videoincluded:""};

h.trigger("page:load",a)}});return i}),define("views/pages/contactus-overlay",["jquery","underscore","backbone","state","app","simpleoverlay","views/modules/footer"],function(a,b,c,d,e,f,g){var h=f.extend({additionalEvents:{click:"closeOverlayForm","click .contactus-tabs a":"changeTabs","click .contact-us-faq a":"expandFaq","click .overlayForm":"openOverlayForm"},initialize:function(a){this.currentTab=null,this.overlayOpen=!1,f.prototype.initialize.call(this,a)},closeOverlayForm:function(a){if(this.overlayOpen)return this.overlayOpen.fadeOut(200),this.overlayOpen=null,!1},afterReveal:function(a,b,c){this.$contactUsTabs=this.$(".contactus-tabs"),this.$clarificationsModal=this.$("#clarifications"),this.$letterToEditorModal=this.$("#letterToEditor"),

this.subviews.footer=new g,

f.prototype.afterReveal.apply(this,arguments)},expandFaq:function(b){var c=a(b.target),d=c.next();d.is(":visible")?(c.parent().removeClass("active"),d.slideUp(200)):(c.parent().addClass("active"),d.slideDown(200))},changeTabs:function(b){var c=a(b.target),d=c.attr("tab");d&&this.currentTab!==d&&(this.currentTab=d,this.$contactUsTabs.find(".active").removeClass("active"),this.$(".contact-us-faq").hide(),c.parent().addClass("active"),this.$("."+d).show())},openOverlayForm:function(b){var c=a(b.target),d=c.data("flyout");if(d){if(this.overlayOpen){this.closeOverlayForm();return}d==="clarifications"?this.overlayOpen=this.$clarificationsModal:this.overlayOpen=this.$letterToEditorModal,this.overlayOpen.fadeIn(200)}return!1}});return h}),define("views/pages/static-overlay",["jquery","underscore","backbone","state","app","simpleoverlay","views/modules/footer"],function(a,b,c,d,e,f,g){var h=f.extend({additionalEvents:{"click .static-page-faq a":"expandFaq"},initialize:function(a){f.prototype.initialize.call(this,a)},

afterReveal:function(a,b,c)
{
	this.subviews.footer=new g,
	console.log("loaded footer"),
	f.prototype.afterReveal.apply(this,arguments)
},


expandFaq:function(b){var c=a(b.target),d=c.next();d.is(":visible")?(c.parent().removeClass("active"),d.slideUp(200)):(c.parent().addClass("active"),d.slideDown(200))}});return h}),define("views/modules/fullscreen",["jquery","underscore","backbone","baseview","app","state","views/modules/carousel"],function(a,b,c,d,e,f,g){var h=g.extend({el:".gallery.fullscreen",initialize:function(a){b.bindAll(this),a.scrollerColor="dark",this.$win=e.get("win"),this.$body=e.get("body"),this.$doc=e.get("document"),this.carousel=a.carousel,this.parent=a.parent,f.registerFullScreenView(this),this.$doc.on("keydown."+this.cid,this.handleKeyPress),this.$body.on("click."+this.cid,".close",this.close),this.launch(),g.prototype.initialize.call(this,a),this.loadImage(this.$(".slide").eq(this.index));var c=b.throttle(this.handleResizeWindow,50);this.$win.on("resize."+this.cid,c),this.handleResizeWindow()},handleResizeWindow:function(){var a;this.subviews.hscrollbar.refresh(),a=this.$win.height();if(this.windowheight===a)return!1;this.windowheight=a,this.setViewportHeight(a,this.showThumbs)},setViewportHeight:function(a,b){var c=a-40-45;b&&(c-=88),this.$(".viewport").height(c)},onThumbnailToggle:function(a){this.setViewportHeight(this.windowheight,a)},_getImageDataSrcName:function(){return"data-src-large"},_isFullScreen:function(){return!0},close:function(c){return this.animate(this.$el.parent(),"opacity",0,300,"ease-in-out").done(b.bind(function(){this.destroy(!0),f.clearFullScreenView();if(this.carousel){var b=a(".thumbs li",this.parent);b.eq(this.index).click()}},this)),!1},destroy:function(a){this.$doc.off("."+this.cid),this.$win.off("."+this.cid),this.$el.off("."+this.cid),this.$body.off("."+this.cid),a&&this.$el.parent().remove(),g.prototype.destroy.call(this,!1)},launch:function(){var b=a('<article class="gallery fullscreen" style="opacity: 0"><a class="close" href="#"></a><div class="film fullscreen"></div></article>'),c=this.parent.clone();b.append(c),a("body").append(b),this.animate(b,"opacity",1,300,"ease-in-out"),this.setElement(c)},handleKeyPress:function(a){if(a.keyCode===37)return this.$(".prev").trigger("click"),!1;if(a.keyCode===39)return this.$(".next").trigger("click"),!1;if(a.keyCode===27)return this.close(),!1}});return h}),define("views/modules/quickpoll",["jquery","underscore","backbone","pubsub","app","state","fwinfo","cookie"],function(a,b,c,d,e,f,g){var h=c.View.extend({el:".story-poll",events:{"click div.vote input":"registerVote","click a.results":"revealResults"},initialize:function(){this.subviews={},this.user_id=g.getuseruniqueid(),this.poll_id=this.$el.attr("data-pollid"),this.user_id==""&&(this.user_id="unauthenticated"),a.cookie(this.poll_id)&&this.revealResults()},revealResults:function(){var c=a("#quickpoll-results",this.el),d=a(".choices",this.el),e=a(".chart",this.el),g="/polls/get/"+this.poll_id+"/";this.ajax=f.fetchData(g).done(b.bind(function(c){var f=b.pluck(c[0].answer,"count"),g=b.reduce(f,function(a,b){return a+parseFloat(b)},0);length=c[0].answer.length-1,total_percent=0,b.each(c[0].answer,function(a,b){var c=Math.round(parseFloat(a.count)/g*100);b==length?c=100-total_percent:total_percent+=c,a.percent=c});var h=a("#quickpoll-results"),i=b.template(h.html(),{data:c[0]});d.hide(),e.html(i).fadeIn(),a.cookie(this.poll_id,!0)},this))},registerVote:function(c){var e=a("form",this.$el),g=a(".answer:checked").val(),h="/polls/save/"+this.poll_id+"/"+this.user_id+"/"+g+"/";return console.log(h),this.ajax=f.fetchData(h,{method:"post"}).done(b.bind(function(a){a&&(d.trigger("uotrack","pollvote"),this.revealResults())},this)),!1},destroy:function(a){this.undelegateEvents(),b.each(this.subviews,function(b){typeof b.destroy!="undefined"&&b.destroy(a)}),a&&this.remove()}});return h}),define("eduglobal",["jquery","underscore","pubsub","fwinfo","app"],function(a,b,c,d,e){function q(){require([""],function(){l||(FB.init({appId:g,channelUrl:h,status:!0,cookie:!0,xfbml:!0}),FB.Event.subscribe("auth.authResponseChange",function(a){i=a,c.trigger("auth.authResponseChange",a)}),l=!0),o.resolve(FB)})}function r(a){w.getFB(function(){a.status=="connected"&&a.authResponse!=null?t(a.authResponse):s(a.authResponse)})}function s(a){w.getFB(function(){i=undefined,j={},d.setsessionvalue("uniqueid",""),p.hasClass("fbauth")&&p.removeClass("fbauth")})}function t(b){w.getFB(function(){i=b,p.hasClass("fbauth")||p.addClass("fbauth"),FB.api({method:"fql.query",query:"SELECT name, pic_square FROM user WHERE uid= "+b.userID},function(a){j.name=a[0].name,j.photoSmall=a[0].pic_square,c.trigger("auth:user",a[0])}),m||(a.ajax({url:"#"+b.accessToken,type:"POST",data:{accessExpires:b.expiresIn,accessToken:b.accessToken,userID:b.userID},success:function(a){d.setsessionvalue("uniqueid",a.success.UserUniqueId)},error:function(){}}),m=!0),document.location.pathname.toLowerCase()=="/userauth/default/"&&(console.log("user auth'd! about to go back!"),history.back())})}function u(){w.getFB(function(){a(".fb-avatar").attr({src:j.photoSmall,height:22,width:22})})}function v(){w.getFB(function(){FB.getLoginStatus(function(a){r(a)},!0),n||(c.off("page:load",v),n=!0)})}var f=site_config.AUTH.EDUGLOBAL,g=f.APPID,h=f.CHANNELURL,i=undefined,j={},k=f.PERMISSIONS,l=!1,m=!1,n=!1,o=a.Deferred(),p=e.get("body");c.on("auth.authResponseChange",r),c.on("auth:user",u),c.on("page:load",v);var w={getFB:function(a){return o.then(a),q(),o.promise()},init:function(){},login:function(a){this.getFB(function(){FB.login(a,{scope:k})})},logout:function(){this.getFB(function(){d.setsessionvalue("uniqueid",""),FB.logout(function(a){})})},parse:function(){this.getFB(function(){FB.XFBML.parse()})},permissions:function(){return k},status:function(){return b.isUndefined(i)?!1:i.status}};

return b.extend(w,Backbone.Events),w}),define("#",["jquery","underscore","backbone","pubsub","app","state","eduglobal","easing","animatecolors","cookie"],function(a,b,c,d,e,f,g,h,i,j){var k=c.View.extend({el:"#header",events:{"click #nav .search":"onClickNavSearch","click #breaking .close-btn":"onClickCloseBreakingBtn","hover #navbar .about":"onHoverWeatherNav","click #navbar .about .settings-btn":"openWeatherDropSettings","click #navbar .about .cancel-x":"closeWeatherDropSettings","click #navbar .about .cancel-btn":"closeWeatherDropSettings","click #navbar .about .submit":"onClickWeatherSubmit","submit #about-dropdown-form":"onSubmitWeatherForm","click #navbar .user .dropdown .login":"onClickLogin","click #navbar .user .dropdown .logout":"onClickLogout","click #breaking .headline":"onClickBreakingBtn","click #breaking .button":"onClickBreakingBtn","click #search-form .cancel":"cancelSearch",
"hover #navbar .user":"onHoverUserNav",
"hover #navbar .country":"onHoverCountryNav",
"hover #navbar .train":"onHoverTrainNav",
"hover #navbar .appli":"onHoverAppliNav",
"hover #navbar .school":"onHoverSchoolNav",
"hover #navbar .phone":"onHoverPhoneNav"
},
initialize:function(){this.win=e.get("win"),this.body=e.get("body"),this.scrollEl=e.get("scrollEl"),this.fixedWrap=this.$(".fixed-wrap"),this.logo=this.fixedWrap.find(".logo"),this.searchWrap=a("#search-form"),this.nav=e.get("navEl"),this.navSearchBtn=this.nav.find(".search"),this.breaking=e.get("breakingEl"),this.breakingWrap=e.get("breakingWrapEl"),this.navHeight=this.nav.outerHeight(),this.mastheadHeight=80,this.breakingColors={breaking:{normal:"rgb(247,0,0)",highlight:"rgb(191,49,49)"},live:{normal:"rgb(0,170,255)",highlight:"rgb(0,145,218)"},developing:{normal:"rgb(0,170,255)",highlight:"rgb(0,145,218)"}},b.bindAll(this,"onScrollWindow",
"updateHeaderMinHeight",
"openBreakingBar",
"onCompleteOpenBreakingBar",
"updateBreakingBar",
"parseBreakingCountry",
"parseWeatherDropdown",
"updateWeatherDropdown",
"toggleUserDropdown",
"toggleWeatherDropdown",
"toggleCountryDropdown",
"toggleTrainDropdown",
"toggleAppliDropdown",
"toggleSchoolDropdown",
"togglePhoneDropdown"
),this.preventScrollEvent=!1,this.isMastheadExpanded=!1,this.isSearchResultsOpen=this.body.hasClass("show-search"),this.slideSpeed=200,e.set("headerSlideSpeed",this.slideSpeed),this.slideEasing="easeOutCubic",d.on("created:cards",this.shiftSideCards,this),d.on("toggle:aboutdropdown",this.toggleWeatherDropdown,this),d.on("open:searchResults",this.openSearchResults,this),d.on("close:searchResults",this.closeSearchResults,this),d.on("masthead:expand",this.expandMasthead,this),d.on("masthead:collapse",this.collapseMasthead,this),this.breakingLastUpdateClosed=parseFloat(a.cookie("breakingLastUpdateClosed")),this.breakingLastItem={lastUpdate:this.breaking.data("lastupdate"),type:this.breaking.data("type"),content:this.breaking.find("p").eq(0).text()},window.setGlobalTimeout(this.updateBreakingBar,1e3),this.breakingCountryPoll=window.setGlobalInterval(this.updateBreakingBar,91e3),window.setGlobalTimeout(this.updateWeatherDropdown,1200),this.aboutDropPoll=window.setGlobalInterval(this.updateWeatherDropdown,3e5),(!a.cookie("aboutLocation")||a.cookie("aboutLocation")==null)&&a.cookie("aboutLocation","22102")},
onScrollWindow:function(a){!this.preventScrollEvent&&!this.isSearchResultsOpen&&this.collapseMasthead(!0)},onHoverWeatherNav:function(a){clearTimeout(this.aboutNavTimer),this.aboutNavTimer=b.delay(this.toggleWeatherDropdown,300,undefined,a.type==="mouseenter")},
onClickBreakingBtn:function(b){var c=a(b.currentTarget).attr("href");if(c.indexOf("livevideoassetid")>0){var d=new j;return d.loadLiveVideo(c.split("#")[1].split("=")[1]),!1}},

onHoverUserNav:function(a){clearTimeout(this.userNavTimer),this.userNavTimer=b.delay(this.toggleUserDropdown,300,undefined,a.type==="mouseenter")},

onHoverCountryNav:function(a){clearTimeout(this.countryNavTimer),this.countryNavTimer=b.delay(this.toggleCountryDropdown,300,undefined,a.type==="mouseenter")},

onHoverTrainNav:function(a){clearTimeout(this.trainNavTimer),this.trainNavTimer=b.delay(this.toggleTrainDropdown,300,undefined,a.type==="mouseenter")},

onHoverAppliNav:function(a){clearTimeout(this.appliNavTimer),this.appliNavTimer=b.delay(this.toggleAppliDropdown,300,undefined,a.type==="mouseenter")},

onHoverSchoolNav:function(a){clearTimeout(this.schoolNavTimer),this.schoolNavTimer=b.delay(this.toggleSchoolDropdown,300,undefined,a.type==="mouseenter")},

onHoverPhoneNav:function(a){clearTimeout(this.phoneNavTimer),this.phoneNavTimer=b.delay(this.togglePhoneDropdown,300,undefined,a.type==="mouseenter")},

toggleUserDropdown:function(a,b){if(this.preventScrollEvent)return;return this.userNavBtn||(this.userNavBtn=this.nav.find(".user")),this.userNavBtn.toggleClass("active",b),this.userNavBtn.hasClass("active")?this.win.on("scroll",this.toggleUserDropdown):this.win.off("scroll",this.toggleUserDropdown),!1},

toggleCountryDropdown:function(a,b){if(this.preventScrollEvent)return;return this.countryNavBtn||(this.countryNavBtn=this.nav.find(".country")),this.countryNavBtn.toggleClass("active",b),this.countryNavBtn.hasClass("active")?this.win.on("scroll",this.toggleCountryDropdown):this.win.off("scroll",this.toggleCountryDropdown),!1},

toggleTrainDropdown:function(a,b){if(this.preventScrollEvent)return;return this.trainNavBtn||(this.trainNavBtn=this.nav.find(".train")),this.trainNavBtn.toggleClass("active",b),this.trainNavBtn.hasClass("active")?this.win.on("scroll",this.toggleTrainDropdown):this.win.off("scroll",this.toggleTrainDropdown),!1},

toggleAppliDropdown:function(a,b){if(this.preventScrollEvent)return;return this.appliNavBtn||(this.appliNavBtn=this.nav.find(".appli")),this.appliNavBtn.toggleClass("active",b),this.appliNavBtn.hasClass("active")?this.win.on("scroll",this.toggleAppliDropdown):this.win.off("scroll",this.toggleAppliDropdown),!1},

toggleSchoolDropdown:function(a,b){if(this.preventScrollEvent)return;return this.schoolNavBtn||(this.schoolNavBtn=this.nav.find(".school")),this.schoolNavBtn.toggleClass("active",b),this.schoolNavBtn.hasClass("active")?this.win.on("scroll",this.toggleSchoolDropdown):this.win.off("scroll",this.toggleSchoolDropdown),!1},

togglePhoneDropdown:function(a,b){if(this.preventScrollEvent)return;return this.phoneNavBtn||(this.phoneNavBtn=this.nav.find(".phone")),this.phoneNavBtn.toggleClass("active",b),this.phoneNavBtn.hasClass("active")?this.win.on("scroll",this.togglePhoneDropdown):this.win.off("scroll",this.togglePhoneDropdown),!1},

onClickWeatherSubmit:function(b){var c=a(b.currentTarget).closest("form"),d=c.find(".query");this.updateWeatherDropdown(d.val())},onSubmitWeatherForm:function(b){b.preventDefault();var c=a(b.currentTarget).find(".query"),d=c.val();c.data("placeholder",d),this.updateWeatherDropdown(d)},

toggleWeatherDropdown:function(a,b){if(this.preventScrollEvent)return;return this.aboutNavBtn||(this.aboutNavBtn=this.nav.find(".about"),this.aboutDropDown=this.aboutNavBtn.children(".dropdown"),this.aboutDropPanel=this.aboutDropDown.children(".dropdown-panel"),this.aboutDropFront=this.aboutDropDown.find(".front-side"),this.aboutDropBack=this.aboutDropDown.find(".back-side")),this.aboutNavBtn.toggleClass("dropdown-active",b),this.aboutNavBtn.hasClass("dropdown-active")?(this.nav.find(".query").blur(),this.win.on("scroll",this.toggleWeatherDropdown)):this.win.off("scroll",this.toggleWeatherDropdown),this.closeWeatherDropSettings(),!1},

openWeatherDropSettings:function(){return this.aboutDropDown.hasClass("settings-active")||this.aboutDropDown.addClass("settings-active"),this.aboutDropDownForm||(this.aboutDropDownForm=new h({el:this.$el.find("#about-dropdown-form")})),this.WeatherAutoComplete||(this.WeatherAutoComplete=new i({el:this.$("#navbar li.about .query"),url:"/services/city/autocomplete/json/",max_results:4})),!1},

closeWeatherDropSettings:function(){if(this.aboutDropDown&&this.aboutDropDown.hasClass("settings-active")){this.aboutDropDown.removeClass("settings-active");var a=this.$el.find("#about-dropdown-form").find(".query"),b=a.data("placeholder");a.val(b)}},

updateWeatherDropdown:function(c){if(this.busyCheckingWeather)return;this.busyCheckingWeather=!0;var c=c||a.cookie("aboutLocation"),d=b.bind(function(a){a[0]!==null?this.parseWeatherDropdown(a):this.WeatherAutoComplete.displayError("This location cannot be found.")},this);c=c.replace(",",""),f.fetchData("#").done(d)},parseWeatherDropdown:function(c){var e=a("script.about-dropdown-tmpl").html(),f=b.template(e,{loc:c}),g=this.$("#navbar li.about"),h=g.find(".dropdown-panel"),i=h.find(".query"),j=c[0].local.city+", "+c[0].local.adminArea.code,k=c[0].local.adminArea.code;h.show(),h.find(".front-side").html(f),i.val(j),i.data("location-text",j);var l=g.find(".drop-icon").data("icon"),m=g.find(".btn-temp");m.attr("class","btn-temp "+l),m.html(h.find(".temp").html()),g.addClass("has-data"),this.busyCheckingWeather=!1,d.trigger("about:newLocation",c),a.cookie("aboutLocation",j),this.closeWeatherDropSettings()},onClickNavSearch:function(a){return this.isMastheadExpanded&&!this.isSearchResultsOpen?this.collapseMasthead(!0):this.expandMasthead(!0),!1},onClickCloseBreakingBtn:function(a){this.closeBreakingBar(!0),d.trigger("uotrack","breakingcountrybarexit")},openSearchResults:function(){this.isSearchResultsOpen=!0},cancelSearch:function(){this.isSearchResultsOpen&&f.navigateToPreloadedUrl(this.originalPath),this.closeSearchResults()},closeSearchResults:function(){this.collapseMasthead(!0),this.isSearchResultsOpen=!1,this.body.removeClass("show-search")},collapseMasthead:function(a){if(this.isMastheadExpanded){this.isMastheadExpanded=!1;var b={height:"0"};

a?this.searchWrap.stop().animate(b,this.slideSpeed,this.slideEasing):this.searchWrap.stop(!1,!0).css(b),this.toggleLogo(a,!1),this.win.off("scroll",this.onScrollWindow)}},expandMasthead:function(b){if(!this.isMastheadExpanded){this.isMastheadExpanded=!0;var c={height:this.mastheadHeight};

b?this.searchWrap.stop().animate(c,this.slideSpeed,this.slideEasing,function(){a(".search .text-input").focus()}):this.searchWrap.stop(!1,!0).css(c),this.toggleLogo(b,!0),this.searchForm||(this.searchForm=new h({el:this.$el.find("#search-form")})),this.win.on("scroll",this.onScrollWindow)}},toggleLogo:function(a,c){a?this.logo.stop().fadeOut(150,b.bind(function(){this.logo.toggleClass("large",c).fadeIn(150)},this)):this.logo.stop(!1,!0).toggleClass("large",c)},shouldHeaderAnimate:function(){return e.getScrollPosition()<=40},closeBreakingBar:function(c){d.trigger("breakingbar:before:close",this.navHeight,this.slideSpeed),this.isBreakingBarOpen=!1,c&&(this.breakingLastUpdateClosed=this.breakingLastItem.lastUpdate,a.cookie("breakingLastUpdateClosed",this.breakingLastItem.lastUpdate)),this.breakingHeight=-this.breaking.height(),this.breaking.css("height",-this.breakingHeight),this.breakingWrap.css("position","absolute"),this.breaking.stop().animate({height:0},this.slideSpeed,b.bind(function(){this.shouldHeaderAnimate()||this.updateHeaderMinHeight(),this.breaking.css("background-color",""),this.breaking.hide(),d.trigger("breakingbar:after:close")},this)),this.shouldHeaderAnimate()&&this.updateHeaderMinHeight(!0),this.shiftSideCards(this.navHeight,!0)},openBreakingBar:function(){this.isBreakingBarOpen=!0,this.breaking.show(),this.breakingHeight=this.breakingWrap.height(),d.trigger("breakingbar:before:open",this.breakingHeight+this.navHeight,this.slideSpeed);var a={height:this.breakingHeight};

this.breaking.stop().animate(a,this.slideSpeed,this.onCompleteOpenBreakingBar),this.shouldHeaderAnimate()&&this.updateHeaderMinHeight(!0),this.shiftSideCards(this.breakingHeight+this.navHeight,!0)},onCompleteOpenBreakingBar:function(){this.breaking.css("height","auto"),this.breakingWrap.css("position","static"),this.shouldHeaderAnimate()||this.updateHeaderMinHeight(),d.trigger("breakingbar:after:open")},updateHeaderMinHeight:function(a){var b=this.isBreakingBarOpen?this.breakingWrap.height():0,c=this.navHeight+b;a?this.$el.stop().animate({"min-height":c},this.slideSpeed):this.$el.css("min-height",c),this.shouldHeaderAnimate()||this.setScrollTop(this.win.scrollTop()+this.breakingHeight),this.busyCheckingBreakingCountry=!1},shiftSideCards:function(b,c){b=b||this.navHeight+this.breaking.height();var d=a(".card-fixed-container");c?d.stop().animate({top:b},this.slideSpeed):d.css({top:b})},updateBreakingBar:function(){if(this.busyCheckingBreakingCountry)return;this.busyCheckingBreakingCountry=!0,f.fetchHtml("#").done(this.parseBreakingCountry)},parseBreakingCountry:function(c){var d=a(c),e=d.find("p"),f={lastUpdate:parseFloat(d.data("lastupdate")),type:d.data("type"),content:d.find("p").eq(0).text()};

if(!f.lastUpdate)this.isBreakingBarOpen&&this.closeBreakingBar(),this.busyCheckingBreakingCountry=!1;else if(this.breakingLastUpdateClosed!==f.lastUpdate&&this.breakingLastItem.lastUpdate!==f.lastUpdate||!b.isEqual(this.breakingLastItem,f)&&this.breakingAfterFirstLoad)if(this.isBreakingBarOpen){this.breakingWrap.html(e).stop();var g=this.breakingColors[f.type].highlight,h=this.breakingColors[f.type].normal;this.breaking.animate({backgroundColor:g}).animate({backgroundColor:h}),this.busyCheckingBreakingCountry=!1}else this.breakingWrap.html(e),this.breaking.attr("class","").addClass(f.type),this.openBreakingBar();else this.busyCheckingBreakingCountry=!1;this.breakingLastItem=f,this.breakingAfterFirstLoad=!0},setScrollTop:function(a){this.preventScrollEvent=!0,this.scrollEl.scrollTop(a),window.setGlobalTimeout(b.bind(function(){this.preventScrollEvent=!1},this),100)},onClickLogout:function(){this.toggleUserDropdown(),d.trigger("uotrack","headerprofilelogout"),g.logout()},onClickLogin:function(){this.toggleUserDropdown(),g.login(),d.trigger("uotrack","headerprofilelogin")}});return k}),define("views/app",["jquery","underscore","backbone","app","pubsub","resizestop","#"],function(a,b,c,d,e,f,g){var h=c.View.extend({el:"body",events:{click:"triggerRoute","submit form.search":"triggerSearch"},initialize:function(b){var c={};

typeof window.console=="undefined"||typeof window.console.log=="undefined"?(c.log=c.error=c.info=c.debug=c.warn=c.trace=c.dir=c.dirxml=c.group=c.groupEnd=c.time=c.timeEnd=c.assert=c.profile=function(){},window.console=c):c=window.console,window.appViewEventProxy=e,this.DEBUG=d.get("DEBUG");var f=window.header=new g;a(window).bind("resizestop",function(a){e.trigger("resize:app")}).trigger("resizestop")},triggerRoute:function(b){var e=a(b.target).closest("a");if(!e.length||b.metaKey||b.altKey||e.attr("target"))return;d.setTrack(e);if(Modernizr.history){var f=a.trim(e.attr("href"));d.isValidUrl(f)?(f=d.getDefinedRoute(f),f!==null&&(c.history.navigate(f,{trigger:!0}),b.preventDefault())):b.preventDefault()}},triggerSearch:function(b){b.preventDefault();var f="/search/"+encodeURI(a(b.currentTarget.q).val())+"/";e.trigger("heattrack","usersearch");if(Modernizr.history){var g=d.getDefinedRoute(f);if(g!==null){c.history.navigate(g,{trigger:!0});return}}f==="/search//"?window.location+="":window.location=f}});return h}),define("#",["jquery","underscore","backbone","pubsub","app","eduglobal"],function(a,b,c,d,e,f){var g=c.View.extend({el:".utility-bar .share-module",events:{"click .share-tab":"onClickShareTab","click .fb-post-btn":"onClickFbPost","click .social-networks .svc-btn":"onClickSvcBtn","click .cta .cancel":"onClickCancel","click .cta .send":"onClickSend","submit .share-email-form":"onSubmitEmailForm"},initialize:function(){b.bindAll(this,"toggle","fbShareCallback","twTweetListener"),this.subviews={},this.toggle()},onClickSend:function(a){this.$emailForm.trigger("submit")},onSubmitEmailForm:function(c){c.preventDefault(),this.isValid(this.$emailForm)&&a.ajax({type:"POST",url:this.$emailForm.attr("action"),data:this.$emailForm.serialize()}).done(b.bind(function(a){this.$container.hide(),this.$(".email-success").show(),d.trigger("uotrack","UtilityBarShareEmail")},this))},isValid:function(b){var c=!0;return b.children("input,textarea").removeClass("error").each(function(b,d){var e=a(d);e.hasClass("required")&&e.val()===""&&(e.addClass("error"),c=!1)}),c?!0:!1},onClickCancel:function(a){this.toggle(undefined,!0)},onClickSvcBtn:function(b){b.preventDefault();var c=a(b.currentTarget),d=c.data("href"),e=c.data("service");e==="google+"?this.gpShare(d):e==="linkedin"&&this.liShare(d)},onClickShareTab:function(b){this.$(".share-tab, .share-pane").removeClass("active");var c=a(b.currentTarget);c.addClass("active"),c.hasClass("social-tab")?this.$(".social-pane").addClass("active"):this.$(".email-pane").addClass("active")},twInit:function(){e.loadScript("#","twttr",this.twTweetListener)},twTweetListener:function(){twttr.widgets.load(),this.tweetListener=!0,twttr.events.bind("tweet",b.bind(function(a){this.$container.hide(),this.$(".twitter-success").show(),d.trigger("uotrack","UtilityBarShareTweet")},this))},gpShare:function(a){d.trigger("uotrack","UtilityBarShareGooglePlus"),e.openPopup("#"+encodeURI(this.link),600,500)},liShare:function(a){d.trigger("uotrack","UtilityBarShareLinkedIn"),e.openPopup("#"+encodeURI(this.link),600,400)},onClickFbPost:function(a){this.fbAuthorized?this.fbShare():this.fbLogin()},fbCheckLoginStatus:function(){this.fbCheckOnly=!0,f.getFB(b.bind(function(a){a.getLoginStatus(b.bind(function(a){a.status==="connected"&&this.fbCheckPermissions(a.authResponse.accessToken)},this),!0)},this))},fbCheckPermissions:function(a){f.getFB(b.bind(function(c){c.api("/me/permissions",{access_token:a},b.bind(function(a){if(a.data&&a.data.length){var b=!1;for(var c in a.data[0])if(c.match("publish_stream|publish_actions")){b=!0;break}b?(this.fbAuthorized=!0,this.fbCheckOnly||this.fbShare(),this.fbCheckOnly=!1):this.fbLoginAttempted&&(this.$fbLoading.hide(),this.$status.text("You must allow posting on your behalf, try again."))}},this)),c.api("/me",{access_token:a},b.bind(function(a){a.link&&(this.fbLink=a.link)},this))},this))},fbLogin:function(){this.fbCheckOnly=!1,this.fbLoginAttempted=!0,this.$status.text(""),this.$fbLoading.show(),f.getFB(b.bind(function(a){a.login(b.bind(function(a){a.authResponse?this.fbCheckPermissions(a.authResponse.accessToken):(this.$fbLoading.hide(),this.$status.text("You must login with Facebook, try again."))},this),{scope:"publish_stream"})},this))},fbShare:function(){this.$fbLoading.show();var a={link:this.link,picture:this.image,name:this.title,caption:"",description:this.$socialMessage.val(),source:"eduglobal"};

f.getFB(b.bind(function(b){b.api("/me/feed/","post",a,this.fbShareCallback)},this))},fbShareCallback:function(c){if(c.error)this.fbAuthorized=!1,this.$fbLoading.hide(),this.$status.text("An error occurred, try again.");else{this.$(".post-link").remove();if(c.id&&this.fbLink){var f=this.fbLink+"/posts/"+c.id.replace(/.*_(.*)/gi,"$1"),g=a('<a target="_blank" class="post-link" href="'+f+'">View the post.</a>').on("click",b.bind(function(){e.openPopup(f,1e3,600)},this));this.$("").append(g)}this.$fbLoading.hide(),this.$container.hide(),this.$("").show(),d.trigger("uotrack","UtilityBarShareFacebook"),this.fbLink=undefined}},toggle:function(c,f){this.$btn=this.$(".btn"),this.$container=this.$(".container"),f=f||this.$btn.hasClass("open");if(c)if(a(c.target).closest(this.$container).length>0||a(c.target).closest(this.$(".success-pane")).length>0)return!1;f?(this.$btn.removeClass("open"),this.$flyout.removeClass("open"),this.$(".success-pane").hide(),this.$container.show(),this.$(".social-tab").trigger("click"),this.tweetListener&&twttr.events.unbind("tweet"),this.$win.off("click."+this.cid),this.destroy()):f===!1&&(this.$flyout=this.$(".flyout-share"),this.$win=e.get("win"),this.$socialMessage=this.$(".social-message"),this.$status=this.$(".status .text"),this.$fbLoading=this.$(".fb-loading"),this.$emailForm=this.$(".share-email-form"),this.title=this.$(".this-story h4").text(),this.image=this.$(".this-story img").attr("src"),this.link=window.location.href,this.fbCheckLoginStatus(),this.twInit(),this.$btn.addClass("open"),this.$flyout.addClass("open"),d.trigger("uotrack","UtilityBarShareOpen"),b.delay(b.bind(function(){this.$win.on("click."+this.cid,this.toggle)},this),100))},destroy:function(a){this.undelegateEvents(),b.each(this.subviews,function(b){typeof b.destroy!="undefined"&&b.destroy(a)}),a&&this.remove()}});return g}),define("#",["jquery","underscore","backbone","pubsub","app","eduglobal"],function(a,b,c,d,e,f,g){var h=c.View.extend({el:".utility-bar .comment-module",initialize:function(){b.bindAll(this,"toggle"),this.subviews={},this.pubSub={"breakingbar:after:open":this.scalePanel},d.attach(this.pubSub,this),this.toggle()},attachCommentListener:function(){g.getFB(b.bind(function(a){a.Event.subscribe("comment.create",b.bind(function(){d.trigger("comment:created")},this)),a.Event.subscribe("comment.remove",b.bind(function(){d.trigger("comment:removed")},this))},this))},unattachCommentListener:function(){g.getFB(function(a){a.Event.unsubscribe("comment.create"),a.Event.unsubscribe("comment.remove")})},loadComments:function(){g.getFB(b.bind(function(a){a.XFBML.parse(this.$scrollable[0]),this.scrollableHeight=this.$scrollable.height(),this.heightPoll=setInterval(b.bind(function(){this.scrollableHeight!==this.$scrollable.height()&&(this.scrollableHeight=this.$scrollable.height(),this.scalePanel(this.scrollableHeight))},this),200),this.subviews.vscroll=new f({el:this.$scrollWrap,padding:16,color:"light"})},this))},scalePanel:function(a){a||(a=this.scrollableHeight);var b=this.$win.height()-this.$header.outerHeight()-this.$utilWrap.outerHeight(),c=a>b?b-20:a;this.$scrollWrap.css("height",c),this.subviews.vscroll&&this.subviews.vscroll.refresh()},toggle:function(c,f){this.$btn=this.$(".btn"),this.$scrollWrap=this.$(".scroll-wrap"),f=f||this.$btn.hasClass("open");if(c&&a(c.target).closest(this.$scrollWrap).length>0)return!1;f?(this.$btn.removeClass("open"),this.$flyout.removeClass("open"),clearInterval(this.heightPoll),d.trigger("uotrack","UtilityBarFacebookClose"),this.$win.off("click."+this.cid),this.unattachCommentListener(),this.destroy()):f===!1&&(this.$flyout=this.$(".flyout-comments"),this.$scrollable=this.$(".scrollable-content"),this.$fbPluginWrap=this.$(".fb-plugin-wrap"),this.$utilWrap=this.$el.closest(".utility-wrap"),this.$header=a("#header"),this.$win=e.get("win"),this.$btn.addClass("open"),this.$flyout.addClass("open"),this.loadComments(),this.attachCommentListener(),d.trigger("uotrack","UtilityBarFacebookOpen"),b.delay(b.bind(function(){this.$win.on("click."+this.cid,this.toggle)},this),100))},destroy:function(a){this.undelegateEvents(),b.each(this.subviews,function(b){typeof b.destroy!="undefined"&&b.destroy(a)}),this.pubSub&&d.unattach(this.pubSub,this),a&&this.remove()}});return h}),define("#",["jquery","underscore","backbone","pubsub","app","fwinfo","eduglobal"],function(a,b,c,d,e,f,g,h,i,j){var k=c.View.extend({el:".utility-wrap",events:{"click .print-module .btn":"printWindow","click .comment-module .btn":"onClickCommentBtn","click .share-module .btn":"onClickShareBtn","click .feedback-module .btn":"onFeedbackBtn"},initialize:function(c){b.bindAll(this,"fetchCommentCount","parseCommentCount"),this.options=a.extend({noTransition:!1},c||{}),this.subviews={},this.pubSub={"hide:utilitybar":this.hide,"show:utilitybar":this.show,"comment:created":this.fetchCommentCount,"comment:removed":this.fetchCommentCount},d.attach(this.pubSub,this),this.show(),this.options.noTransition&&this.$el.addClass("show").addClass("no-transition"),this.url=e.getPageUrl(),this.fetchCommentCount()},onClickCommentBtn:function(b){a(b.currentTarget).hasClass("open")||(this.subviews.comments=new g)},onClickShareBtn:function(b){a(b.currentTarget).hasClass("open")||(this.subviews.share=new f)},onFeedbackBtn:function(a){(new j.Ocode({})).show()},printWindow:function(a){return d.trigger("uotrack","UtilityBarPrint"),window.print(),!1},fetchCommentCount:function(){i.getFB(b.bind(function(a){a.api("/?ids="+this.url,this.parseCommentCount)},this))},parseCommentCount:function(a){var b=0,c=a[this.url];c&&c.comments&&(b=c.comments),this.updateCommentCount(b)},updateCommentCount:function(b){var c=a(".credits .comments .label"),d=c.siblings(".num");b>1&&c.text("Comment"),d.text(b+" "),this.$(".comment-module .count").text(b)},show:function(){if(this.options.noTransition)return;this.$el.addClass("show")},hide:function(){if(this.options.noTransition)return;this.$el.removeClass("show")},destroy:function(a){this.undelegateEvents(),d.unattach(this.pubSub,this),b.each(this.subviews,function(b){typeof b.toggle!="undefined"&&b.toggle(undefined,!0),typeof b.destroy!="undefined"&&b.destroy(a)}),a&&this.remove()}});return k}),define("views/pages/story",["jquery","underscore","backbone","pubsub","app","baseview","advertisement","advertisementpreload","advertisementpreroll","#","views/modules/email-widget","views/modules/video","views/modules/audio","views/modules/carousel","views/modules/map","views/modules/taboola","views/modules/outbrain","views/modules/quickpoll","views/modules/interactives/before-after","views/modules/interactives/timeline","views/modules/interactives/overview","views/modules/interactives/sequencer","views/modules/sponsored-series-bar","views/modules/interactives/pie-chart","views/modules/interactives/bar-chart","views/modules/interactives/line-graph","views/modules/vertical-scroll","fitvids"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A){var B=f.extend({events:{"click .credits .comments":"loadComments","click .credits .share":"loadShare","click .open-email-widget":"loadEmailWidget","click .expandable":"expandPhoto","click .expandable.open":"collapsePhoto","click .headline img":"taboolaPixelTracking","hover .ui-dropdown":"onHoverFilterDropdown"},onHoverFilterDropdown:function(b){if(b.type==="mouseenter"){var c=a(b.currentTarget),d=c.find(".ui-dropdown-scroll-wrap");this.subviews.vscroll=new A({el:d,padding:6})}else this.subviews.vscroll&&this.subviews.vscroll.destroy()},initialize:function(a){this.win=e.get("win"),this.expanded=!1,this.assetId=this.$(".asset").data().assetid||0,this.texttype=this.$(".asset").data().texttype||"story",b.bindAll(this,"setPage","getMoreStories"),f.prototype.initialize.call(this,{}),this.render()},checkForInlineContent:function(){var b=this.$("div.double-wide");b.fitVids(),b.find("img").each(function(){a(this).is("div.double-wide > img, div.double-wide > p > img")&&a(this).addClass(this.width>this.height?"landscape":"portrait").addClass("clearFix")}),b.find("a").each(function(){a(this).is("div.double-wide > a, div.double-wide > p > a")&&a(this).attr("data-uotrack","storyinlinelink")})},getMoreStories:function(){var c={mode:"grid-2x4",container:"taboola-div-grid-2x4",widget:!0},d={widget:["AR_3","AR_4"]};

if(this.texttype==="galleries"||this.texttype.indexOf("video")!==-1)this.subviews.taboola=new p,this.texttype==="galleries"?this.subviews.taboola.getRelated(this.showTaboola,"photo","photo",null,null,this.assetId):this.subviews.taboola.getRelated(this.showTaboola,"video","video",null,null,a(".videoObject").attr("id"));else{if(this.texttype!=="interactive"){var e=this.$(".double-wide"),f=this.$("aside.right:last");if(!e.length)return;var g=e.position().top,h=e.height(),i=f.position().top+f.height()-g;h<i-50&&(b.extend(c,{mode:"verticalx8",container:"taboola-div-verticalx8"}),b.extend(d,{widget:["AR_5"]}),a("article.asset .more-stories-wrap").addClass("vertical"))}this.createTaboolaOutbrain(c,d)}},createTaboolaOutbrain:function(a,b){var c=Math.round((new Date).getTime()/1e3);c%2===0?this.subviews.taboola=new p(a):this.subviews.outbrain=new q(b)},expandPhoto:function(b){var c=a(b.currentTarget),d=a("p",c);d.hide(),c.animate({width:"560px"},350,function(){d.fadeIn(250)}),c.addClass("open")},collapsePhoto:function(b){var c=a(b.currentTarget),d=a("p",c);d.hide(),c.removeClass("open"),c.animate({width:"180px"},150,function(){d.fadeIn()})},loadComments:function(){a(".comment-module .btn").trigger("click")},loadShare:function(){a(".share-module .btn").trigger("click")},loadEmailWidget:function(b){a(b.currentTarget).hasClass("open")||(this.subviews.EmailWidget=new k)},render:function(){var c=this;this.subviews.utilitybar=new j,this.setupSub("timeline",".interactive.timeline",t),this.setupSub("chron",".interactive.overview",u),this.setupSub("sequencer",".interactive.sequencer",v),this.setupSub("before-after",".before-after",s),this.setupSub("pie-chart",".interactive.pie-chart",x),this.setupSub("bar-chart",".interactive.bar-chart",y),this.setupSub("line-graph",".interactive.line-graph",z),this.setupSub("galleries",".galleries",n,{fullScreen:!0,track:!0});var d={};

this.texttype.indexOf("video")!==-1&&(d={autostart:!0}),this.setupSub("video",".video",l,d),this.setupSub("maps",".map .mapboxWrap",o),this.setupSub("polls",".story-poll",r),this.setupSub("audio",".cp-container",m);var f=this.$(".sponsored-series-bar");f.length>0&&this.setupSub("sponsored-series-bar",".sponsored-series-bar",w);try{var k=e.getPageInfo(this.$el)||{},p=k.basePageType,q=typeof k.topic=="undefined"?null:k.topic,A=typeof k.series=="undefined"?null:k.series;this.setupSub("ad","aside.partner",g,{autoCreateSlot:!1,aws:k.aws,el:this.el,masterPageType:"asset",title:k.seotitletag,refresh:!1,series:A,sliderFunctionality:!1,sitePage:"usat/"+(k.ssts||"").replace(/\/\/*$/,""),topic:q,url:e.getPageUrl(),$cardWrap:null,sectionPath:null}),k.excludeTransitionAd!==!0&&(this.subviews.adout=new h({aws:k.aws,el:"#overlay",isRateMetered:!0,masterPageType:"asset",title:k.seotitletag,pageType:p,rateMeter:"asset",sitePage:"usat/"+(k.ssts||"").replace(/\/\/*$/,""),series:A,topic:q,url:e.getPageUrl()})),a("#prerollOverlayPlayer").length&&(this.subviews.preroll=new i({aws:k.aws,el:a("#prerollOverlayPlayer"),title:k.seotitletag,pageType:p,url:e.getPageUrl()}))}catch(B){console.error("setPage or advertisement threw exception:",B.stack||B.stacktrace||B.message)}this.checkForInlineContent(),b.defer(this.setPage),b.delay(this.getMoreStories,1e3)},setPage:function(){var b=this.$("article h1").text(),c=e.getPageInfo(this.$el),f={asset_collection:e.get("collection"),assetid:c.assetid,aws:c.aws,blogname:c.blogname,contentParentId:"asset",contenttype:c.contenttype,ssts:c.ssts,subviews:this.subviews,templatetype:a("article.asset").attr("data-texttype"),url:e.getPageUrl(),videoincluded:c.videoincluded,gallerytitle:c.gallerytitle||"",galleryindex:c.galleryindex||"",noinitialanalytics:c.noinitialanalytics||""};

document.title=c.seotitletag,d.trigger("page:load",f)},setupSub:function(b,c,d,e){e||(e={}),this.subviews[b]=[];var f=this;a.each(this.$(c),function(c){e.el=a(this).get(0);var g=new d(e);f.subviews[b].push(g)})},showTaboola:function(a){var c=this.$("#more-galleries-template");if(c.length===1){var d=b.template(c.html(),{data:a.list});this.$(".headlines.gallery-more").append(d)}},taboolaPixelTracking:function(a){var b="#",c="90393b522c6937bd3b1e815ead8d189cea03650",d=e.get("taboolaResponseID"),f=a.currentTarget.attributes[3].value,g=a.currentTarget.attributes[4].value;(new Image).src="#"+b+"/recommendations.notify-click"+"?app.type=desktop"+"&app.apikey="+c+"&response.id="+d+"&item.type="+f+"&item.id="+g}});return B}),define("views/modules/overlay",["jquery","underscore","backbone","pubsub","app","baseappview","state","views/pages/story","views/modules/cards2","views/modules/form","views/modules/markets-autocomplete","views/modules/ajax-widget"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=f.extend({el:"#overlay",events:{"click .transition-wrap":"close","click .close-overlay":"close","submit #money-tools-form":"onMoneyToolsFormSubmit"},initialize:function(c){c=a.extend(!0,{template:'<div id="overlay" class="no-transition"><div class="content"><div class="transition-wrap"><article class="asset clearfix story ui-loading light-medium"><div class="close-wrap"><a href="#" class="close close-overlay" data-ht="modalclose"></a></div></article></div></div><div class="film show"></div></div>'}),this.init=!1,b.bindAll(this,"close","updateArrowLinks","showClose","hideClose"),this.win=e.get("win"),this.scrollEl=e.get("scrollEl"),this.nav=e.get("navEl"),this.header=e.get("headerEl").children(".fixed-wrap"),this.breaking=e.get("breakingEl"),this.breakingWrap=e.get("breakingWrapEl"),this.currentStoryIndex=-1,this.animationIndex=0,this.subviews={},this.pubSub={"close:overlay":this.close,"updateArrowLinks:overlay":this.updateArrowLinks,"overlay:close:hide":this.hideClose,"overlay:close:show":this.showClose},f.prototype.initialize.call(this,c)},setFixedPosition:function(a){this.setCloseFixed(e.getScrollPosition()),f.prototype.setFixedPosition.apply(this,arguments)},animateNewContent:function(a,c,d,e){var f=d.find(".transition-wrap"),g=d.find(".utility-bar");return f.css("height",this.win.height()-40),this.swapContent(this.$(".transition-wrap"),f).done(b.bind(function(){f.css("height",""),this.$(".utility-bar").replaceWith(g)},this))},getTemporaryLoader:function(a){return this.options.template},beforeReveal:function(a,b,c,d){!this.viewReady&&a!==null&&this.$el.find(".film").remove()},afterReveal:function(b,c){var e=this.$(".transition-wrap:first");if(b===null){var f=this.parseSection(e);g.preloadView(i,null,f)}this.init||(this.initializeDom(),this.init=!0,this.currentStoryIndex=this.getBestStoryIndex(c),d.trigger("open:overlay")),this.updateArrowLinks(),this.subviews.storyView=new h({el:e}),a(".idc-market-tools").length&&(this.moneyToolsForm=new j({el:this.$el.find("#money-tools-form")}),this.subviews.MarketsAutocomplete||(this.subviews.markets_autocomplete=new k({el:this.$(".idc-market-tools .query"),url:"/services/markets/autocomplete/json/",max_results:4})),this.subviews.markets=new l({el:".load-markets",url:"/services/markets/interior-widget/",refresh:6e4,contents:"#default-market-quotes"})),this.setCloseFixed(0,this.$(".close-wrap"))},initializeDom:function(){this.arrowWrapTemplate=this.$("#overlay-arrow-wrap"),this.arrowContainer=this.$(".overlay-arrows"),this.film=this.$(".film"),this.collection=this.$(".content")},animateRevealView:function(c,d){var e=this.$(".transition-wrap"),f=this.win.height()-40;if(this.isSafari5)return e.css({height:f}),this.show();e.css({height:f,overflow:"hidden",opacity:0}),e[0].style[this.transformCssName]="scale(0.4)",e[0].style[this.transformOriginCssName]="50% "+f*.25+"px",e[0].style[this.transitionCssName]=this.transformCssHyphenName+" 300ms linear, opacity 300ms linear",this.$el.show().css({opacity:1,display:"block"});var g=this.$(".film").removeClass("show"),h=this.animate(g,"opacity",".85",300,"linear");b.delay(b.bind(function(){e[0].style[this.transformCssName]="scale(1.0)",e[0].style.opacity=1},this));var i=this.registerTransitionEndListener(e);return a.when(i,h).done(b.bind(function(){this.clearTransition(e),e[0].style[this.transformOriginCssName]=""},this)),i.promise()},beforeViewRemove:function(a,b){this.setCloseFixed(e.getScrollPosition()),d.trigger("hide:utilitybar")},animateRemoveView:function(b){if(this.isSafari5)return this.hide();if(this.viewReady){var c=this.$(".transition-wrap");return a.when(this.animate(this.film,"opacity",0,250),this.animate(c,"opacity",0,250))}return this.$el.css("z-index",1e3),this.hide(!0)},updateArrowLinks:function(){if(this.currentStoryIndex===-1){this.currentStoryIndex=this.getBestStoryIndex(window.location.pathname);if(this.currentStoryIndex===-1){this.arrowContainer.removeClass("show");return}}var a=this.getStoryCollection();if(this.prevAsset===a[this.currentStoryIndex-1]&&this.nextAsset===a[this.currentStoryIndex+1])return;this.prevAsset=a[this.currentStoryIndex-1],this.nextAsset=a[this.currentStoryIndex+1],this.arrowContainer.empty(),this.arrowContainer.append(this.buildArrowDom(this.prevAsset,"previous")),this.arrowContainer.append(this.buildArrowDom(this.nextAsset,"next")),this.arrowContainer.addClass("show")},buildArrowDom:function(c,d){var e=!c;c?c.disabled="":c={disabled:"disabled"},c.dir=d;if(c.photo&&c.photo.crops&&c.photo.crops["1_1"]&&c.photo.crops["1_1"].indexOf(".jpg")!==-1){c.image=c.photo.crops["1_1"];var f="_r64.jpg?3aa4db7cc8ccd5d587e4ef60ee4f4bfbf4814675";c.image=c.image.replace(".jpg",f)}var g=a(b.template(this.arrowWrapTemplate.html(),c));return e?this.isApple?g.css({display:"none"}):g.css({"z-index":1}):this.isApple&&g.find(".preview").remove(),g},hideClose:function(a){this.closeWrap.hide(a)},showClose:function(a){this.closeWrap.show(a)},setCloseFixed:function(a,b){b?(this.closeWrap=b,this.closeAppender=b.parent(),this.closeWrap.css("top",""),this.closeWrap.on("click."+this.cid,".close-overlay",this.close),this.header.append(b)):this.closeAppender&&this.closeWrap&&(this.closeAppender.append(this.closeWrap),this.closeWrap.css("top",a+10),this.closeWrap.off("."+this.cid),this.closeAppender=this.closeWrap=null)},close:function(b){if(b&&b.target!==b.currentTarget)return;var c=a(b.currentTarget).attr("data-ht")||"modalclose";d.trigger("heattrack",c),g.navigateToPreloadedUrl();if(b)return!1},destroy:function(a){f.prototype.destroy.call(this,a)},parseSection:function(a){var c="",d=e.getPageInfo(a),f;if(d&&(d.ss||d.ssts)){f=d.ss;if(!f){f=d.ssts;var g=f.indexOf("/");g>0&&(f=f.substring(0,g)),b.indexOf(i.prototype.cards,f)===-1&&(f=null)}e.set("ss",f),c=f,f.indexOf("/")>0&&(c=f.substring(0,f.indexOf("/"))),c==="/"?c="":c+="/"}return c},getBestStoryIndex:function(a){a&&a[0]!=="/"&&(a="/"+a);var b=this.getStoryCollection();if(!b||b.length===0)return-1;var c=-1,d=-1,e=this.currentStoryIndex;e===-1&&(e=0);var f;for(f=e;f>=0;f--)if(b[f].links.html===a){c=f;break}for(f=e;f<b.length;f++)if(b[f].links.html===a){d=f;break}return d===-1&&c===-1?-1:d===-1?c:c===-1?d:e-c<d-e?c:d},getStoryCollection:function(){var a=e.get("collection");if(!a)return;return b.filter(a,function(a){return a.headline&&a.links&&a.links.html})},getTransitionAnimation:function(c,d,f){var g=a.Deferred(),h=this.win.height()-40,i=e.getScrollPosition(),j=this.$(".transition-wrap:last");this.prepareContentForTransition(j,i,h);var k=a(this.options.template),l=k.find(".transition-wrap");l.css({position:"absolute"}),l.attr("data-animation-index",++this.animationIndex),this.prepareContentForTransition(l,0,h),this.scrollEl.scrollTop(0),this.collection.append(l),this.setCloseFixed(i);var m=this.getBestStoryIndex(d);if(this.currentStoryIndex!==-1&&m!==-1){j.css("left","0%");var n,o="0%";this.currentStoryIndex>m?(l.css("left","-100%"),n="100%"):(l.css("left","100%"),n="-100%");var p=a.when(this.animate(j,"left",n,350,"ease-in-out"),this.animate(l,"left",o,350,"ease-in-out"));p.done(b.bind(function(){this.clearTransition(j),j.remove(),parseInt(l.attr("data-animation-index"),10)===this.animationIndex&&this.resetContentTransition(l),g.resolve()},this))}else g=this.swapContent(j,l);return this.currentStoryIndex=m,g.promise()},prepareContentForTransition:function(a,b,c){a.css({height:c}),a.children().css({top:-1*b})},resetContentTransition:function(a){a.css({position:"relative"})},onMoneyToolsFormSubmit:function(b){b.preventDefault();var d=a(b.currentTarget).find(".query"),e=d.val();e=e.split(" - ")[0],d.val(e),d.attr("data-symbol",e);var f="/money/tools/"+d.attr("data-symbol")+"/";Modernizr.history?c.history.navigate(f,{trigger:!0}):window.location=f}});return m}),define("views/pages/media",["jquery","underscore","backbone","pubsub","app","baseappview","views/modules/carousel","views/modules/fullscreen","views/modules/vertical-scroll","views/modules/video","#","views/modules/taboola"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=f.extend({el:"#media-view",events:{"click .media-tabs":"mediaTabClick","mouseout .media-playlist":"mediaPlaylistMouseOut","mouseover .media-playlist":"mediaPlaylistMouseIn","click .filter-group li label":"filterSelect","click .search-toggle":"searchToggle","click .media-playlist a":"changeMediaClick","click .image-view div.fullscreen":"imageFullScreen","click .sidenav li.sub":"sectionHighlight","click .tabgroup a":"onClickTabgroupLinks"},initialize:function(c){c=a.extend(!0,{delay:{playlistAutoClose:250},animations:{cinematic:{change:{fadeOut:{duration:300,easing:"ease-in-out"},fadeIn:{duration:300,easing:"ease-in-out"}}}}},c),this.win=e.get("win"),this.scrollEl=e.get("scrollEl"),this.breakingBar=e.get("breakingEl"),this.win.on("resize."+this.cid,b.throttle(b.bind(this.handleResizeWindow,this),50)),this.pubSub={"breakingbar:before:open":b.bind(this.adjustTop,this,!0),"breakingbar:before:close":b.bind(this.adjustTop,this,!1)},this.playlistTimer=null,this.init=!1,f.prototype.initialize.call(this,c);var d=a(".sidenav > li.sub-active");this.lastSectionName=d.attr("data-section")},handleResizeWindow:function(){this._setContentHeight(this.$el,this.breakingBar.height()),this.browse&&this.columnize(this.$el)},_setContentHeight:function(b,c,d){var e=a(window).height(),f=179;c=c||0;var g=e-(f+c)},beforeReveal:function(a,b,c){this.isCinematicPath(b)||this.columnize(c)},afterReveal:function(a,c){this.isCinematicPath(c)?(this.$el.css({"-webkit-transform":"none","-webkit-perspective":0}),this.subviews.utilityBar=new k,c.indexOf("/gallery")!==-1?this._initializeGallery():c.indexOf("/photo")!==-1?this._initializeImage(this.$el):c.indexOf("/video")!==-1&&this._initializeVideo(this.$el),this.browse=!1,this.isCinematicPath(a)||(this.playlistStuckOpen=!1,this.delayClosePlaylist(),a&&this.$(".back-to-media").attr("href","/"+a))):this._initializeBrowse(),b.defer(this.setPage)},afterViewRemove:function(a,b){},getTemporaryLoader:function(){return'<article id="media-view" class="ui-loading dark-medium"></article>'},animateNewContent:function(a,b,c,d){if(!this.isCinematicPath(b))return f.prototype.animateNewContent.apply(this,arguments)},getTransitionAnimation:function(a,b,c){return this.isCinematicPath(b)?this.isCinematicPath(a)?this._fadeInNewCinematicContent(b,c):"left":this.isCinematicPath(a)?"right":this.changeBrowseSection(a,b)},changeBrowseSection:function(b,c){var d=this.$(".sidenav"),e=this._getSubSectionPath(b),f=this._getSubSectionPath(c);if(e===f)return;var g,h;return d.children().each(function(b,c){c=a(c);var d=c.attr("data-section")||"";d===e?(g=c.children("div").slideUp(250),c.removeClass("active")):d===f&&(h=c.children("div").slideDown(250),c.addClass("active"))}),g&&this.registerAnimation(g.promise()),h&&this.registerAnimation(h.promise()),a.when(g,h)},_getSubSectionPath:function(a){a=a.replace("media/","");if(a){var b=a.indexOf("/");return b===-1?a:a.substring(0,b)}return""},isCinematicPath:function(a){return a&&a.indexOf("/cinematic")!==-1},_fadeInNewCinematicContent:function(a,c){var d=jQuery.Deferred();return c.done(b.bind(function(a){this._swapRelatedMedia(a),this._swapMainView(a,d)},this)),d.promise()},_swapMainView:function(a,c){var d=this.animate(this.$(".media-main-view"),"opacity",0,this.options.animations.cinematic.change.fadeOut.duration,this.options.animations.cinematic.change.fadeOut.easing);d.done(b.bind(function(){var d=a.find(".media-main-view");d.css("opacity",0),this.$(".media-main-view").replaceWith(d);if(!d.length)c.resolve();else{var e=this.animate(d,"opacity",1,this.options.animations.cinematic.change.fadeIn.duration,this.options.animations.cinematic.change.fadeIn.easing);e.done(b.bind(function(){c.resolve()},this))}},this))},_swapRelatedMedia:function(a){var c=this.animate(this.$(".recommended"),"opacity",this.options.animations.cinematic.change.fadeOut.duration,this.options.animations.cinematic.change.fadeOut.easing);c.done(b.bind(function(){var b=a.find(".recommended");b.css("opacity",0),this.$(".recommended").replaceWith(b),b.length&&this.animate(b,"opacity",1,this.options.animations.cinematic.change.fadeIn.duration,this.options.animations.cinematic.change.fadeIn.easing)},this))},_initializeGallery:function(){var a=this.$(".galleries"),b=a.data().galleryId||0;this.subviews.carousel=new g({el:a[0],fullScreen:!0,scrollerColor:"dark"}),this.subviews.taboola=new l,this.subviews.taboola.getRelated(this.showRecommended,"photo","photo",10,null,b)},_initializeVideo:function(a){var b=this.$(".video .videoObject").attr("id");this.subviews.video=new j({el:a,autostart:!0}),this.subviews.taboola=new l,this.subviews.taboola.getRelated(this.showRecommended,"video","video",10,null,b)},_initializeImage:function(a){this._flipToLargeImages(a)},_flipToLargeImages:function(b){a(b).find(".viewport img").each(function(){var b=a(this);if(b.attr("data-src-large")){var c=b.attr("data-src-large");b.attr("src",c)}})},onClickTabgroupLinks:function(b){this.$(".tabgroup a").removeClass("active"),a(b.currentTarget).addClass("active")},destroy:function(a){this.win.off("."+this.cid),f.prototype.destroy.call(this,a)},imageFullScreen:function(a){a.preventDefault();var b=new h({parent:this.$(".viewport")[0]});return!1},changeMediaClick:function(b){this.$(".playlist li.active").removeClass("active"),a(b.target).closest("li").addClass("active")},mediaTabClick:function(b){var c=this.$(".media-playlist"),d=a(b.target).closest("li");d.hasClass("expando")?c.hasClass("open")?(this.playlistStuckOpen=!1,c.removeClass("open")):(this.playlistStuckOpen=!0,c.addClass("open")):d.hasClass("tab")&&(c.addClass("open"),d.hasClass("active")||(c.find(".media-tabs .active").removeClass("active"),d.addClass("active"),c.find(".playlist").addClass("hidden"),c.find("."+d.attr("for")).removeClass("hidden")))},mediaPlaylistMouseOut:function(){this.playlistStuckOpen||this.delayClosePlaylist()},mediaPlaylistMouseIn:function(){clearTimeout(this.playlistTimer)},delayClosePlaylist:function(){this.playlistTimer=setTimeout(a.proxy(function(){this.$(".media-playlist").removeClass("open")},this),this.options.delay.playlistAutoClose)},_initializeBrowse:function(){this.navContainer=a(".sidenav-container",this.$el),this.gridWrapper=this.$(".grid-wrapper"),this.browse=!0,this.imageFullScreen&&this.$(".close").trigger("click")},columnize:function(b){var c=360,d=b.find(".grid > li"),e=a(window).width(),f=e-122-30,g=Math.floor(f/c);g<1&&(g=1),this.browseContent=b.find(".content"),this.browseContent.width(g*c+30),d.removeClass("featured");var h=d.slice(0,g);h.addClass("featured");if(h.attr("data-src-large")){var i=h.attr("data-src-large");h.attr("src",i)}},filterSelect:function(b){var c=a(b.currentTarget),d=c.parents(".filter-group").find("label");d.removeClass("active"),c.addClass("active")},adjustTop:function(a){if(this.isBreakingBarOpen===a){this.$el.addClass("no-transition"),a?this.$el.addClass("offset"):this.$el.removeClass("offset");return}this.$el.removeClass("no-transition"),this.isBreakingBarOpen=a;var c=250;a?(this.$el.addClass("offset"),setTimeout(b.bind(function(){this._setContentHeight(this.$el,this.breakingBar.height()),this.isCinematicPath(this.currentPath)||this.adjustMediaHeight(this.$el)},this),c)):(this._setContentHeight(this.$el),this.$el.removeClass("offset"),this.isCinematicPath(this.currentPath)||setTimeout(b.bind(function(){this.adjustMediaHeight(this.$el)},this),c))},adjustMediaHeight:function(a){this.adjustTop(this.isBreakingBarOpen)},searchToggle:function(b){b&&(b.stopPropagation(),b.preventDefault());var c=a(b.currentTarget);c.hasClass("active")?(c.removeClass("active"),this.browseContent.removeClass("search"),this.searchOpen=!1):(c.addClass("active"),this.browseContent.addClass("search"),this.searchOpen=!0),this.adjustMediaHeight(this.$el)},sectionHighlight:function(b){var c=a(b.currentTarget);if(c.hasClass("active")&&!a(b.target).attr("href")){var d=c.children("div");c.hasClass("collapsed")?(this.registerAnimation(d.slideDown(250).promise()),c.removeClass("collapsed")):(this.registerAnimation(d.slideUp(250).promise()),c.addClass("collapsed"))}},setPage:function(){var a=e.getPageInfo(this.$el),b={aws:a.aws,assetid:a.assetid,contenttype:a.media_type,ssts:a.ssts,sectionPath:a.section_name,templatetype:a.base_page_type,url:e.getPageUrl(),gallerytitle:a.gallerytitle||"",galleryindex:a.galleryindex||"",noinitialanalytics:a.noinitialanalytics||""};

document.title=a.seotitletag,d.trigger("page:load",b)},showRecommended:function(c){var d=a("#mediaview-recommended-template");if(d.length===1){var e=b.template(d.html(),{data:c.list});a(".recommended.playlist ul").append(e)}}});return m}),define("views/pages/stag-front",["jquery","underscore","backbone","app","pubsub","baseappview","advertisement","views/modules/alert","views/modules/footer","#","views/modules/headline","views/modules/video","views/modules/carousel","views/modules/featured-content","views/modules/form"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p=f.extend({events:{"click .ui-btn":"toggleHeadlineView"},initialize:function(a){this.$top=d.get("scrollEl"),f.prototype.initialize.call(this,a)},beforeReveal:function(a,b,c){},afterReveal:function(a,b){d.set("currentCardPath",b),this._initializeTopic(a,"stag")},_initializeTopic:function(b,c){var e=this;this.headlineCollection=this.$(".collection"),this.toggleList=this.$(".ui-btn.list"),this.toggleGrid=this.$(".ui-btn.grid"),this.subviews.video=[],a(".stag.hero .video").each(function(){var b=new l({el:a(this).parent().get(0)});e.subviews.video.push(b)}),this.subviews.formview=new o({el:this.el}),

this.subviews.footer=new i,
this.subviews.utilityBar=new j({noTransition:!0}),
this.subviews.headline=new k({el:".stag .mod.headlines"}),this.subviews.gallery=new m({el:".stag .mod.galleries",fullScreen:!0,track:!0});var f={};

try{f=this.setPage()||{};

var h=".partner.slider",n=f.topic||null,p=f.series||null;this.subviews.ads=new g({autoCreateSlot:!1,aws:f.aws,el:h,masterPageType:"card",title:document.title,refresh:!0,series:p,sliderFunctionality:!0,sitePage:"usat/"+f.ssts+"/front",topic:n,url:d.getPageUrl(),sectionPath:null})}catch(q){console.error("setPage or advertisement threw exception:",q.stack||q.stacktrace||q.message)}},getTemporaryLoader:function(){return'<article id="stag-view" class="cards stag ui-loading dark-medium"></article>'},adjust:function(){this.$top.animate({scrollTop:0},200)},toggleHeadlineView:function(b){b.stopPropagation(),b.preventDefault();var c=a(b.currentTarget);c.hasClass("grid")?(this.headlineCollection.removeClass("listview").addClass("gridview"),c.addClass("active"),this.toggleList.removeClass("active")):c.hasClass("list")&&(this.headlineCollection.addClass("listview").removeClass("gridview"),c.addClass("active"),this.toggleGrid.removeClass("active"))},setPage:function(){var a=d.getPageInfo(this.$el),c={asset_collection:a.asset_collection,aws:a.aws,blogname:a.blogname,contenttype:a.contenttype,ssts:a.ssts,subviews:this.subviews,assetid:a.assetid||"",templatetype:a.templatetype,url:d.getPageUrl(),videoincluded:a.videoincluded};

return b.defer(b.bind(function(){e.trigger("page:load",c)},this)),a}});return p}),define("views/pages/topic",["jquery","underscore","backbone","app","pubsub","views/pages/stag-front","views/modules/featured-content","views/modules/previous-bar"],function(a,b,c,d,e,f,g,h){var i=f.extend({el:"#topic-card",_initializeTopic:function(a,b){d.get("contenttype")=="story"&&(this.subviews.prevBar=new h({url:"/"+a,title:d.get("seotitle")}));var c=this.$(".mod.featured-content . ul > li").outerWidth(),e=this.$(".mod.featured-content .").outerWidth(),i=e/c;this.subviews.featured=new g({el:this.$el,itemWidth:c,itemsPerView:i,transition:{interval:!1}}),f.prototype._initializeTopic.call(this,a,"topic")}});return i}),define("views/pages/blog",["jquery","underscore","backbone","app","pubsub","views/pages/stag-front","views/modules/twitter","views/modules/blogs"],function(a,b,c,d,e,f,g,h){var i=f.extend({el:"#blog-card",_initializeTopic:function(a,b){this.subviews.twitter=new g({el:".stag .mod.tweets",num_tweets:9,columns:3}),this.subviews.blogs=new h({el:".stag .mod.blogs"}),f.prototype._initializeTopic.call(this,a,"blog")}});return i}),define("views/pages/userauth",["jquery","underscore","backbone","app","pubsub","baseview","eduglobal","fwinfo"],function(a,b,c,d,e,f,g,h){var i=f.extend({el:"#userauth-card",initialize:function(a){this.$top=d.get("scrollEl"),f.prototype.initialize.call(this,a)},afterReveal:function(c,e){d.set("currentCardPath",e),g.init(function(){return},!0),b.defer(this.setPage),a(".fb-login-button").attr("scope",g.permissions()),g.parse()},adjust:function(){this.$top.animate({scrollTop:0},200)},setPage:function(){var a={aws:"staticpage",contentParentId:"card",contenttype:"sectionfrontpage",sectionPath:"",ssts:"staticpage",subviews:this.subviews,templatetype:"templatetype",url:d.getPageUrl()};

e.trigger("page:load",a)}});return i}),define("settealium",["pubsub","fwinfo","underscore","backbone"],function(a,b,c){function g(a,b){for(var c in b)b.hasOwnProperty(c)&&b[c]&&(b[c]=(""+b[c]).toLowerCase());utag.track(a,b)}var d={},e=[],f=function(a,b){e.push([a,b])},h=Backbone.Model.extend({initialize:function(){a.on("page:load",function(a){i.page_load(a)}),a.on("uotrack",function(a){i.uotrack(a)}),a.on("heattrack",function(a){i.heattrack(a)}),a.on("slide:change",function(a){i.slide_change(a)}),self.utag&&this.ready()},ready:function(){c.defer(function(){for(var a=0;a<e.length;a++)g.apply(utag,e[a]);e=[],f=function(a,b){g(a,b),s_ut.prop41=""}})},relevant_data:function(a,c){var d=["undefined"],e=new Date(18e5*parseInt((new Date).getTime()/18e5,10)),f=e.getHours(),g=["undefined"],h=location.hash.match(/\bht=([^&]*)/)&&RegExp.$1;try{d=(a.aws||b.getadcst()).replace(/\/\/*$/,"").split("/"),g=a.ssts.split("/")}catch(i){console.error("Invalid page",i.stack||i.stacktrace||i.message);return}return{assetid:a.assetid,atyponuserid:b.getsessionvalue("atyponid"),blogname:a.blogname||a.topic||"",category:d[0],clickName:function(a,b){return a||b}(h,b.getandclearsessionvalue("clickName")),clickPage:b.getandclearsessionvalue("clickPage"),contenttype:a.contenttype,cst:d.slice(0,3).join(":"),dayofweek:"sunday monday tuesday wednesday thursday friday saturday".split(" ")[(new Date).getDay()],eventtype:c,gcionid:document.cookie.match(/\bGCIONID=([^;]*)/)&&RegExp.$1,halfhour:1+(f+11)%12+":"+function(a){return a.substr(a.length-2)}("0"+e.getMinutes())+(f>11?" pm":" am"),linkTrackVars:"prop1",pathName:a.pathName||"",prevpath:b.getandclearsessionvalue("prevpath"),referrerhost:h?document.referrer.split("/")[2]:"",searchkeywords:a.searchkeywords,section:g[0],ssts:g.join(":"),subcategory:d.slice(0,2).join(":"),subsection:g.slice(0,2).join(":"),templatetype:a.templatetype,topic:g.slice(0,3).join(":"),typeofday:((new Date).getDay()+8)%7>1?"weekday":"weekend",uniqueuserid:b.getsessionvalue("uniqueid"),videoincluded:a.videoincluded||"no",gallerytitle:a.gallerytitle||"",galleryindex:a.galleryindex||"",noinitialanalytics:a.noinitialanalytics||""}},page_load:function(a){var e=d=i.relevant_data(a,"page:load");b.setsessionvalue("prevpath",document.location.pathname),f("view",e),c.defer(function(){self.s_ut&&s_ut.getPPVSetup&&s_ut.getPPVSetup()})},uotrack:function(a){"string"!=typeof a&&(console.error("uotrack has been given a non-string event argument",a),a=(a||{}).prop41||"somethingbad");var b=a.match(/{% *[a-z0-9_]* *%}/gi);if(b)for(var c=0;c<b.length;c++){var e=b[c],g=e.match(/{% *([a-z0-9_]*) *%}/)&&RegExp.$1;a=a.replace(e,d[g])}var h={clickName:a,eventtype:"uotrack",linkTrackEvents:"None",linkTrackVars:"prop41"};

f("link",h)},heattrack:function(a){b.setsessionvalue("clickName",a),b.setsessionvalue("clickPage",location.href)},slide_change:function(a){var c=d,e,g;try{e=a.cst.split("/"),g=a.ssts.split("/")}catch(h){console.error("Invalid page",h.stack||h.stacktrace||h.message);return}c.clickName=b.getandclearsessionvalue("clickName"),c.contenttype=a.contenttype,c.videoincluded=a.videoincluded||"no",c.gallerytitle=a.gallery_title,c.galleryindex=a.gallery_index,c.assetid=a.gallery_id,c.eventtype="slide:change",c.templatetype="",c.category=e[0],c.cst=e.slice(0,3).join(":"),c.section=g[0],c.ssts=g.join(":"),c.subcategory=e.slice(0,2).join(":"),c.subsection=g.slice(0,2).join(":"),c.topic=g.slice(0,3).join(":"),c.pathName=a.pathName||"",f("view",c)}}),i=new h;return i}),require.config({paths:{jquery:"libs/jquery/jquery-1.7.2",underscore:"libs/underscore/underscore-min",backbone:"libs/backbone/backbone-dev",pubsub:"libs/backbone/plugins/pubsub",app:"models/app",baseview:"views/baseview",baseappview:"views/baseappview",simpleoverlay:"views/simple-overlay",cookie:"libs/jquery/plugins/jquery.cookie",easing:"libs/jquery/plugins/jquery.easing.1.3",animatecolors:"libs/jquery/plugins/jquery.animate-colors-min",resizestop:"libs/jquery/plugins/jquery.resizeStop",chosen:"libs/jquery/plugins/chosen.jquery.min",mousewheel:"libs/jquery/plugins/jquery.mousewheel.min",circleplayer:"libs/jquery/plugins/audio-player/circle.player",grab:"libs/jquery/plugins/audio-player/jquery.grab",jplayer:"libs/jquery/plugins/audio-player/jquery.jplayer",transform:"libs/jquery/plugins/audio-player/jquery.transform",twitter:"libs/twitter/twitter",fwinfo:"fw/models/fwinfo",settealium:"fw/models/settealium",eduglobal:"fw/eduglobal/eduglobal",fitvids:"libs/jquery/plugins/jquery.fitvids",datepicker:"libs/jquery/plugins/jquery-ui.datepicker.min",selectorextend:"libs/jquery/plugins/jquery.selector.extend",leafletabout:"libs/leaflet/leaflet.about",jqueryjsonp:"libs/jquery/plugins/jquery.jsonp-2.3.1.min",advertisement:"views/modules/advertisement",advertisementpreload:"views/modules/advertisement-preload",advertisementpreroll:"views/modules/advertisement-preroll"},shim:{cookie:["jquery"],easing:["jquery"],animatecolors:["jquery"],resizestop:["jquery"],chosen:["jquery"],mousewheel:["jquery"],circleplayer:["jquery"],grab:["jquery"],jplayer:["jquery"],transform:["jquery"],fitvids:["jquery"],selectorextend:["jquery"],jqueryjsonp:["jquery"]}}),require(["jquery","underscore","backbone","pubsub","app","state","admanager","views/app","views/pages/home","views/pages/generic-section","views/pages/about","views/pages/story","views/pages/404","views/pages/search","views/pages/contactus-overlay","views/pages/media","views/pages/topic","views/pages/blog","views/pages/sitemap","views/pages/sports","views/pages/sports-overlay","views/pages/userauth","views/modules/overlay","views/modules/cards2","views/modules/coverview","views/modules/alert","views/pages/static-overlay","eduglobal","settealium","fwinfo"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A){var B=c.Router.extend({DEBUG:!1,XHR_REMIND_TIME:3e4,LOADING_MESSAGE:"Loading... (temporary loader)",SLOW_CONNECTION_MESSAGE:"Oops. Connection is taking a long time... (temporary loader)",ERROR_MESSAGE:"Connection Error... (temporary message)",UPDATE_FREQUENCY:9e5,initialize:function(){this.init=!0,window.App=e,this.route(/^(.*)$/,"loadError"),this.route(/^()$/,"loadCardView"),this.route(/^((country|sports|train|money|tech|teac|case|about)\/[a-zA-Z0-9%\-\/\.]*)$/,"loadCardView"),this.route(/^(index.html)$/,"loadCardView"),this.route(/^(cover-view\/)$/,"loadCoverView"),this.route(/^(cover-view\/.*\/)$/,"loadCoverView"),this.route(/^(photos\/.*\/)$/,"loadOverlay"),this.route(/^(interactives\/.*\/)$/,"loadOverlay"),this.route(/^(picture-gallery\/.*\/)$/,"loadOverlay"),this.route(/^(videos\/.*\/)$/,"loadOverlay"),this.route(/^(story\/.*\/)$/,"loadOverlay"),this.route(/^(article\/.*\/)$/,"loadOverlay"),this.route(/^(puzzles\/.*\/)$/,"loadOverlay"),this.route(/^(money\/economic-calendar\/.*\/)$/,"loadOverlay"),this.route(/^(money\/etfs\/.*\/)$/,"loadOverlay"),this.route(/^(money\/funds\/.*\/)$/,"loadOverlay"),this.route(/^(money\/markets\/.*\/)$/,"loadOverlay"),this.route(/^(money\/stocks\/.*\/)$/,"loadOverlay"),this.route(/^(money\/tools\/.*\/)$/,"loadOverlay"),this.route(/^(lottery\/.*\/)$/,"loadOverlay"),this.route(/^(p\/.*)$/,"loadSimpleOverlay"),this.route(/^(shop.*|about.*|rss.*|mobile-apps.*|mediakit.*|reporters.*|legal.*|editorial-policy.*|conversation-guidelines.*)$/,"loadStaticOverlay"),this.route(/^(search\/.*)$/,"loadSearch"),this.route(/^(sports\/[a-zA-Z]+\/game\/.*)$/,"loadOverlay"),this.route(/^(contactus\/?)$/,"loadContactUs"),this.route(/^(topic\/.*)$/,"loadTopicPage"),this.route(/^(media\/.*)$/,"loadMediaView"),this.route(/^(blog\/.*)$/,"loadBlogPage"),this.route(/^(userauth\/default\/.*)$/,"loadUserAuthPage"),this.route(/^(404.html)$/,"loadError"),this.route(/^(500.html)$/,"loadError"),this.route(/^(sitemap\/.*)$/,"loadSiteMapView"),window.location.search&&window.location.search.indexOf("404=true")>-1&&this.loadError("/404.html",!0),this.xhr=null,this.xhrTimer=null,this.DEBUG=e.get("DEBUG"),d.trigger("initialize:router")},loadContactUs:function(a){this.DEBUG&&console.log("Router: Load Contact Us page: "+a),f.loadView(o,null,a,!0)},loadStaticOverlay:function(a){this.DEBUG&&console.log("Router: Load simple page: "+a),f.loadView(A,null,a,!0)},loadTopicPage:function(a){f.loadView(q,null,a)},loadCardView:function(a){f.loadView(x,null,a)},loadCoverView:function(a){f.loadView(y,null,a)},loadMediaView:function(a){f.loadView(p,null,a)},loadBlogPage:function(a){f.loadView(r,null,a)},loadOverlay:function(a){f.loadView(w,null,a,!0)},loadError:function(a,b){b?f.fetchHtml(a).done(function(a){var b=new m({ajax:!0,htmlFrag:a})}):f.loadView(m,{},a,!0)},loadUserAuthPage:function(a){f.loadView(v,null,a)},loadSearch:function(a){f.loadView(n,null,a)},loadSportsOverlay:function(a){f.loadView(u,null,a,!0)},loadSiteMapView:function(a){f.loadView(s,null,a)}}),C=new B,D=new h({idleTimer:9e5});c.history.start({pushState:!0,hashChange:!1})}),function(){var a={},b={};

document.writeln=(self.console||{}).log||function(){},document.write=function(c){for(var d in a)if(a.hasOwnProperty(d))try{a[d].apply({},arguments)}catch(e){}var c=Array.prototype.join.call(arguments,""),f=c.match(/<script[^<>]*src=['"]?([^'"<> ]*)['"]?[^<>]*>[^<>]*<\/script>/gi);for(var g=0;g<f.length;g++)f[g].match(/<script[^<>]*src=['"]?([^'"<> ]*)['"]?[^<>]*>[^<>]*<\/script>/i),$.getScript(RegExp.$1,function(){for(var a in b)if(b.hasOwnProperty(a))try{b[a].apply({},arguments)}catch(c){}}),c=c.replace(f[g],"");if(!c.match(/^\s*$/))try{console.log("document.write ignoring ",c)}catch(e){}},document.write.addOnWrite=function(b,c){if("function"!=typeof c)return;if(a[b])return;a[b]=c},document.write.addOnScript=function(a,c){if("function"!=typeof c)return;if(b[a])return;b[a]=c},document.write.delOnWrite=function(b){delete a[b]||(a[b]=undefined)},document.write.delOnScript=function(a){delete b[a]||(b[a]=undefined)}}(),define("main",function(){})